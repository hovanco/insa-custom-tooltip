{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-customer/edit-address-customer.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Col, Form, Input, message, Row, Select, Space } from 'antd';\nimport { map, omit } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport locationApi from '../../../api/location-api';\nimport storeApi from '../../../api/store-api';\nimport { useOrder } from './context-order';\nimport { validatePhone } from '../../../utils/validate-phone';\nimport { disabledAutosuggestion } from '../../../utils/disabled-autosuggestion';\nimport useHiddenModalExpired from '../../../hooks/use-hidden-modal-expired';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst styleField = {\n  marginBottom: 10\n};\n\nconst EditAddressCustomer = ({\n  dataCustomer,\n  toggleSetIsEditForm,\n  changeDataCustomer\n}) => {\n  _s();\n\n  const token = useSelector(({\n    auth\n  }) => auth.token);\n  const store = useSelector(({\n    store\n  }) => store.store);\n  const conversation = useSelector(({\n    fanpage\n  }) => fanpage.conversation);\n  const {\n    setInfoCustomer\n  } = useOrder();\n  const [form] = Form.useForm();\n  const [edit, setEdit] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [provinces, setProvinces] = useState([]);\n  const [loadingProvince, setLoadingProvince] = useState(true);\n  const [province, setProvince] = useState(dataCustomer.province);\n  const [districts, setDistricts] = useState([]);\n  const [loadingDistrict, setLoadingDistrict] = useState(false);\n  const [district, setDistrict] = useState(dataCustomer.district);\n  const [wards, setWards] = useState([]);\n  const [loadingWard, setLoadingWard] = useState(false);\n  const [ward, setWard] = useState(null);\n  const {\n    hiddenModalExpired\n  } = useHiddenModalExpired();\n\n  const onChangeProvince = value => {\n    setProvince(value);\n  };\n\n  const onChangeDistrict = value => {\n    setDistrict(value);\n  };\n\n  const onChangeWard = value => {\n    setWard(value);\n  };\n\n  const toggleEdit = () => {\n    setEdit(!edit);\n    toggleSetIsEditForm();\n  };\n\n  const cancelEdit = () => {\n    if (!dataCustomer._id) {\n      const data = {\n        _id: '',\n        fbUserId: '',\n        name: '',\n        phoneNo: '',\n        address: '',\n        province: undefined,\n        district: undefined,\n        ward: undefined,\n        note: ''\n      };\n      form.setFieldsValue(data);\n    } else {\n      setProvince(dataCustomer.province);\n      setDistrict(dataCustomer.district);\n      setWard(dataCustomer.ward);\n      form.setFieldsValue(dataCustomer);\n    }\n\n    setEdit(false);\n    toggleSetIsEditForm();\n  };\n\n  const onFinish = async values => {\n    try {\n      const data = { ...omit(dataCustomer, ['_id']),\n        ...values,\n        fbPageId: store.activePage._id,\n        fbUserId: conversation.fbUserId\n      };\n      let res;\n\n      if (!dataCustomer._id || dataCustomer._id.length === 0) {\n        res = await storeApi.createCustomer({\n          token: token.accessToken,\n          storeId: store._id,\n          data: omit(data, ['note'])\n        });\n        message.success('Đã tạo thành công khách hàng');\n      } else {\n        res = await storeApi.updateCustomer({\n          token: token.accessToken,\n          storeId: store._id,\n          customerId: dataCustomer._id,\n          data\n        });\n        message.success('Cập nhật thành công khách hàng');\n      }\n\n      setInfoCustomer({ ...res\n      });\n      setLoading(false);\n      changeDataCustomer({\n        _id: res._id,\n        fbUserId: res.fbUserId,\n        name: res.name,\n        phoneNo: res.phoneNo,\n        address: res.address,\n        province: res.province,\n        district: res.district,\n        ward: res.ward,\n        note: res.note\n      });\n      toggleEdit();\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      const errorStatusDupplicateTel = (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.statusCode;\n      setLoading(false);\n      message.error(errorStatusDupplicateTel === 409 ? 'Số điện thoại đã được sử dụng!' : 'Đã có lỗi xảy ra!');\n    }\n  };\n\n  useEffect(() => {\n    async function getListProvinces() {\n      try {\n        const response = await locationApi.getProvinces();\n        setProvinces(response);\n        setLoadingProvince(false);\n      } catch (error) {\n        setProvinces([]);\n        setLoadingProvince(false);\n      }\n    }\n\n    getListProvinces();\n  }, []);\n  useEffect(() => {\n    async function getListDistricts() {\n      if (!province) return null;\n      setLoadingDistrict(true);\n      form.setFieldsValue({\n        district: undefined,\n        ward: undefined\n      });\n\n      try {\n        const response = await locationApi.getDistricts(province);\n        setDistricts(response);\n        setLoadingDistrict(false);\n      } catch (error) {\n        setDistricts([]);\n        setLoadingDistrict(false);\n      }\n    }\n\n    getListDistricts();\n  }, [province]);\n  useEffect(() => {\n    async function getListWard() {\n      if (!district) return null;\n      setLoadingWard(true);\n      form.setFieldsValue({\n        ward: undefined\n      });\n\n      try {\n        const response = await locationApi.getWards({\n          provinceId: province,\n          districtId: district\n        });\n        setWards(response);\n        setLoadingWard(false);\n      } catch (error) {\n        setWards([]);\n        setLoadingWard(false);\n      }\n    }\n\n    getListWard();\n  }, [district]);\n\n  const renderContent = () => {\n    if (!edit) {\n      const addressCustomer = `${dataCustomer.address}  ${wards && wards[dataCustomer.ward] && wards[dataCustomer.ward].path_with_type || ''}`;\n\n      if (dataCustomer.phoneNo.trim().length === 0 && addressCustomer.trim().length === 0) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Ch\\u01B0a c\\xF3 \\u0111\\u1ECBa ch\\u1EC9 giao h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 24\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [dataCustomer.phoneNo, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), addressCustomer]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      onFinish: onFinish,\n      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"name\",\n        rules: [{\n          required: true,\n          message: 'Tên khách hàng không để trống'\n        }],\n        style: styleField,\n        initialValue: dataCustomer.name,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Nh\\u1EADp t\\xEAn kh\\xE1ch h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"phoneNo\",\n        rules: [{\n          required: true,\n          message: 'Số điện thoại không để trống'\n        }, {\n          validator: validatePhone\n        }],\n        style: styleField,\n        initialValue: dataCustomer.phoneNo,\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Nh\\u1EADp s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"province\",\n        initialValue: dataCustomer.province,\n        rules: [{\n          required: true,\n          message: 'Chọn tỉnh/ thành phố'\n        }],\n        style: styleField,\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          placeholder: \"T\\u1EC9nh/th\\xE0nh ph\\u1ED1\",\n          onChange: onChangeProvince,\n          showSearch: true,\n          value: dataCustomer.province,\n          filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0 // disabled={!!customerId && !isEditForm}\n          ,\n          loading: loadingProvince,\n          onFocus: disabledAutosuggestion,\n          children: map(provinces, province => /*#__PURE__*/_jsxDEV(Select.Option, {\n            value: province.code,\n            children: province.name\n          }, province.code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"district\",\n        initialValue: dataCustomer.district,\n        rules: [{\n          required: true,\n          message: 'Chọn quận/ huyện'\n        }],\n        style: styleField,\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          placeholder: \"Qu\\u1EADn/huy\\u1EC7n\",\n          onChange: onChangeDistrict,\n          showSearch: true,\n          filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n          value: dataCustomer.district // disabled={!dataCustomer.province || (!!customerId && !isEditForm)}\n          ,\n          loading: loadingDistrict,\n          onFocus: disabledAutosuggestion,\n          children: map(districts, district => /*#__PURE__*/_jsxDEV(Select.Option, {\n            value: district.code,\n            children: district.name\n          }, district.code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"ward\",\n        initialValue: dataCustomer.ward,\n        rules: [{\n          required: true,\n          message: 'Chọn xã/ phường'\n        }],\n        style: styleField,\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          placeholder: \"X\\xE3/ph\\u01B0\\u1EDDng\",\n          onChange: onChangeWard,\n          showSearch: true,\n          filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n          value: dataCustomer.ward // disabled={!dataCustomer.district || (!!customerId && !isEditForm)}\n          ,\n          loading: loadingWard,\n          onFocus: disabledAutosuggestion,\n          children: map(wards, district => /*#__PURE__*/_jsxDEV(Select.Option, {\n            value: district.code,\n            children: district.name\n          }, district.code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"address\",\n        rules: [{\n          required: true,\n          message: 'Địa chỉ không để trống'\n        }],\n        style: styleField,\n        initialValue: dataCustomer.address,\n        children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n          rows: 3,\n          placeholder: \"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        style: {\n          margin: 0,\n          textAlign: 'right'\n        },\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: cancelEdit,\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            loading: loading,\n            disabled: hiddenModalExpired,\n            children: \"L\\u01B0u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!edit && /*#__PURE__*/_jsxDEV(Row, {\n      justify: \"space-between\",\n      align: \"middle\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"customer-address-title\",\n          children: \"\\u0110\\u1ECBa ch\\u1EC9 giao h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: toggleEdit,\n          children: \"Thay \\u0111\\u1ED5i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 5\n      },\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditAddressCustomer, \"o7HoYcU6kAnfqeaHiJ4+r+cxH7Y=\", false, function () {\n  return [useSelector, useSelector, useSelector, useOrder, Form.useForm, useHiddenModalExpired];\n});\n\n_c = EditAddressCustomer;\nexport default EditAddressCustomer;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditAddressCustomer\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-customer/edit-address-customer.tsx"],"names":["Button","Col","Form","Input","message","Row","Select","Space","map","omit","React","useEffect","useState","useSelector","locationApi","storeApi","useOrder","validatePhone","disabledAutosuggestion","useHiddenModalExpired","styleField","marginBottom","EditAddressCustomer","dataCustomer","toggleSetIsEditForm","changeDataCustomer","token","auth","store","conversation","fanpage","setInfoCustomer","form","useForm","edit","setEdit","loading","setLoading","provinces","setProvinces","loadingProvince","setLoadingProvince","province","setProvince","districts","setDistricts","loadingDistrict","setLoadingDistrict","district","setDistrict","wards","setWards","loadingWard","setLoadingWard","ward","setWard","hiddenModalExpired","onChangeProvince","value","onChangeDistrict","onChangeWard","toggleEdit","cancelEdit","_id","data","fbUserId","name","phoneNo","address","undefined","note","setFieldsValue","onFinish","values","fbPageId","activePage","res","length","createCustomer","accessToken","storeId","success","updateCustomer","customerId","error","errorStatusDupplicateTel","response","statusCode","getListProvinces","getProvinces","getListDistricts","getDistricts","getListWard","getWards","provinceId","districtId","renderContent","addressCustomer","path_with_type","trim","required","validator","input","option","children","toLowerCase","indexOf","code","margin","textAlign","marginTop"],"mappings":"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","sourcesContent":["import { Button, Col, Form, Input, message, Row, Select, Space } from 'antd';\nimport { Store } from 'antd/lib/form/interface';\nimport { map, omit } from 'lodash';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport locationApi from '../../../api/location-api';\nimport storeApi from '../../../api/store-api';\nimport { IAuthState } from '../../../reducers/authState/authReducer';\nimport { IConversation, IFacebookState } from '../../../reducers/fanpageState/fanpageReducer';\nimport { IStoreState } from '../../../reducers/storeState/storeReducer';\nimport { District, Province } from '../../create-store/create-store-form';\nimport { useOrder } from './context-order';\nimport { validatePhone } from '../../../utils/validate-phone';\nimport { disabledAutosuggestion } from '../../../utils/disabled-autosuggestion';\nimport useHiddenModalExpired from '../../../hooks/use-hidden-modal-expired';\n\ninterface Props {\n    dataCustomer: any;\n    isEditForm: boolean;\n    toggleSetIsEditForm: () => void;\n    changeDataCustomer: (value: any) => void;\n}\n\nconst styleField = {\n    marginBottom: 10,\n};\n\nconst EditAddressCustomer: FC<Props> = ({\n    dataCustomer,\n    toggleSetIsEditForm,\n    changeDataCustomer,\n}: Props) => {\n    const token: any = useSelector(({ auth }: { auth: IAuthState }) => auth.token);\n    const store = useSelector(({ store }: { store: IStoreState }) => store.store);\n    const conversation: IConversation = useSelector(\n        ({ fanpage }: { fanpage: IFacebookState }) => fanpage.conversation,\n    );\n\n    const { setInfoCustomer } = useOrder();\n\n    const [form] = Form.useForm();\n    const [edit, setEdit] = useState(false);\n\n    const [loading, setLoading] = useState(false);\n\n    const [provinces, setProvinces] = useState<Province[]>([]);\n    const [loadingProvince, setLoadingProvince] = useState<boolean>(true);\n    const [province, setProvince] = useState<string | null>(dataCustomer.province);\n\n    const [districts, setDistricts] = useState<District[]>([]);\n    const [loadingDistrict, setLoadingDistrict] = useState<boolean>(false);\n    const [district, setDistrict] = useState<string | null>(dataCustomer.district);\n\n    const [wards, setWards] = useState<District[]>([]);\n    const [loadingWard, setLoadingWard] = useState<boolean>(false);\n    const [ward, setWard] = useState<string | null>(null);\n    const { hiddenModalExpired } = useHiddenModalExpired();\n\n    const onChangeProvince = (value: string) => {\n        setProvince(value);\n    };\n\n    const onChangeDistrict = (value: string) => {\n        setDistrict(value);\n    };\n\n    const onChangeWard = (value: string) => {\n        setWard(value);\n    };\n\n    const toggleEdit = () => {\n        setEdit(!edit);\n        toggleSetIsEditForm();\n    };\n\n    const cancelEdit = () => {\n        if (!dataCustomer._id) {\n            const data = {\n                _id: '',\n                fbUserId: '',\n                name: '',\n                phoneNo: '',\n                address: '',\n                province: undefined,\n                district: undefined,\n                ward: undefined,\n                note: '',\n            };\n\n            form.setFieldsValue(data);\n        } else {\n            setProvince(dataCustomer.province);\n            setDistrict(dataCustomer.district);\n            setWard(dataCustomer.ward);\n\n            form.setFieldsValue(dataCustomer);\n        }\n\n        setEdit(false);\n        toggleSetIsEditForm();\n    };\n\n    const onFinish = async (values: Store) => {\n        try {\n            const data = {\n                ...omit(dataCustomer, ['_id']),\n                ...values,\n                fbPageId: store.activePage._id,\n                fbUserId: conversation.fbUserId,\n            };\n\n            let res;\n\n            if (!dataCustomer._id || dataCustomer._id.length === 0) {\n                res = await storeApi.createCustomer({\n                    token: token.accessToken,\n                    storeId: store._id,\n                    data: omit(data, ['note']),\n                });\n\n                message.success('Đã tạo thành công khách hàng');\n            } else {\n                res = await storeApi.updateCustomer({\n                    token: token.accessToken,\n                    storeId: store._id,\n                    customerId: dataCustomer._id,\n                    data,\n                });\n\n                message.success('Cập nhật thành công khách hàng');\n            }\n\n            setInfoCustomer({\n                ...res,\n            });\n\n            setLoading(false);\n            changeDataCustomer({\n                _id: res._id,\n                fbUserId: res.fbUserId,\n                name: res.name,\n                phoneNo: res.phoneNo,\n                address: res.address,\n                province: res.province,\n                district: res.district,\n                ward: res.ward,\n                note: res.note,\n            });\n            toggleEdit();\n        } catch (error) {\n            const errorStatusDupplicateTel = error.response?.data?.statusCode;\n            setLoading(false);\n            message.error(\n                errorStatusDupplicateTel === 409\n                    ? 'Số điện thoại đã được sử dụng!'\n                    : 'Đã có lỗi xảy ra!',\n            );\n        }\n    };\n\n    useEffect(() => {\n        async function getListProvinces() {\n            try {\n                const response = await locationApi.getProvinces();\n\n                setProvinces(response);\n                setLoadingProvince(false);\n            } catch (error) {\n                setProvinces([]);\n                setLoadingProvince(false);\n            }\n        }\n        getListProvinces();\n    }, []);\n\n    useEffect(() => {\n        async function getListDistricts() {\n            if (!province) return null;\n            setLoadingDistrict(true);\n            form.setFieldsValue({\n                district: undefined,\n                ward: undefined,\n            });\n            try {\n                const response = await locationApi.getDistricts(province);\n                setDistricts(response);\n                setLoadingDistrict(false);\n            } catch (error) {\n                setDistricts([]);\n                setLoadingDistrict(false);\n            }\n        }\n        getListDistricts();\n    }, [province]);\n\n    useEffect(() => {\n        async function getListWard() {\n            if (!district) return null;\n            setLoadingWard(true);\n            form.setFieldsValue({\n                ward: undefined,\n            });\n            try {\n                const response = await locationApi.getWards({\n                    provinceId: province,\n                    districtId: district,\n                });\n\n                setWards(response);\n                setLoadingWard(false);\n            } catch (error) {\n                setWards([]);\n                setLoadingWard(false);\n            }\n        }\n        getListWard();\n    }, [district]);\n\n    const renderContent = () => {\n        if (!edit) {\n            const addressCustomer = `${dataCustomer.address}  ${\n                (wards && wards[dataCustomer.ward] && wards[dataCustomer.ward].path_with_type) || ''\n            }`;\n\n            if (dataCustomer.phoneNo.trim().length === 0 && addressCustomer.trim().length === 0) {\n                return <div>Chưa có địa chỉ giao hàng</div>;\n            }\n\n            return (\n                <div>\n                    {dataCustomer.phoneNo}\n                    <br />\n                    {addressCustomer}\n                </div>\n            );\n        }\n\n        return (\n            <Form form={form} onFinish={onFinish}>\n                <Form.Item\n                    name='name'\n                    rules={[{ required: true, message: 'Tên khách hàng không để trống' }]}\n                    style={styleField}\n                    initialValue={dataCustomer.name}\n                >\n                    <Input placeholder='Nhập tên khách hàng' />\n                </Form.Item>\n                <Form.Item\n                    name='phoneNo'\n                    rules={[\n                        { required: true, message: 'Số điện thoại không để trống' },\n                        {\n                            validator: validatePhone,\n                        },\n                    ]}\n                    style={styleField}\n                    initialValue={dataCustomer.phoneNo}\n                >\n                    <Input placeholder='Nhập số điện thoại' />\n                </Form.Item>\n\n                <Form.Item\n                    name='province'\n                    initialValue={dataCustomer.province}\n                    rules={[{ required: true, message: 'Chọn tỉnh/ thành phố' }]}\n                    style={styleField}\n                >\n                    <Select\n                        placeholder='Tỉnh/thành phố'\n                        onChange={onChangeProvince}\n                        showSearch\n                        value={dataCustomer.province}\n                        filterOption={(input, option: any) =>\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                        }\n                        // disabled={!!customerId && !isEditForm}\n                        loading={loadingProvince}\n                        onFocus={disabledAutosuggestion}\n                    >\n                        {map(provinces, (province: Province) => (\n                            <Select.Option value={province.code} key={province.code}>\n                                {province.name}\n                            </Select.Option>\n                        ))}\n                    </Select>\n                </Form.Item>\n\n                <Form.Item\n                    name='district'\n                    initialValue={dataCustomer.district}\n                    rules={[{ required: true, message: 'Chọn quận/ huyện' }]}\n                    style={styleField}\n                >\n                    <Select\n                        placeholder='Quận/huyện'\n                        onChange={onChangeDistrict}\n                        showSearch\n                        filterOption={(input, option: any) =>\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                        }\n                        value={dataCustomer.district}\n                        // disabled={!dataCustomer.province || (!!customerId && !isEditForm)}\n                        loading={loadingDistrict}\n                        onFocus={disabledAutosuggestion}\n                    >\n                        {map(districts, (district: District) => (\n                            <Select.Option value={district.code} key={district.code}>\n                                {district.name}\n                            </Select.Option>\n                        ))}\n                    </Select>\n                </Form.Item>\n\n                <Form.Item\n                    name='ward'\n                    initialValue={dataCustomer.ward}\n                    rules={[{ required: true, message: 'Chọn xã/ phường' }]}\n                    style={styleField}\n                >\n                    <Select\n                        placeholder='Xã/phường'\n                        onChange={onChangeWard}\n                        showSearch\n                        filterOption={(input, option: any) =>\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                        }\n                        value={dataCustomer.ward}\n                        // disabled={!dataCustomer.district || (!!customerId && !isEditForm)}\n                        loading={loadingWard}\n                        onFocus={disabledAutosuggestion}\n                    >\n                        {map(wards, (district: District) => (\n                            <Select.Option value={district.code} key={district.code}>\n                                {district.name}\n                            </Select.Option>\n                        ))}\n                    </Select>\n                </Form.Item>\n\n                <Form.Item\n                    name='address'\n                    rules={[{ required: true, message: 'Địa chỉ không để trống' }]}\n                    style={styleField}\n                    initialValue={dataCustomer.address}\n                >\n                    <Input.TextArea rows={3} placeholder='Nhập địa chỉ' />\n                </Form.Item>\n\n                <Form.Item style={{ margin: 0, textAlign: 'right' }}>\n                    <Space>\n                        <Button onClick={cancelEdit}>Hủy</Button>\n                        <Button\n                            type='primary'\n                            htmlType='submit'\n                            loading={loading}\n                            disabled={hiddenModalExpired}\n                        >\n                            Lưu\n                        </Button>\n                    </Space>\n                </Form.Item>\n            </Form>\n        );\n    };\n\n    return (\n        <div>\n            {!edit && (\n                <Row justify='space-between' align='middle'>\n                    <Col>\n                        <span className='customer-address-title'>Địa chỉ giao hàng</span>\n                    </Col>\n\n                    <Col>\n                        <a onClick={toggleEdit}>Thay đổi</a>\n                    </Col>\n                </Row>\n            )}\n            <div style={{ marginTop: 5 }}>{renderContent()}</div>\n        </div>\n    );\n};\n\nexport default EditAddressCustomer;\n"]},"metadata":{},"sourceType":"module"}