{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/warehouses/btn-remove-warehouse.tsx\",\n    _s = $RefreshSig$();\n\nimport { DeleteOutlined } from '@ant-design/icons';\nimport { Button, message, Modal } from 'antd';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { deleteWarehouseRequest } from '../../api/warehouse-api';\nimport { fetchWarehouses } from '../../reducers/warehouseState/warehouseAction';\nimport { get } from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BtnRemoveWarehouse = ({\n  warehouses,\n  resetSelect,\n  limit,\n  page\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const store = useSelector(state => state.store.store);\n  const token = useSelector(state => state.auth.token);\n  const [loading, setLoading] = useState(false);\n\n  const showDeleteConfirm = () => {\n    Modal.confirm({\n      title: 'Xóa chi nhánh?',\n      content: `Bạn chắc chắn muốn xóa những chi nhánh đã chọn?`,\n      okText: 'Xóa',\n      okType: 'danger',\n      cancelText: 'Hủy',\n      width: 450,\n\n      onOk() {\n        removeMoreWarehouses();\n      },\n\n      onCancel() {}\n\n    });\n  };\n\n  const removeMoreWarehouses = async () => {\n    try {\n      setLoading(true);\n      const response = await Promise.all(warehouses.map(async warehouseId => {\n        await deleteWarehouseRequest({\n          token: token.accessToken,\n          storeId: store._id,\n          warehouseId\n        });\n        return warehouseId;\n      }));\n      message.success('Đã xóa chi nhánh');\n      setLoading(false);\n      resetSelect();\n      dispatch(fetchWarehouses({\n        page,\n        limit\n      }));\n    } catch (error) {\n      if (get(error, 'response.data.message') === 'HAS_RELATED_ORDER') {\n        message.error('Đã tạo đơn với chi nhánh này, bạn không thể xóa chi nhánh');\n      } else {\n        message.error('Lỗi xóa chi nhánh');\n      }\n\n      dispatch(fetchWarehouses({\n        page,\n        limit\n      }));\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Button, {\n    danger: true,\n    type: \"primary\",\n    icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }, this),\n    onClick: showDeleteConfirm,\n    loading: loading,\n    children: \"X\\xF3a\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BtnRemoveWarehouse, \"kYF6s8mJ9HP6ILz8V+ZxZiVPOxg=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = BtnRemoveWarehouse;\nexport default BtnRemoveWarehouse;\n\nvar _c;\n\n$RefreshReg$(_c, \"BtnRemoveWarehouse\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/warehouses/btn-remove-warehouse.tsx"],"names":["DeleteOutlined","Button","message","Modal","React","useState","useDispatch","useSelector","deleteWarehouseRequest","fetchWarehouses","get","BtnRemoveWarehouse","warehouses","resetSelect","limit","page","dispatch","store","state","token","auth","loading","setLoading","showDeleteConfirm","confirm","title","content","okText","okType","cancelText","width","onOk","removeMoreWarehouses","onCancel","response","Promise","all","map","warehouseId","accessToken","storeId","_id","success","error"],"mappings":"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","sourcesContent":["import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, message, Modal } from 'antd';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { deleteWarehouseRequest } from '../../api/warehouse-api';\nimport { fetchWarehouses } from '../../reducers/warehouseState/warehouseAction';\nimport { get } from 'lodash';\n\ninterface Props {\n    warehouses: string[];\n    resetSelect: () => void;\n    limit: number;\n    page: number;\n}\n\nconst BtnRemoveWarehouse = ({ warehouses, resetSelect, limit, page }: Props) => {\n    const dispatch = useDispatch();\n    const store = useSelector((state: any) => state.store.store);\n    const token = useSelector((state: any) => state.auth.token);\n\n    const [loading, setLoading] = useState(false);\n\n    const showDeleteConfirm = () => {\n        Modal.confirm({\n            title: 'Xóa chi nhánh?',\n            content: `Bạn chắc chắn muốn xóa những chi nhánh đã chọn?`,\n            okText: 'Xóa',\n            okType: 'danger',\n            cancelText: 'Hủy',\n            width: 450,\n            onOk() {\n                removeMoreWarehouses();\n            },\n            onCancel() {},\n        });\n    };\n\n    const removeMoreWarehouses = async () => {\n        try {\n            setLoading(true);\n\n            const response = await Promise.all(\n                warehouses.map(async (warehouseId: string) => {\n                    await deleteWarehouseRequest({\n                        token: token.accessToken,\n                        storeId: store._id,\n                        warehouseId,\n                    });\n                    return warehouseId;\n                })\n            );\n\n            message.success('Đã xóa chi nhánh');\n            setLoading(false);\n            resetSelect();\n            dispatch(\n                fetchWarehouses({\n                    page,\n                    limit,\n                })\n            );\n        } catch (error) {\n            if (get(error, 'response.data.message') === 'HAS_RELATED_ORDER') {\n                message.error('Đã tạo đơn với chi nhánh này, bạn không thể xóa chi nhánh');\n            } else {\n                message.error('Lỗi xóa chi nhánh');\n            }\n            dispatch(\n                fetchWarehouses({\n                    page,\n                    limit,\n                })\n            );\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Button\n            danger\n            type='primary'\n            icon={<DeleteOutlined />}\n            onClick={showDeleteConfirm}\n            loading={loading}\n        >\n            Xóa\n        </Button>\n    );\n};\n\nexport default BtnRemoveWarehouse;\n"]},"metadata":{},"sourceType":"module"}