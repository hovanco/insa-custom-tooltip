{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/customer/notfication-context.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { values } from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst sound = require('../../assets/messenger-less-loudly.mp3');\n\nconst initialContext = {\n  count: 0,\n  title: '',\n  play: () => {}\n};\nconst NotificationContext = /*#__PURE__*/createContext(initialContext);\n\nconst ProviderNotification = ({\n  children\n}) => {\n  _s();\n\n  const pages = useSelector(state => state.fanpage.pages);\n  const [count, setCount] = useState(0);\n  const [title, setTitle] = useState(() => count === 0 ? '' : `${count}`);\n  const audio = new Audio(sound);\n\n  const play = () => {\n    audio.play();\n    setCount(count + 1);\n  };\n\n  useEffect(() => {\n    if (values(pages).length > 0) {\n      const arr = values(pages);\n      let sum = arr.reduce(function (a, b) {\n        return a + b['countUnread'] || 0;\n      }, 0);\n      setCount(sum);\n    }\n  }, [pages]);\n  useEffect(() => {\n    const new_title = count === 0 ? '' : `(${count > 99 ? '99+' : count})`;\n    setTitle(new_title);\n  }, [count]);\n  const value = {\n    count,\n    title,\n    play\n  };\n  return /*#__PURE__*/_jsxDEV(NotificationContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 12\n  }, this);\n};\n\n_s(ProviderNotification, \"WGGHZVaFAgOsG6edEarBM9seoN8=\", false, function () {\n  return [useSelector];\n});\n\n_c = ProviderNotification;\n\nconst useNotification = () => {\n  _s2();\n\n  const value = useContext(NotificationContext);\n  return { ...value\n  };\n};\n\n_s2(useNotification, \"ksutO2/Ix3UeCrGnhyM+QEP505Y=\");\n\nexport { ProviderNotification, useNotification };\n\nvar _c;\n\n$RefreshReg$(_c, \"ProviderNotification\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/customer/notfication-context.tsx"],"names":["React","createContext","useContext","useState","useEffect","useSelector","values","sound","require","initialContext","count","title","play","NotificationContext","ProviderNotification","children","pages","state","fanpage","setCount","setTitle","audio","Audio","length","arr","sum","reduce","a","b","new_title","value","useNotification"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA0CC,UAA1C,EAAsDC,QAAtD,EAAgEC,SAAhE,QAAiF,OAAjF;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAA4BC,MAA5B,QAA0C,QAA1C;;;AACA,MAAMC,KAAK,GAAGC,OAAO,CAAC,wCAAD,CAArB;;AAEA,MAAMC,cAAc,GAAG;AACnBC,EAAAA,KAAK,EAAE,CADY;AAEnBC,EAAAA,KAAK,EAAE,EAFY;AAGnBC,EAAAA,IAAI,EAAE,MAAM,CAAE;AAHK,CAAvB;AAMA,MAAMC,mBAAmB,gBAAGZ,aAAa,CAAMQ,cAAN,CAAzC;;AAKA,MAAMK,oBAAoB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAyB;AAAA;;AAClD,QAAMC,KAAK,GAAGX,WAAW,CAAEY,KAAD,IAAgBA,KAAK,CAACC,OAAN,CAAcF,KAA/B,CAAzB;AAEA,QAAM,CAACN,KAAD,EAAQS,QAAR,IAAoBhB,QAAQ,CAAS,CAAT,CAAlC;AACA,QAAM,CAACQ,KAAD,EAAQS,QAAR,IAAoBjB,QAAQ,CAAS,MAAOO,KAAK,KAAK,CAAV,GAAc,EAAd,GAAoB,GAAEA,KAAM,EAA5C,CAAlC;AAEA,QAAMW,KAAK,GAAG,IAAIC,KAAJ,CAAUf,KAAV,CAAd;;AACA,QAAMK,IAAI,GAAG,MAAM;AACfS,IAAAA,KAAK,CAACT,IAAN;AACAO,IAAAA,QAAQ,CAACT,KAAK,GAAG,CAAT,CAAR;AACH,GAHD;;AAKAN,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIE,MAAM,CAACU,KAAD,CAAN,CAAcO,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,YAAMC,GAAG,GAAGlB,MAAM,CAACU,KAAD,CAAlB;AACA,UAAIS,GAAG,GAAGD,GAAG,CAACE,MAAJ,CAAW,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AACjC,eAAOD,CAAC,GAAGC,CAAC,CAAC,aAAD,CAAL,IAAwB,CAA/B;AACH,OAFS,EAEP,CAFO,CAAV;AAGAT,MAAAA,QAAQ,CAACM,GAAD,CAAR;AACH;AACJ,GARQ,EAQN,CAACT,KAAD,CARM,CAAT;AAUAZ,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMyB,SAAS,GAAGnB,KAAK,KAAK,CAAV,GAAc,EAAd,GAAoB,IAAGA,KAAK,GAAG,EAAR,GAAa,KAAb,GAAqBA,KAAM,GAApE;AACAU,IAAAA,QAAQ,CAACS,SAAD,CAAR;AACH,GAHQ,EAGN,CAACnB,KAAD,CAHM,CAAT;AAKA,QAAMoB,KAAK,GAAG;AACVpB,IAAAA,KADU;AAEVC,IAAAA,KAFU;AAGVC,IAAAA;AAHU,GAAd;AAMA,sBAAO,QAAC,mBAAD,CAAqB,QAArB;AAA8B,IAAA,KAAK,EAAEkB,KAArC;AAAA,cAA6Cf;AAA7C;AAAA;AAAA;AAAA;AAAA,UAAP;AACH,CAlCD;;GAAMD,oB;UACYT,W;;;KADZS,oB;;AAoCN,MAAMiB,eAAe,GAAG,MAAM;AAAA;;AAC1B,QAAMD,KAAK,GAAG5B,UAAU,CAACW,mBAAD,CAAxB;AAEA,SAAO,EACH,GAAGiB;AADA,GAAP;AAGH,CAND;;IAAMC,e;;AAQN,SAASjB,oBAAT,EAA+BiB,eAA/B","sourcesContent":["import React, { createContext, ReactNode, useContext, useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { isNumber, isArray, values } from 'lodash';\nconst sound = require('../../assets/messenger-less-loudly.mp3');\n\nconst initialContext = {\n    count: 0,\n    title: '',\n    play: () => {},\n};\n\nconst NotificationContext = createContext<any>(initialContext);\n\ninterface Props {\n    children: ReactNode;\n}\nconst ProviderNotification = ({ children }: Props) => {\n    const pages = useSelector((state: any) => state.fanpage.pages);\n\n    const [count, setCount] = useState<number>(0);\n    const [title, setTitle] = useState<string>(() => (count === 0 ? '' : `${count}`));\n\n    const audio = new Audio(sound);\n    const play = () => {\n        audio.play();\n        setCount(count + 1);\n    };\n\n    useEffect(() => {\n        if (values(pages).length > 0) {\n            const arr = values(pages);\n            let sum = arr.reduce(function (a, b) {\n                return a + b['countUnread'] || 0;\n            }, 0);\n            setCount(sum);\n        }\n    }, [pages]);\n\n    useEffect(() => {\n        const new_title = count === 0 ? '' : `(${count > 99 ? '99+' : count})`;\n        setTitle(new_title);\n    }, [count]);\n\n    const value = {\n        count,\n        title,\n        play,\n    };\n\n    return <NotificationContext.Provider value={value}>{children}</NotificationContext.Provider>;\n};\n\nconst useNotification = () => {\n    const value = useContext(NotificationContext);\n\n    return {\n        ...value,\n    };\n};\n\nexport { ProviderNotification, useNotification };\n"]},"metadata":{},"sourceType":"module"}