{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-detail/conversation-detail-top.tsx\",\n    _s = $RefreshSig$();\n\nimport { EyeInvisibleOutlined } from '@ant-design/icons';\nimport { Avatar, Tooltip, Space } from 'antd';\nimport { find } from 'lodash';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { markAsUnreadApi } from '../../../api/conversation-api';\nimport { loadConversations, markAsUnread, removeConversations, updateCountUnreadPage } from '../../../reducers/fanpageState/fanpageAction';\nimport ToggleBlockBtn from './toggle-block-btn';\nimport { MessageIcon, FacebookIcon, SearchIcon } from '../../../assets/icon';\nimport { generateUrlImgFb } from '../../../utils/generate-url-img-fb';\nimport './conversation-detail-top.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ConversationDetailTop = () => {\n  _s();\n\n  const [flag, setFlag] = useState(false);\n  const conversation = useSelector(({\n    fanpage\n  }) => fanpage.conversation);\n  const pages = useSelector(({\n    fanpage\n  }) => fanpage.pages);\n  const store = useSelector(({\n    store\n  }) => store.store);\n  const token = useSelector(({\n    auth\n  }) => auth.token);\n  const page = find(pages, page => page.fbObjectId === conversation.fbPageId);\n  useEffect(() => {\n    setFlag(false);\n  }, [conversation]);\n  const postId = conversation.postId ? conversation.postId.split('_')[1] : '';\n  const dispatch = useDispatch();\n\n  const handleFilterConversation = () => {\n    dispatch(removeConversations());\n    let fbPageId;\n\n    if (store.activePage) {\n      fbPageId = store.activePage.fbObjectId;\n    }\n\n    const query = store.queryConversation ? `${store.queryConversation}&fbUserId=${conversation.fbUserId}` : `fbUserId=${conversation.fbUserId}`;\n    dispatch(loadConversations(query, [fbPageId]));\n  };\n\n  const handleMarkAsUnread = () => {\n    if (!flag || !conversation.unread) {\n      markAsUnreadApi({\n        storeId: store._id,\n        fbPageId: conversation.fbPageId,\n        token: token.accessToken,\n        conversationId: conversation.fbObjectId,\n        read: false\n      }).then(res => {\n        dispatch(updateCountUnreadPage({\n          fbObjectId: store.activePage.fbObjectId\n        }));\n        dispatch(markAsUnread({\n          conversation,\n          unread: true\n        }));\n        setFlag(true);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"conversation-detail-top\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          alt: conversation.fbUsername,\n          src: generateUrlImgFb(conversation.fbUserId, page.accessToken),\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"icon\",\n          children: conversation.type === 1 ? /*#__PURE__*/_jsxDEV(MessageIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 52\n          }, this) : /*#__PURE__*/_jsxDEV(FacebookIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 70\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"name\",\n          children: conversation.fbUsername\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"date\",\n          children: moment(conversation.updatedAt).format('DD-MM-YYYY HH:mm')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"action\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"item\",\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            placement: \"bottom\",\n            title: \"T\\u1EA5t c\\u1EA3 h\\u1ED9i tho\\u1EA1i c\\u1EE7a kh\\xE1ch n\\xE0y\",\n            children: /*#__PURE__*/_jsxDEV(SearchIcon, {\n              onClick: handleFilterConversation\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"item\",\n          children: /*#__PURE__*/_jsxDEV(ToggleBlockBtn, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"item\",\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            placement: \"bottom\",\n            title: \"\\u0110\\xE1nh d\\u1EA5u ch\\u01B0a \\u0111\\u1ECDc\",\n            children: /*#__PURE__*/_jsxDEV(EyeInvisibleOutlined, {\n              onClick: handleMarkAsUnread,\n              disabled: flag\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), page && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar-fb\",\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          align: \"center\",\n          size: 15,\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: page.link,\n            target: \"_blank\",\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              placement: \"bottom\",\n              title: page.name,\n              children: /*#__PURE__*/_jsxDEV(Avatar, {\n                src: generateUrlImgFb(page.fbObjectId, page.accessToken),\n                alt: page.name,\n                size: 38\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 29\n          }, this), conversation.type === 2 && /*#__PURE__*/_jsxDEV(\"a\", {\n            href: `${page && page.link}/posts/${postId}`,\n            target: \"_blank\",\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              placement: \"bottom\",\n              title: \"Xem tr\\xEAn facebook\",\n              children: /*#__PURE__*/_jsxDEV(FacebookIcon, {\n                style: {\n                  fontSize: 25\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ConversationDetailTop, \"Nl7YxR+HFyPMXbBSn656mMqY1Po=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = ConversationDetailTop;\nexport default ConversationDetailTop;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConversationDetailTop\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-detail/conversation-detail-top.tsx"],"names":["EyeInvisibleOutlined","Avatar","Tooltip","Space","find","moment","React","useEffect","useState","useDispatch","useSelector","markAsUnreadApi","loadConversations","markAsUnread","removeConversations","updateCountUnreadPage","ToggleBlockBtn","MessageIcon","FacebookIcon","SearchIcon","generateUrlImgFb","ConversationDetailTop","flag","setFlag","conversation","fanpage","pages","store","token","auth","page","fbObjectId","fbPageId","postId","split","dispatch","handleFilterConversation","activePage","query","queryConversation","fbUserId","handleMarkAsUnread","unread","storeId","_id","accessToken","conversationId","read","then","res","fbUsername","type","updatedAt","format","link","name","fontSize"],"mappings":"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","sourcesContent":["import { EyeInvisibleOutlined } from '@ant-design/icons';\nimport { Avatar, Tooltip, Space } from 'antd';\nimport { find } from 'lodash';\nimport moment from 'moment';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { markAsUnreadApi } from '../../../api/conversation-api';\nimport { IAuthState } from '../../../reducers/authState/authReducer';\nimport {\n    loadConversations,\n    markAsUnread,\n    removeConversations,\n    updateCountUnreadPage,\n} from '../../../reducers/fanpageState/fanpageAction';\nimport { IConversation, IFacebookState, Page } from '../../../reducers/fanpageState/fanpageReducer';\nimport { IStoreState } from '../../../reducers/storeState/storeReducer';\nimport ToggleBlockBtn from './toggle-block-btn';\nimport { MessageIcon, FacebookIcon, SearchIcon } from '../../../assets/icon';\nimport { generateUrlImgFb } from '../../../utils/generate-url-img-fb';\n\nimport './conversation-detail-top.less';\n\nconst ConversationDetailTop: FC = (): JSX.Element => {\n    const [flag, setFlag] = useState<boolean>(false);\n    const conversation: IConversation = useSelector(\n        ({ fanpage }: { fanpage: IFacebookState }) => fanpage.conversation\n    );\n    const pages = useSelector(({ fanpage }: { fanpage: IFacebookState }) => fanpage.pages);\n    const store = useSelector(({ store }: { store: IStoreState }) => store.store);\n    const token: any = useSelector(({ auth }: { auth: IAuthState }) => auth.token);\n    const page = find(pages, (page: Page) => page.fbObjectId === conversation.fbPageId);\n\n    useEffect(() => {\n        setFlag(false);\n    }, [conversation]);\n\n    const postId = conversation.postId ? conversation.postId.split('_')[1] : '';\n\n    const dispatch = useDispatch();\n\n    const handleFilterConversation = () => {\n        dispatch(removeConversations());\n        let fbPageId;\n        if (store.activePage) {\n            fbPageId = store.activePage.fbObjectId;\n        }\n        const query = store.queryConversation\n            ? `${store.queryConversation}&fbUserId=${conversation.fbUserId}`\n            : `fbUserId=${conversation.fbUserId}`;\n        dispatch(loadConversations(query, [fbPageId]));\n    };\n\n    const handleMarkAsUnread = () => {\n        if (!flag || !conversation.unread) {\n            markAsUnreadApi({\n                storeId: store._id,\n                fbPageId: conversation.fbPageId,\n                token: token.accessToken,\n                conversationId: conversation.fbObjectId,\n                read: false,\n            }).then((res: any) => {\n                dispatch(\n                    updateCountUnreadPage({\n                        fbObjectId: store.activePage.fbObjectId,\n                    })\n                );\n                dispatch(markAsUnread({ conversation, unread: true }));\n                setFlag(true);\n            });\n        }\n    };\n\n    return (\n        <div className='conversation-detail-top'>\n            <div className='left'>\n                <div className='avatar'>\n                    <Avatar\n                        alt={conversation.fbUsername}\n                        src={generateUrlImgFb(conversation.fbUserId, page.accessToken)}\n                        size={30}\n                    />\n\n                    <span className='icon'>\n                        {conversation.type === 1 ? <MessageIcon /> : <FacebookIcon />}\n                    </span>\n                </div>\n\n                <div className='info'>\n                    <div className='name'>{conversation.fbUsername}</div>\n                    <span className='date'>\n                        {moment(conversation.updatedAt).format('DD-MM-YYYY HH:mm')}\n                    </span>\n                </div>\n            </div>\n            <div className='right'>\n                <div className='action'>\n                    <span className='item'>\n                        <Tooltip placement='bottom' title='Tất cả hội thoại của khách này'>\n                            <SearchIcon onClick={handleFilterConversation} />\n                        </Tooltip>\n                    </span>\n\n                    <span className='item'>\n                        <ToggleBlockBtn />\n                    </span>\n\n                    <span className='item'>\n                        <Tooltip placement='bottom' title='Đánh dấu chưa đọc'>\n                            <EyeInvisibleOutlined onClick={handleMarkAsUnread} disabled={flag} />\n                        </Tooltip>\n                    </span>\n                </div>\n\n                {page && (\n                    <div className='avatar-fb'>\n                        <Space align='center' size={15}>\n                            <a href={page.link} target='_blank'>\n                                <Tooltip placement='bottom' title={page.name}>\n                                    <Avatar\n                                        src={generateUrlImgFb(page.fbObjectId, page.accessToken)}\n                                        alt={page.name}\n                                        size={38}\n                                    />\n                                </Tooltip>\n                            </a>\n\n                            {conversation.type === 2 && (\n                                <a href={`${page && page.link}/posts/${postId}`} target='_blank'>\n                                    <Tooltip placement='bottom' title='Xem trên facebook'>\n                                        <FacebookIcon style={{ fontSize: 25 }} />\n                                    </Tooltip>\n                                </a>\n                            )}\n                        </Space>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default ConversationDetailTop;\n"]},"metadata":{},"sourceType":"module"}