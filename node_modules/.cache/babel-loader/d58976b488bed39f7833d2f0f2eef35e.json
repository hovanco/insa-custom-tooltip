{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/settings/conversation-label/form-add-label.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Col, Input, message, Row, Tag } from 'antd';\nimport { pick } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as settingApi from '../../../api/setting';\nimport { loadLabels } from '../../../reducers/labelState/labelAction';\nimport ColorPicker from './color-picker';\nimport { useContextLabel } from './context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst convertLabel = label => {\n  return label ? pick(label, ['name', 'color', 'backgroundColor', 'order', 'status']) : {\n    name: '',\n    color: '#ffffff',\n    backgroundColor: '#4267b2',\n    order: 1,\n    status: 1\n  };\n};\n\nconst FormAddLabel = ({\n  toggle,\n  label,\n  layout = [24, 24]\n}) => {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [label_local, setLabel] = useState(convertLabel(label));\n  const dispatch = useDispatch();\n  const store = useSelector(state => state.store.store);\n  const pages = useSelector(state => state.fanpage.pages);\n  const {\n    page\n  } = useContextLabel();\n  useEffect(() => {\n    setLabel(convertLabel(label));\n  }, [label]);\n\n  const changeTitle = e => {\n    setLabel({ ...label_local,\n      name: e.target.value\n    });\n  };\n\n  const pickColorBg = backgroundColor => {\n    setLabel({ ...label_local,\n      backgroundColor\n    });\n  };\n\n  const pickColorText = color => {\n    setLabel({ ...label_local,\n      color\n    });\n  };\n\n  const pageId = pages[page].fbObjectId;\n  const storeId = store._id;\n\n  const handleAddLabel = async () => {\n    if (label && !label.name.trim() || !label_local.name.trim()) {\n      return message.error('Vui lòng nhập tên nhãn hội thoại');\n    }\n\n    setLoading(loading);\n\n    if (label) {\n      const data = { ...pick(label, ['name', 'color', 'backgroundColor', 'order', 'status']),\n        ...label_local\n      };\n      settingApi.updateLabel({\n        storeId,\n        pageId,\n        data,\n        labelId: label._id\n      }).then(() => {\n        toggle();\n        message.success('Đã cập nhật nhãn hội thoại');\n        dispatch(loadLabels(pageId));\n      }).catch(() => {\n        setLoading(false);\n        message.error('Lỗi cập nhật nhãn hội thoại');\n      });\n    } else {\n      try {\n        const data = {\n          storeId,\n          pageId,\n          data: label_local\n        };\n        await settingApi.addLabel(data);\n        toggle();\n        dispatch(loadLabels(pageId));\n        message.success('Thêm nhãn hội thoại thành công');\n      } catch (error) {\n        message.error('Lỗi thêm nhãn hội thoại');\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: layout[0],\n        className: \"tag-col\",\n        children: label_local.name.length > 0 && /*#__PURE__*/_jsxDEV(Tag, {\n          color: label_local.backgroundColor,\n          style: {\n            color: label_local.color\n          },\n          children: label_local.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: layout[1],\n        children: /*#__PURE__*/_jsxDEV(Input.Group, {\n          compact: true,\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"T\\xEAn nh\\xE3n h\\u1ED9i tho\\u1EA1i\",\n            style: {\n              width: '40%'\n            },\n            onChange: changeTitle,\n            value: label_local.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ColorPicker, {\n            label: \"Ch\\u1ECDn m\\xE0u n\\u1EC1n\",\n            pickColor: pickColorBg,\n            style: {\n              width: '30%'\n            },\n            color: label_local.backgroundColor\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ColorPicker, {\n            label: \"Ch\\u1ECDn m\\xE0u ch\\u1EEF\",\n            pickColor: pickColorText,\n            style: {\n              width: '30%'\n            },\n            color: label_local.color\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      justify: \"end\",\n      gutter: 15,\n      style: {\n        marginTop: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: toggle,\n          disabled: !page,\n          className: \"cancel-btn\",\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          onClick: handleAddLabel,\n          loading: loading,\n          children: label ? 'Cập nhật' : 'Thêm'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(FormAddLabel, \"K+OATtnuJSQT0riPJUs1oIKIzGI=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useContextLabel];\n});\n\n_c = FormAddLabel;\nexport default FormAddLabel;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormAddLabel\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/settings/conversation-label/form-add-label.tsx"],"names":["Button","Col","Input","message","Row","Tag","pick","React","useEffect","useState","useDispatch","useSelector","settingApi","loadLabels","ColorPicker","useContextLabel","convertLabel","label","name","color","backgroundColor","order","status","FormAddLabel","toggle","layout","loading","setLoading","label_local","setLabel","dispatch","store","state","pages","fanpage","page","changeTitle","e","target","value","pickColorBg","pickColorText","pageId","fbObjectId","storeId","_id","handleAddLabel","trim","error","data","updateLabel","labelId","then","success","catch","addLabel","length","width","marginTop"],"mappings":"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","sourcesContent":["import { Button, Col, Input, message, Row, Tag } from 'antd';\nimport { pick } from 'lodash';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as settingApi from '../../../api/setting';\nimport { ILabel } from '../../../collections/label';\nimport { Page } from '../../../reducers/fanpageState/fanpageReducer';\nimport { loadLabels } from '../../../reducers/labelState/labelAction';\nimport ColorPicker from './color-picker';\nimport { useContextLabel } from './context';\n\ninterface Label {\n    name: string;\n    color: string;\n    backgroundColor: string;\n    order: number;\n    status: number;\n}\n\ninterface Props {\n    toggle: () => void;\n    label?: ILabel;\n    layout?: number[];\n}\n\nconst convertLabel = (label?: ILabel) => {\n    return label\n        ? pick(label, ['name', 'color', 'backgroundColor', 'order', 'status'])\n        : {\n              name: '',\n              color: '#ffffff',\n              backgroundColor: '#4267b2',\n              order: 1,\n              status: 1,\n          };\n};\n\nconst FormAddLabel: FC<Props> = ({ toggle, label, layout = [24, 24] }) => {\n    const [loading, setLoading] = useState(false);\n    const [label_local, setLabel] = useState<Label>(convertLabel(label));\n    const dispatch = useDispatch();\n    const store = useSelector((state: any) => state.store.store);\n    const pages = useSelector((state: any) => state.fanpage.pages);\n    const { page } = useContextLabel();\n\n    useEffect(() => {\n        setLabel(convertLabel(label));\n    }, [label]);\n\n    const changeTitle = (e: any) => {\n        setLabel({ ...label_local, name: e.target.value });\n    };\n\n    const pickColorBg = (backgroundColor: string) => {\n        setLabel({ ...label_local, backgroundColor });\n    };\n\n    const pickColorText = (color: string) => {\n        setLabel({ ...label_local, color });\n    };\n\n    const pageId = (pages[page as string] as Page).fbObjectId;\n    const storeId = store._id;\n\n    const handleAddLabel = async () => {\n        if ((label && !label.name.trim()) || !label_local.name.trim()) {\n            return message.error('Vui lòng nhập tên nhãn hội thoại');\n        }\n        setLoading(loading);\n        if (label) {\n            const data = {\n                ...pick(label, ['name', 'color', 'backgroundColor', 'order', 'status']),\n                ...label_local,\n            };\n\n            settingApi\n                .updateLabel({\n                    storeId,\n                    pageId,\n                    data,\n                    labelId: label._id,\n                })\n                .then(() => {\n                    toggle();\n                    message.success('Đã cập nhật nhãn hội thoại');\n                    dispatch(loadLabels(pageId));\n                })\n                .catch(() => {\n                    setLoading(false);\n                    message.error('Lỗi cập nhật nhãn hội thoại');\n                });\n        } else {\n            try {\n                const data = {\n                    storeId,\n                    pageId,\n                    data: label_local,\n                };\n\n                await settingApi.addLabel(data);\n\n                toggle();\n                dispatch(loadLabels(pageId));\n\n                message.success('Thêm nhãn hội thoại thành công');\n            } catch (error) {\n                message.error('Lỗi thêm nhãn hội thoại');\n            }\n        }\n    };\n\n    return (\n        <>\n            <Row>\n                <Col span={layout[0]} className='tag-col'>\n                    {label_local.name.length > 0 && (\n                        <Tag\n                            color={label_local.backgroundColor}\n                            style={{ color: label_local.color }}\n                        >\n                            {label_local.name}\n                        </Tag>\n                    )}\n                </Col>\n\n                <Col span={layout[1]}>\n                    <Input.Group compact>\n                        <Input\n                            placeholder='Tên nhãn hội thoại'\n                            style={{ width: '40%' }}\n                            onChange={changeTitle}\n                            value={label_local.name}\n                        />\n\n                        <ColorPicker\n                            label='Chọn màu nền'\n                            pickColor={pickColorBg}\n                            style={{ width: '30%' }}\n                            color={label_local.backgroundColor}\n                        />\n\n                        <ColorPicker\n                            label='Chọn màu chữ'\n                            pickColor={pickColorText}\n                            style={{ width: '30%' }}\n                            color={label_local.color}\n                        />\n                    </Input.Group>\n                </Col>\n            </Row>\n\n            <Row justify='end' gutter={15} style={{ marginTop: 30 }}>\n                <Col>\n                    <Button onClick={toggle} disabled={!page} className='cancel-btn'>\n                        Hủy\n                    </Button>\n                </Col>\n                <Col>\n                    <Button type='primary' onClick={handleAddLabel} loading={loading}>\n                        {label ? 'Cập nhật' : 'Thêm'}\n                    </Button>\n                </Col>\n            </Row>\n        </>\n    );\n};\n\nexport default FormAddLabel;\n"]},"metadata":{},"sourceType":"module"}