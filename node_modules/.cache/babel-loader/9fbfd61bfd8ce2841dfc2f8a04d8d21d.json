{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/order-detail/form-update-order.tsx\",\n    _s = $RefreshSig$();\n\nimport { ExclamationCircleOutlined, SaveOutlined } from '@ant-design/icons';\nimport { Button, Card, Col, Divider, Form, Input, InputNumber, message, Modal, Row, Tag, Select } from 'antd';\nimport { get, isNull, pick, omit, isEqual } from 'lodash';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateOrder } from '../../api/order-api';\nimport shippingApi from '../../api/shipping-api';\nimport ChangeStatus from '../orders/change-status';\nimport { statusDelivery } from '../orders/data';\nimport AddProduct from './add-product';\nimport { useOrderDetail } from './context';\nimport CreateShipOrder from './create-ship-order';\nimport Discount from './discount';\nimport NoteForDelivery from './note-for-delivery';\nimport OrderAddress from './order-address';\nimport SelectOptionDelivery from './select-option-delivery';\nimport ShippingList from './shipping-list';\nimport TableOrderList from './table-order-list';\nimport TotalOrder from './total-order';\nimport { ships } from './var';\nimport { formatterInput, parserInput } from '../../utils/format-money';\nimport { validatePhone } from '../../utils/validate-phone';\nimport { fetchWarehouses } from '../../reducers/warehouseState/warehouseAction';\nimport { getFee } from '../conversation/conversation-customer/util';\nimport './form-update-order.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const formItemLayout = {\n  labelCol: {\n    span: 7\n  },\n  wrapperCol: {\n    span: 17\n  }\n};\nconst formItemLayout1 = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nconst LIMIT = 20;\nexport const style = {\n  marginBottom: 5\n};\n\nconst FormUpdateOrder = props => {\n  _s();\n\n  const [isEdit, setIsEdit] = useState(false);\n  const [isEditShip, setIsEditShip] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [disabledUpdate, setDisabledUpdate] = useState(false);\n  const [loading_create_ship, setLoadingCreateShip] = useState(false);\n  const {\n    order,\n    changeOrder\n  } = useOrderDetail();\n  const [order_local, setOrderLocal] = useState(order);\n  const token = useSelector(state => state.auth.token);\n  const store = useSelector(state => state.store.store);\n  const [formOrderDetail] = Form.useForm();\n\n  const updateIsEdit = bool => {\n    setIsEdit(bool);\n  };\n\n  const handleUpdateOrder = order_res => {\n    setOrderLocal(order_res);\n    updateIsEdit(true);\n  };\n\n  const changeAddress = order_res => {\n    setIsEditShip(true);\n    handleUpdateOrder(order_res);\n  };\n\n  const onChangeDeliveryOptions = e => {\n    const deliveryOptions = { ...order_local.deliveryOptions,\n      [e.target.name]: e.target.value\n    };\n    handleUpdateOrder({ ...order_local,\n      deliveryOptions\n    });\n  };\n\n  const handleRemoveProduct = productId => {\n    const newProducts = order_local.products.filter(product => product.productId._id !== productId);\n    const newOrder = { ...order_local,\n      products: newProducts\n    };\n    handleUpdateOrder(newOrder);\n    changeOrder(newOrder);\n    updateIsEdit(true);\n    setIsEditShip(true);\n  };\n\n  const changeCustomer = e => {\n    handleUpdateOrder({ ...order_local,\n      customer: { ...order_local.customer,\n        [e.target.name]: e.target.value\n      }\n    });\n  };\n\n  const updateProduct = products => {\n    handleUpdateOrder({ ...order_local,\n      products\n    });\n    setIsEditShip(true);\n  };\n\n  const changeDiscount = ({\n    discount,\n    discountBy\n  }) => {\n    const deliveryOptions = { ...order_local.deliveryOptions,\n      discount,\n      discountBy\n    };\n    handleUpdateOrder({ ...order_local,\n      deliveryOptions\n    });\n  };\n\n  const changeShipmentFee = shipmentFee => {\n    const deliveryOptions = { ...order_local.deliveryOptions,\n      shipmentFee\n    };\n    handleUpdateOrder({ ...order_local,\n      deliveryOptions\n    });\n  };\n\n  const changeShipmentFeeForCustomer = shipmentFeeForCustomer => {\n    const deliveryOptions = { ...order_local.deliveryOptions,\n      shipmentFeeForCustomer\n    };\n    handleUpdateOrder({ ...order_local,\n      deliveryOptions\n    });\n  };\n\n  const changeNoteForDelivery = noteForDelivery => {\n    const newOrder = { ...order_local,\n      deliveryOptions: { ...order_local.deliveryOptions,\n        noteForDelivery\n      }\n    };\n    handleUpdateOrder(newOrder);\n  };\n\n  const [warehouseId, setWarehouseId] = useState(order_local ? order_local.warehouseId && order_local.warehouseId._id : undefined);\n  const [dataWarehouse, setDataWarehouse] = useState([]);\n  const warehouses = useSelector(({\n    warehouse\n  }) => warehouse.warehouses.data);\n  const total = useSelector(({\n    warehouse\n  }) => warehouse.warehouses.total);\n  const [page, setPage] = useState(1);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(fetchWarehouses({\n      page: 1,\n      limit: LIMIT\n    }));\n    setDataWarehouse(warehouses);\n  }, []);\n  useEffect(() => {\n    if (warehouses) {\n      page === 1 ? setDataWarehouse(warehouses) : setDataWarehouse(dataWarehouse.concat(warehouses));\n    }\n  }, [warehouses]);\n\n  const handleSelectWarehouse = warehouseId => {\n    setWarehouseId(warehouseId);\n    const data = dataWarehouse.find(w => w._id === warehouseId);\n    const newOrder = { ...order_local,\n      warehouseId: data\n    };\n    handleUpdateOrder(newOrder);\n  };\n\n  const handleScroll = e => {\n    const maxPage = Math.ceil(total / LIMIT);\n    const element = e.target;\n\n    if (element.scrollHeight === element.clientHeight + element.scrollTop && page + 1 <= maxPage) {\n      setPage(page + 1);\n      dispatch(fetchWarehouses({\n        page: page + 1,\n        limit: LIMIT\n      }));\n    }\n  };\n\n  const saveOrder = async ({\n    showMessage = true\n  }) => {\n    setLoading(true);\n    const products = order_local.products.map(p => {\n      return {\n        count: p.count,\n        productId: p.productId._id,\n        price: p.price\n      };\n    });\n    const {\n      feeForReceiver\n    } = getFee(order_local);\n\n    try {\n      const deliveryOptions = { ...pick(order_local.deliveryOptions, ['discount', 'discountBy', 'serviceId', 'shipmentFee', 'shipmentFeeByTotal', 'shipmentFeeForCustomer', 'transportType', 'customerNote', 'noteForCustomerCare', 'noteForDelivery']),\n        feeForReceiver,\n        shipmentOrderId: order_local.deliveryOptions.shipmentOrderId ? order_local.deliveryOptions.shipmentOrderId : undefined\n      };\n      let data = {\n        customer: omit(order_local.customer, ['_id', 'fbUserId', 'provinceName', 'districtName', 'wardName']),\n        deliveryOptions,\n        products,\n        warehouseId: order_local.warehouseId._id\n      };\n\n      if (order_local.isDraft) {\n        data.isDraft = false;\n      }\n\n      const response = await updateOrder({\n        token: token.accessToken,\n        storeId: store._id,\n        orderId: order_local._id,\n        data\n      });\n\n      if (showMessage) {\n        message.success('Đã cập nhật đơn hàng');\n      }\n\n      if (isEdit) {\n        setIsEdit(false);\n      }\n\n      setLoading(false);\n      return response;\n    } catch (error) {\n      message.error('Lỗi cập nhật đơn hàng');\n      setLoading(false);\n      return undefined;\n    }\n  };\n\n  const handleToggleOrderShip = async () => {\n    setLoadingCreateShip(true);\n    const cancel = order_local.deliveryOptions.shipmentOrderId;\n    const message_text = {\n      success: `Đã ${cancel ? 'hủy' : 'tạo'} đơn hàng`,\n      error: `Lỗi  ${cancel ? 'hủy' : 'tạo'} đơn hàng`\n    };\n\n    try {\n      const response = await shippingApi.toggleCreateOrderShip({\n        token: token.accessToken,\n        storeId: store._id,\n        orderId: order_local._id,\n        cancel,\n        warehouseId: order_local.warehouseId._id\n      });\n      setOrderLocal({ ...order_local,\n        status: response.status,\n        deliveryOptions: { ...response.deliveryOptions\n        }\n      });\n      setLoadingCreateShip(false);\n      message.success(message_text.success);\n    } catch (error) {\n      setLoadingCreateShip(false);\n      message.error(message_text.error);\n    }\n  };\n\n  const handleAddProduct = data => {\n    handleUpdateOrder(data);\n    setIsEditShip(true);\n  };\n\n  const handleChangeShip = data => {\n    if (!isEqual(order_local.deliveryOptions, data.deliveryOptions)) {\n      handleUpdateOrder(data);\n    }\n  };\n\n  const createOrderShip = () => {\n    const totalWeight = order_local.products.reduce((value, o) => o.productId.weight * o.count + value, 0);\n    let minWeight = order_local.deliveryOptions.serviceId == 1 ? 10 : 1;\n    let maxWeight = order_local.deliveryOptions.serviceId == 1 ? 20000 : 1600000;\n\n    if (totalWeight < minWeight) {\n      message.error(`Tổng khối lượng của sản phẩm chưa đạt mức tối thiểu ${minWeight}g`);\n      return;\n    } else if (totalWeight > maxWeight) {\n      message.error(`Tổng khối lượng của sản phẩm vượt mức tối đa ${maxWeight / 1000}kg`);\n      return;\n    }\n\n    if (isEdit) {\n      Modal.confirm({\n        title: 'Đơn hàng chưa cập nhật',\n        icon: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 23\n        }, this),\n        content: 'Bạn muốn tạo đơn vận chuyển với những cập nhật mới',\n        okText: 'Tạo đơn',\n        cancelText: 'Thoát',\n        onOk: () => {\n          saveOrder({\n            showMessage: false\n          }).then(() => {\n            handleToggleOrderShip();\n          });\n        }\n      });\n    } else {\n      handleToggleOrderShip();\n    }\n  };\n\n  const cancelDelivery = () => {\n    Modal.confirm({\n      title: 'Hủy đơn vận chuyển',\n      icon: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 19\n      }, this),\n      content: 'Bạn muốn hủy đơn vận chuyển',\n      okText: 'Hủy đơn',\n      cancelText: 'Thoát',\n      onOk: handleToggleOrderShip\n    });\n  };\n\n  const renderShipLabel = () => {\n    const {\n      deliveryOptions\n    } = order_local;\n\n    if (deliveryOptions.serviceId === 1) {\n      return /*#__PURE__*/_jsxDEV(Tag, {\n        title: ships[1].label,\n        style: {\n          background: ships[1].color,\n          borderColor: ships[1].color,\n          color: '#fff'\n        },\n        children: ships[1].label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (deliveryOptions.serviceId === 2) {\n      return /*#__PURE__*/_jsxDEV(Tag, {\n        title: ships[2].label,\n        style: {\n          background: ships[2].color,\n          borderColor: ships[2].color,\n          color: '#fff'\n        },\n        children: ships[2].label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Tag, {\n      children: \"TVC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 16\n    }, this);\n  };\n\n  const renderButtonCreateOrderShip = () => {\n    const serviceId = get(order_local, 'deliveryOptions.serviceId');\n    const shipmentOrderId = get(order_local, 'deliveryOptions.shipmentOrderId');\n    if (isNull(serviceId) || typeof serviceId === 'undefined' || serviceId === 0) return null;\n    if (order_local.status === 4) return null;\n    return /*#__PURE__*/_jsxDEV(CreateShipOrder, {\n      shipmentOrderId: shipmentOrderId,\n      createOrderShip: createOrderShip,\n      loading: loading_create_ship,\n      disabled: !order_local.deliveryOptions.noteForDelivery || !order_local.deliveryOptions.serviceId || disabledData || isEditShip\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderStatusDelivery = () => {\n    const transportStatus = get(order_local, 'deliveryOptions.transportStatus');\n\n    if (transportStatus) {\n      const status = statusDelivery[transportStatus];\n      if (!status) return;\n      return /*#__PURE__*/_jsxDEV(Tag, {\n        color: \"#87d068\",\n        style: {\n          marginLeft: 5\n        },\n        children: status.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 17\n      }, this);\n    }\n\n    return;\n  };\n\n  const renderOrderDeliveryCancel = () => {\n    const shipmentOrderId = get(order_local, 'deliveryOptions.shipmentOrderId');\n    if (shipmentOrderId) return /*#__PURE__*/_jsxDEV(Tag, {\n      color: \"#f50\",\n      style: {\n        marginLeft: 5,\n        cursor: 'pointer'\n      },\n      onClick: cancelDelivery,\n      children: \"H\\u1EE7y \\u0111\\u01A1n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 17\n    }, this);\n    return null;\n  };\n\n  const disabled = !!order_local.deliveryOptions.shipmentOrderId;\n  const disabledData = !order_local.customer.name || !order_local.customer.phoneNo || !order_local.customer.address || !order_local.customer.province || !order_local.customer.district || !order_local.customer.ward || order_local.products.length === 0;\n  useEffect(() => {\n    const optionDelivery = get(order_local, 'deliveryOptions.serviceId');\n\n    if (optionDelivery !== 0) {\n      setDisabledUpdate(disabled || disabledData || !order_local.deliveryOptions.noteForDelivery || !order_local.deliveryOptions.serviceId);\n    } else {\n      setDisabledUpdate(disabled || disabledData);\n    }\n  }, [order_local]);\n  return /*#__PURE__*/_jsxDEV(Form, {\n    form: formOrderDetail,\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      gutter: 30,\n      style: {\n        padding: '0 15px 15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 16,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          type: \"inner\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            gutter: 30,\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              span: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"title\",\n                children: \"Kh\\xE1ch h\\xE0ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                label: \"T\\xEAn\",\n                ...formItemLayout,\n                style: style,\n                rules: [{\n                  required: true,\n                  message: 'Điền tên khách hàng'\n                }],\n                initialValue: order_local.customer.name,\n                name: \"name\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  placeholder: \"\\u0110i\\u1EC1n t\\xEAn kh\\xE1ch h\\xE0ng\",\n                  value: order_local.customer.name,\n                  name: \"name\",\n                  onChange: changeCustomer,\n                  disabled: disabled\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 510,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                label: \"S\\u1ED1 \\u0110T\",\n                ...formItemLayout,\n                style: style,\n                name: \"phoneNo\",\n                rules: [{\n                  required: true,\n                  message: 'Điền số điện thoại'\n                }, {\n                  validator: validatePhone\n                }],\n                initialValue: order_local.customer.phoneNo,\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  placeholder: \"\\u0110i\\u1EC1n s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i KH\",\n                  value: order_local.customer.phoneNo,\n                  name: \"phoneNo\",\n                  onChange: changeCustomer,\n                  disabled: disabled\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 531,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(OrderAddress, {\n                changeAddress: changeAddress,\n                order: order_local,\n                disabled: disabled\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                label: \"\\u0110\\u1ECBa ch\\u1EC9\",\n                ...formItemLayout,\n                style: style,\n                rules: [{\n                  required: true,\n                  message: 'Điền địa chỉ'\n                }],\n                name: \"address\",\n                initialValue: order_local.customer.address,\n                children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n                  name: \"address\",\n                  value: order_local.customer.address,\n                  onChange: changeCustomer,\n                  disabled: disabled\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                label: \"Ghi ch\\xFA KH\",\n                ...formItemLayout,\n                style: style,\n                children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n                  name: \"customerNote\",\n                  onChange: onChangeDeliveryOptions,\n                  value: order_local.deliveryOptions.customerNote,\n                  disabled: disabled\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                label: \"Ghi ch\\xFA CSKH\",\n                ...formItemLayout,\n                style: style,\n                children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n                  name: \"noteForCustomerCare\",\n                  onChange: onChangeDeliveryOptions,\n                  value: order_local.deliveryOptions.noteForCustomerCare,\n                  disabled: disabled\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"title\",\n                children: \"Giao h\\xE0ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                style: {\n                  marginBottom: 10\n                },\n                children: /*#__PURE__*/_jsxDEV(SelectOptionDelivery, {\n                  order: order_local,\n                  disabled: disabled,\n                  changeTypeDelivery: handleUpdateOrder\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                dashed: true,\n                style: {\n                  margin: '10px 0'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 33\n              }, this), order_local.deliveryOptions.serviceId !== 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n                  style: {\n                    marginBottom: 10\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    justify: \"space-between\",\n                    align: \"middle\",\n                    children: [/*#__PURE__*/_jsxDEV(Col, {\n                      children: \"H\\xE3ng v\\u1EADn chuy\\u1EC3n\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 597,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      children: renderButtonCreateOrderShip()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 598,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 596,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 595,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(ShippingList, {\n                  disabled: disabled,\n                  order: order_local,\n                  changeShip: handleChangeShip,\n                  edit: isEditShip,\n                  updateIsEditShip: () => setIsEditShip(false)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 601,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                  dashed: true,\n                  style: {\n                    margin: '15px 0'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                  label: \"Ghi ch\\xFA\",\n                  ...formItemLayout1,\n                  style: style,\n                  rules: [{\n                    required: true,\n                    message: 'Chọn ghi chú vận chuyển'\n                  }],\n                  name: \"noteForDelivery\",\n                  initialValue: get(order_local, 'deliveryOptions.noteForDelivery'),\n                  children: /*#__PURE__*/_jsxDEV(NoteForDelivery, {\n                    noteForDelivery: get(order_local, 'deliveryOptions.noteForDelivery'),\n                    changeNoteForDelivery: changeNoteForDelivery,\n                    disabled: disabled\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 625,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true), /*#__PURE__*/_jsxDEV(Form.Item, {\n                label: \"\\u0110\\u1ECBa ch\\u1EC9 l\\u1EA5y h\\xE0ng\",\n                ...formItemLayout1,\n                style: style,\n                rules: [{\n                  required: true,\n                  message: 'Chọn địa chỉ lấy hàng'\n                }],\n                name: \"warehouseId\",\n                initialValue: warehouseId,\n                children: /*#__PURE__*/_jsxDEV(Select, {\n                  onPopupScroll: handleScroll,\n                  onChange: handleSelectWarehouse,\n                  value: warehouseId,\n                  placeholder: \"Ch\\u1ECDn \\u0111\\u1ECBa ch\\u1EC9 l\\u1EA5y h\\xE0ng\",\n                  style: {\n                    width: '100%'\n                  },\n                  disabled: disabled,\n                  children: dataWarehouse.map(warehouse => /*#__PURE__*/_jsxDEV(Select.Option, {\n                    value: warehouse._id,\n                    children: warehouse.name\n                  }, warehouse._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 687,\n                    columnNumber: 45\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 24,\n              children: /*#__PURE__*/_jsxDEV(Divider, {\n                dashed: true,\n                style: {\n                  margin: '10px 0'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 699,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 24,\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                align: \"middle\",\n                justify: \"space-between\",\n                style: {\n                  marginTop: 20,\n                  marginBottom: 15\n                },\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"title\",\n                    style: {\n                      margin: 0\n                    },\n                    children: \"S\\u1EA3n ph\\u1EA9m\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 712,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: !disabled && /*#__PURE__*/_jsxDEV(AddProduct, {\n                    order: order_local,\n                    changeProduct: handleAddProduct\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 719,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 717,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 703,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                style: style,\n                children: /*#__PURE__*/_jsxDEV(TableOrderList, {\n                  products: order_local.products,\n                  removeProduct: handleRemoveProduct,\n                  updateProduct: updateProduct,\n                  disabled: disabled\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 728,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 24,\n              children: /*#__PURE__*/_jsxDEV(Divider, {\n                dashed: true,\n                style: {\n                  margin: '10px 0'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 738,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          type: \"inner\",\n          style: {\n            marginBottom: 15\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title\",\n            children: \"Tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"\\u0110\\u01A1n h\\xE0ng\",\n            ...formItemLayout1,\n            style: style,\n            children: /*#__PURE__*/_jsxDEV(ChangeStatus, {\n              status: order_local.status,\n              orderId: order_local._id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 748,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 25\n          }, this), order_local.code && /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"M\\xE3 \\u0110\\u01A1n h\\xE0ng\",\n            ...formItemLayout1,\n            style: style,\n            children: /*#__PURE__*/_jsxDEV(Tag, {\n              style: {\n                wordBreak: 'break-all'\n              },\n              children: order_local.code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 752,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 751,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"V\\u1EADn chuy\\u1EC3n\",\n            ...formItemLayout1,\n            style: style,\n            children: [renderShipLabel(), renderStatusDelivery()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 25\n          }, this), order_local.deliveryOptions && order_local.deliveryOptions.shipmentOrderId && /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"M\\xE3 v\\u1EADn \\u0111\\u01A1n\",\n            ...formItemLayout1,\n            style: style,\n            children: /*#__PURE__*/_jsxDEV(Tag, {\n              style: {\n                wordBreak: 'break-all'\n              },\n              children: order_local.deliveryOptions.shipmentOrderId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 763,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 762,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          type: \"inner\",\n          style: {\n            marginBottom: 15\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title\",\n            children: \"Thanh to\\xE1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 771,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"Chi\\u1EBFt kh\\u1EA5u\",\n            ...formItemLayout1,\n            style: style,\n            children: /*#__PURE__*/_jsxDEV(Discount, {\n              discount: order_local.deliveryOptions.discount,\n              discountBy: order_local.deliveryOptions.discountBy,\n              changeDiscount: changeDiscount,\n              disabled: disabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"Ph\\xED v\\u1EADn chuy\\u1EC3n\",\n            ...formItemLayout1,\n            style: style,\n            children: /*#__PURE__*/_jsxDEV(InputNumber, {\n              min: 0,\n              style: {\n                width: '100%'\n              },\n              value: order_local.deliveryOptions.shipmentFee,\n              onChange: changeShipmentFee,\n              disabled: true,\n              formatter: formatterInput,\n              parser: parserInput\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 783,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 782,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"Ph\\xED b\\xE1o kh\\xE1ch\",\n            ...formItemLayout1,\n            style: style,\n            children: /*#__PURE__*/_jsxDEV(InputNumber, {\n              style: {\n                width: '100%'\n              },\n              min: 0,\n              value: order_local.deliveryOptions.shipmentFeeForCustomer,\n              onChange: changeShipmentFeeForCustomer,\n              formatter: formatterInput,\n              parser: parserInput,\n              disabled: disabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 795,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 794,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 770,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TotalOrder, {\n          order: order_local\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 807,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 15\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            icon: /*#__PURE__*/_jsxDEV(SaveOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 812,\n              columnNumber: 35\n            }, this),\n            onClick: () => saveOrder({\n              showMessage: true\n            }),\n            loading: loading,\n            disabled: disabledUpdate,\n            children: \"C\\u1EADp nh\\u1EADt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 810,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 809,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 495,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FormUpdateOrder, \"P6H+ew6mOzJo6rtLd1bGXF+Nuq8=\", false, function () {\n  return [useOrderDetail, useSelector, useSelector, Form.useForm, useSelector, useSelector, useDispatch];\n});\n\n_c = FormUpdateOrder;\nexport default FormUpdateOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormUpdateOrder\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/order-detail/form-update-order.tsx"],"names":["ExclamationCircleOutlined","SaveOutlined","Button","Card","Col","Divider","Form","Input","InputNumber","message","Modal","Row","Tag","Select","get","isNull","pick","omit","isEqual","React","useState","useEffect","useSelector","useDispatch","updateOrder","shippingApi","ChangeStatus","statusDelivery","AddProduct","useOrderDetail","CreateShipOrder","Discount","NoteForDelivery","OrderAddress","SelectOptionDelivery","ShippingList","TableOrderList","TotalOrder","ships","formatterInput","parserInput","validatePhone","fetchWarehouses","getFee","formItemLayout","labelCol","span","wrapperCol","formItemLayout1","LIMIT","style","marginBottom","FormUpdateOrder","props","isEdit","setIsEdit","isEditShip","setIsEditShip","loading","setLoading","disabledUpdate","setDisabledUpdate","loading_create_ship","setLoadingCreateShip","order","changeOrder","order_local","setOrderLocal","token","state","auth","store","formOrderDetail","useForm","updateIsEdit","bool","handleUpdateOrder","order_res","changeAddress","onChangeDeliveryOptions","e","deliveryOptions","target","name","value","handleRemoveProduct","productId","newProducts","products","filter","product","_id","newOrder","changeCustomer","customer","updateProduct","changeDiscount","discount","discountBy","changeShipmentFee","shipmentFee","changeShipmentFeeForCustomer","shipmentFeeForCustomer","changeNoteForDelivery","noteForDelivery","warehouseId","setWarehouseId","undefined","dataWarehouse","setDataWarehouse","warehouses","warehouse","data","total","page","setPage","dispatch","limit","concat","handleSelectWarehouse","find","w","handleScroll","maxPage","Math","ceil","element","scrollHeight","clientHeight","scrollTop","saveOrder","showMessage","map","p","count","price","feeForReceiver","shipmentOrderId","isDraft","response","accessToken","storeId","orderId","success","error","handleToggleOrderShip","cancel","message_text","toggleCreateOrderShip","status","handleAddProduct","handleChangeShip","createOrderShip","totalWeight","reduce","o","weight","minWeight","serviceId","maxWeight","confirm","title","icon","content","okText","cancelText","onOk","then","cancelDelivery","renderShipLabel","label","background","color","borderColor","renderButtonCreateOrderShip","disabledData","renderStatusDelivery","transportStatus","marginLeft","renderOrderDeliveryCancel","cursor","disabled","phoneNo","address","province","district","ward","length","optionDelivery","padding","required","validator","customerNote","noteForCustomerCare","margin","width","marginTop","code","wordBreak"],"mappings":"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","sourcesContent":["import { ExclamationCircleOutlined, SaveOutlined } from '@ant-design/icons';\nimport {\n    Button,\n    Card,\n    Col,\n    Divider,\n    Form,\n    Input,\n    InputNumber,\n    message,\n    Modal,\n    Row,\n    Tag,\n    Select,\n} from 'antd';\nimport { get, isNull, pick, omit, isEqual } from 'lodash';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateOrder } from '../../api/order-api';\nimport shippingApi from '../../api/shipping-api';\nimport ChangeStatus from '../orders/change-status';\nimport { statusDelivery } from '../orders/data';\nimport AddProduct from './add-product';\nimport { useOrderDetail } from './context';\nimport CreateShipOrder from './create-ship-order';\nimport Discount from './discount';\nimport NoteForDelivery from './note-for-delivery';\nimport OrderAddress from './order-address';\nimport SelectOptionDelivery from './select-option-delivery';\nimport ShippingList from './shipping-list';\nimport TableOrderList from './table-order-list';\nimport TotalOrder from './total-order';\nimport { ships } from './var';\nimport { formatterInput, parserInput } from '../../utils/format-money';\nimport { validatePhone } from '../../utils/validate-phone';\nimport { fetchWarehouses } from '../../reducers/warehouseState/warehouseAction';\nimport { getFee } from '../conversation/conversation-customer/util';\nimport './form-update-order.less';\n\ninterface Props {}\n\nexport const formItemLayout = {\n    labelCol: { span: 7 },\n    wrapperCol: { span: 17 },\n};\nconst formItemLayout1 = {\n    labelCol: { span: 8 },\n    wrapperCol: { span: 16 },\n};\nconst LIMIT = 20;\n\nexport const style = { marginBottom: 5 };\n\nconst FormUpdateOrder = (props: Props): JSX.Element => {\n    const [isEdit, setIsEdit] = useState(false);\n    const [isEditShip, setIsEditShip] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [disabledUpdate, setDisabledUpdate] = useState(false);\n    const [loading_create_ship, setLoadingCreateShip] = useState(false);\n    const { order, changeOrder } = useOrderDetail();\n    const [order_local, setOrderLocal] = useState<any>(order);\n    const token = useSelector((state: any) => state.auth.token);\n    const store = useSelector((state: any) => state.store.store);\n    const [formOrderDetail] = Form.useForm();\n\n    const updateIsEdit = (bool: boolean) => {\n        setIsEdit(bool);\n    };\n\n    const handleUpdateOrder = (order_res: any) => {\n        setOrderLocal(order_res);\n        updateIsEdit(true);\n    };\n\n    const changeAddress = (order_res: any) => {\n        setIsEditShip(true);\n        handleUpdateOrder(order_res);\n    };\n\n    const onChangeDeliveryOptions = (e: any) => {\n        const deliveryOptions = {\n            ...order_local.deliveryOptions,\n            [e.target.name]: e.target.value,\n        };\n\n        handleUpdateOrder({\n            ...order_local,\n            deliveryOptions,\n        });\n    };\n\n    const handleRemoveProduct = (productId: any) => {\n        const newProducts = order_local.products.filter(\n            (product: any) => product.productId._id !== productId\n        );\n        const newOrder = { ...order_local, products: newProducts };\n        handleUpdateOrder(newOrder);\n        changeOrder(newOrder);\n        updateIsEdit(true);\n        setIsEditShip(true);\n    };\n\n    const changeCustomer = (e: any) => {\n        handleUpdateOrder({\n            ...order_local,\n            customer: {\n                ...order_local.customer,\n                [e.target.name]: e.target.value,\n            },\n        });\n    };\n\n    const updateProduct = (products: any) => {\n        handleUpdateOrder({\n            ...order_local,\n            products,\n        });\n        setIsEditShip(true);\n    };\n\n    const changeDiscount = ({ discount, discountBy }: { discount: number; discountBy: number }) => {\n        const deliveryOptions = {\n            ...order_local.deliveryOptions,\n            discount,\n            discountBy,\n        };\n        handleUpdateOrder({\n            ...order_local,\n            deliveryOptions,\n        });\n    };\n\n    const changeShipmentFee = (shipmentFee: any) => {\n        const deliveryOptions = {\n            ...order_local.deliveryOptions,\n            shipmentFee,\n        };\n        handleUpdateOrder({\n            ...order_local,\n            deliveryOptions,\n        });\n    };\n\n    const changeShipmentFeeForCustomer = (shipmentFeeForCustomer: any) => {\n        const deliveryOptions = {\n            ...order_local.deliveryOptions,\n            shipmentFeeForCustomer,\n        };\n        handleUpdateOrder({\n            ...order_local,\n            deliveryOptions,\n        });\n    };\n\n    const changeNoteForDelivery = (noteForDelivery: string) => {\n        const newOrder = {\n            ...order_local,\n            deliveryOptions: {\n                ...order_local.deliveryOptions,\n                noteForDelivery,\n            },\n        };\n        handleUpdateOrder(newOrder);\n    };\n\n    const [warehouseId, setWarehouseId] = useState<string | undefined>(\n        order_local\n            ? (order_local as any).warehouseId && (order_local as any).warehouseId._id\n            : undefined\n    );\n    const [dataWarehouse, setDataWarehouse] = useState<any[]>([]);\n    const warehouses = useSelector(\n        ({ warehouse }: { warehouse: any }) => warehouse.warehouses.data\n    );\n    const total = useSelector(({ warehouse }: { warehouse: any }) => warehouse.warehouses.total);\n    const [page, setPage] = useState(1);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(fetchWarehouses({ page: 1, limit: LIMIT }));\n        setDataWarehouse(warehouses);\n    }, []);\n\n    useEffect(() => {\n        if (warehouses) {\n            page === 1\n                ? setDataWarehouse(warehouses)\n                : setDataWarehouse(dataWarehouse.concat(warehouses));\n        }\n    }, [warehouses]);\n\n    const handleSelectWarehouse = (warehouseId: string) => {\n        setWarehouseId(warehouseId);\n        const data = dataWarehouse.find((w: any) => w._id === warehouseId);\n        const newOrder = {\n            ...(order_local as any),\n            warehouseId: data,\n        };\n        handleUpdateOrder(newOrder);\n    };\n\n    const handleScroll = (e: any) => {\n        const maxPage = Math.ceil(total / LIMIT);\n        const element = e.target;\n        if (\n            element.scrollHeight === element.clientHeight + element.scrollTop &&\n            page + 1 <= maxPage\n        ) {\n            setPage(page + 1);\n            dispatch(fetchWarehouses({ page: page + 1, limit: LIMIT }));\n        }\n    };\n\n    const saveOrder = async ({ showMessage = true }: { showMessage?: boolean }) => {\n        setLoading(true);\n        const products = order_local.products.map((p: any) => {\n            return {\n                count: p.count,\n                productId: p.productId._id,\n                price: p.price,\n            };\n        });\n        const { feeForReceiver } = getFee(order_local);\n\n        try {\n            const deliveryOptions = {\n                ...pick(order_local.deliveryOptions, [\n                    'discount',\n                    'discountBy',\n                    'serviceId',\n                    'shipmentFee',\n                    'shipmentFeeByTotal',\n                    'shipmentFeeForCustomer',\n                    'transportType',\n                    'customerNote',\n                    'noteForCustomerCare',\n                    'noteForDelivery',\n                ]),\n                feeForReceiver,\n                shipmentOrderId: order_local.deliveryOptions.shipmentOrderId\n                    ? order_local.deliveryOptions.shipmentOrderId\n                    : undefined,\n            };\n\n            let data: any = {\n                customer: omit(order_local.customer, [\n                    '_id',\n                    'fbUserId',\n                    'provinceName',\n                    'districtName',\n                    'wardName',\n                ]),\n                deliveryOptions,\n                products,\n                warehouseId: order_local.warehouseId._id,\n            };\n\n            if (order_local.isDraft) {\n                data.isDraft = false;\n            }\n\n            const response = await updateOrder({\n                token: token.accessToken,\n                storeId: store._id,\n                orderId: order_local._id,\n                data,\n            });\n\n            if (showMessage) {\n                message.success('Đã cập nhật đơn hàng');\n            }\n            if (isEdit) {\n                setIsEdit(false);\n            }\n\n            setLoading(false);\n\n            return response;\n        } catch (error) {\n            message.error('Lỗi cập nhật đơn hàng');\n            setLoading(false);\n\n            return undefined;\n        }\n    };\n\n    const handleToggleOrderShip = async () => {\n        setLoadingCreateShip(true);\n        const cancel = order_local.deliveryOptions.shipmentOrderId;\n\n        const message_text = {\n            success: `Đã ${cancel ? 'hủy' : 'tạo'} đơn hàng`,\n            error: `Lỗi  ${cancel ? 'hủy' : 'tạo'} đơn hàng`,\n        };\n\n        try {\n            const response = await shippingApi.toggleCreateOrderShip({\n                token: token.accessToken,\n                storeId: store._id,\n                orderId: order_local._id,\n                cancel,\n                warehouseId: order_local.warehouseId._id,\n            });\n\n            setOrderLocal({\n                ...order_local,\n                status: response.status,\n                deliveryOptions: {\n                    ...response.deliveryOptions,\n                },\n            });\n            setLoadingCreateShip(false);\n            message.success(message_text.success);\n        } catch (error) {\n            setLoadingCreateShip(false);\n            message.error(message_text.error);\n        }\n    };\n\n    const handleAddProduct = (data: any) => {\n        handleUpdateOrder(data);\n        setIsEditShip(true);\n    };\n\n    const handleChangeShip = (data: any) => {\n        if (!isEqual(order_local.deliveryOptions, data.deliveryOptions)) {\n            handleUpdateOrder(data);\n        }\n    };\n\n    const createOrderShip = () => {\n        const totalWeight = order_local.products.reduce(\n            (value: number, o: any) => o.productId.weight * o.count + value,\n            0\n        );\n\n        let minWeight = order_local.deliveryOptions.serviceId == 1 ? 10 : 1;\n        let maxWeight = order_local.deliveryOptions.serviceId == 1 ? 20000 : 1600000;\n\n        if (totalWeight < minWeight) {\n            message.error(`Tổng khối lượng của sản phẩm chưa đạt mức tối thiểu ${minWeight}g`);\n            return;\n        } else if (totalWeight > maxWeight) {\n            message.error(`Tổng khối lượng của sản phẩm vượt mức tối đa ${maxWeight / 1000}kg`);\n            return;\n        }\n\n        if (isEdit) {\n            Modal.confirm({\n                title: 'Đơn hàng chưa cập nhật',\n                icon: <ExclamationCircleOutlined />,\n                content: 'Bạn muốn tạo đơn vận chuyển với những cập nhật mới',\n                okText: 'Tạo đơn',\n                cancelText: 'Thoát',\n                onOk: () => {\n                    saveOrder({ showMessage: false }).then(() => {\n                        handleToggleOrderShip();\n                    });\n                },\n            });\n        } else {\n            handleToggleOrderShip();\n        }\n    };\n\n    const cancelDelivery = () => {\n        Modal.confirm({\n            title: 'Hủy đơn vận chuyển',\n            icon: <ExclamationCircleOutlined />,\n            content: 'Bạn muốn hủy đơn vận chuyển',\n            okText: 'Hủy đơn',\n            cancelText: 'Thoát',\n            onOk: handleToggleOrderShip,\n        });\n    };\n\n    const renderShipLabel = () => {\n        const { deliveryOptions } = order_local;\n\n        if ((deliveryOptions as any).serviceId === 1) {\n            return (\n                <Tag\n                    title={ships[1].label}\n                    style={{\n                        background: ships[1].color,\n                        borderColor: ships[1].color,\n                        color: '#fff',\n                    }}\n                >\n                    {ships[1].label}\n                </Tag>\n            );\n        }\n        if ((deliveryOptions as any).serviceId === 2) {\n            return (\n                <Tag\n                    title={ships[2].label}\n                    style={{\n                        background: ships[2].color,\n                        borderColor: ships[2].color,\n                        color: '#fff',\n                    }}\n                >\n                    {ships[2].label}\n                </Tag>\n            );\n        }\n\n        return <Tag>TVC</Tag>;\n    };\n\n    const renderButtonCreateOrderShip = () => {\n        const serviceId = get(order_local, 'deliveryOptions.serviceId');\n        const shipmentOrderId = get(order_local, 'deliveryOptions.shipmentOrderId');\n\n        if (isNull(serviceId) || typeof serviceId === 'undefined' || serviceId === 0) return null;\n\n        if (order_local.status === 4) return null;\n\n        return (\n            <CreateShipOrder\n                shipmentOrderId={shipmentOrderId}\n                createOrderShip={createOrderShip}\n                loading={loading_create_ship}\n                disabled={\n                    !order_local.deliveryOptions.noteForDelivery ||\n                    !order_local.deliveryOptions.serviceId ||\n                    disabledData ||\n                    isEditShip\n                }\n            />\n        );\n    };\n\n    const renderStatusDelivery = () => {\n        const transportStatus: string = get(order_local, 'deliveryOptions.transportStatus');\n\n        if (transportStatus) {\n            const status = (statusDelivery as any)[transportStatus];\n\n            if (!status) return;\n\n            return (\n                <Tag color='#87d068' style={{ marginLeft: 5 }}>\n                    {status.title}\n                </Tag>\n            );\n        }\n\n        return;\n    };\n\n    const renderOrderDeliveryCancel = () => {\n        const shipmentOrderId = get(order_local, 'deliveryOptions.shipmentOrderId');\n        if (shipmentOrderId)\n            return (\n                <Tag\n                    color='#f50'\n                    style={{ marginLeft: 5, cursor: 'pointer' }}\n                    onClick={cancelDelivery}\n                >\n                    Hủy đơn\n                </Tag>\n            );\n\n        return null;\n    };\n\n    const disabled = !!order_local.deliveryOptions.shipmentOrderId;\n\n    const disabledData =\n        !order_local.customer.name ||\n        !order_local.customer.phoneNo ||\n        !order_local.customer.address ||\n        !order_local.customer.province ||\n        !order_local.customer.district ||\n        !order_local.customer.ward ||\n        order_local.products.length === 0;\n\n    useEffect(() => {\n        const optionDelivery = get(order_local, 'deliveryOptions.serviceId');\n        if (optionDelivery !== 0) {\n            setDisabledUpdate(\n                disabled ||\n                    disabledData ||\n                    !order_local.deliveryOptions.noteForDelivery ||\n                    !order_local.deliveryOptions.serviceId\n            );\n        } else {\n            setDisabledUpdate(disabled || disabledData);\n        }\n    }, [order_local]);\n\n    return (\n        <Form form={formOrderDetail}>\n            <Row gutter={30} style={{ padding: '0 15px 15px' }}>\n                <Col md={16}>\n                    <Card type='inner'>\n                        <Row gutter={30}>\n                            <Col span={12}>\n                                <div className='title'>Khách hàng</div>\n                                <Form.Item\n                                    label='Tên'\n                                    {...formItemLayout}\n                                    style={style}\n                                    rules={[{ required: true, message: 'Điền tên khách hàng' }]}\n                                    initialValue={order_local.customer.name}\n                                    name='name'\n                                >\n                                    <Input\n                                        placeholder='Điền tên khách hàng'\n                                        value={order_local.customer.name}\n                                        name='name'\n                                        onChange={changeCustomer}\n                                        disabled={disabled}\n                                    />\n                                </Form.Item>\n                                <Form.Item\n                                    label='Số ĐT'\n                                    {...formItemLayout}\n                                    style={style}\n                                    name='phoneNo'\n                                    rules={[\n                                        { required: true, message: 'Điền số điện thoại' },\n                                        {\n                                            validator: validatePhone,\n                                        },\n                                    ]}\n                                    initialValue={order_local.customer.phoneNo}\n                                >\n                                    <Input\n                                        placeholder='Điền số điện thoại KH'\n                                        value={order_local.customer.phoneNo}\n                                        name='phoneNo'\n                                        onChange={changeCustomer}\n                                        disabled={disabled}\n                                    />\n                                </Form.Item>\n\n                                <OrderAddress\n                                    changeAddress={changeAddress}\n                                    order={order_local}\n                                    disabled={disabled}\n                                />\n\n                                <Form.Item\n                                    label='Địa chỉ'\n                                    {...formItemLayout}\n                                    style={style}\n                                    rules={[{ required: true, message: 'Điền địa chỉ' }]}\n                                    name='address'\n                                    initialValue={order_local.customer.address}\n                                >\n                                    <Input.TextArea\n                                        name='address'\n                                        value={order_local.customer.address}\n                                        onChange={changeCustomer}\n                                        disabled={disabled}\n                                    />\n                                </Form.Item>\n\n                                <Form.Item label='Ghi chú KH' {...formItemLayout} style={style}>\n                                    <Input.TextArea\n                                        name='customerNote'\n                                        onChange={onChangeDeliveryOptions}\n                                        value={order_local.deliveryOptions.customerNote}\n                                        disabled={disabled}\n                                    />\n                                </Form.Item>\n\n                                <Form.Item label='Ghi chú CSKH' {...formItemLayout} style={style}>\n                                    <Input.TextArea\n                                        name='noteForCustomerCare'\n                                        onChange={onChangeDeliveryOptions}\n                                        value={order_local.deliveryOptions.noteForCustomerCare}\n                                        disabled={disabled}\n                                    />\n                                </Form.Item>\n                            </Col>\n\n                            <Col span={12}>\n                                <div className='title'>Giao hàng</div>\n                                <Form.Item style={{ marginBottom: 10 }}>\n                                    <SelectOptionDelivery\n                                        order={order_local}\n                                        disabled={disabled}\n                                        changeTypeDelivery={handleUpdateOrder}\n                                    />\n                                </Form.Item>\n\n                                <Divider dashed style={{ margin: '10px 0' }} />\n\n                                {order_local.deliveryOptions.serviceId !== 0 && (\n                                    <>\n                                        <Form.Item style={{ marginBottom: 10 }}>\n                                            <Row justify='space-between' align='middle'>\n                                                <Col>Hãng vận chuyển</Col>\n                                                <Col>{renderButtonCreateOrderShip()}</Col>\n                                            </Row>\n                                        </Form.Item>\n                                        <ShippingList\n                                            disabled={disabled}\n                                            order={order_local}\n                                            changeShip={handleChangeShip}\n                                            edit={isEditShip}\n                                            updateIsEditShip={() => setIsEditShip(false)}\n                                        />\n                                        <Divider dashed style={{ margin: '15px 0' }} />\n                                        <Form.Item\n                                            label='Ghi chú'\n                                            {...formItemLayout1}\n                                            style={style}\n                                            rules={[\n                                                {\n                                                    required: true,\n                                                    message: 'Chọn ghi chú vận chuyển',\n                                                },\n                                            ]}\n                                            name='noteForDelivery'\n                                            initialValue={get(\n                                                order_local,\n                                                'deliveryOptions.noteForDelivery'\n                                            )}\n                                        >\n                                            <NoteForDelivery\n                                                noteForDelivery={get(\n                                                    order_local,\n                                                    'deliveryOptions.noteForDelivery'\n                                                )}\n                                                changeNoteForDelivery={changeNoteForDelivery}\n                                                disabled={disabled}\n                                            />\n                                        </Form.Item>\n                                    </>\n                                )}\n\n                                {/* {order_local.deliveryOptions.serviceId !== 0 &&\n                                    order_local.customer.province &&\n                                    order_local.customer.district &&\n                                    order_local.customer.ward && (\n                                        <>\n                                            <Form.Item style={{ marginBottom: 10 }}>\n                                                <Row justify='space-between' align='middle'>\n                                                    <Col>Hãng vận chuyển</Col>\n                                                    <Col>{renderButtonCreateOrderShip()}</Col>\n                                                </Row>\n                                            </Form.Item>\n                                            <ShippingList\n                                                disabled={disabled}\n                                                order={order_local}\n                                                changeShip={handleUpdateOrder}\n                                            />\n                                            <Divider dashed style={{ margin: '15px 0' }} />\n                                            <Form.Item\n                                                label='Ghi chú'\n                                                {...formItemLayout1}\n                                                style={style}\n                                            >\n                                                <NoteForDelivery\n                                                    noteForDelivery={get(\n                                                        order_local,\n                                                        'deliveryOptions.noteForDelivery'\n                                                    )}\n                                                    changeNoteForDelivery={changeNoteForDelivery}\n                                                    disabled={disabled}\n                                                />\n                                            </Form.Item>\n                                        </>\n                                    )} */}\n                                <Form.Item\n                                    label='Địa chỉ lấy hàng'\n                                    {...formItemLayout1}\n                                    style={style}\n                                    rules={[{ required: true, message: 'Chọn địa chỉ lấy hàng' }]}\n                                    name='warehouseId'\n                                    initialValue={warehouseId}\n                                >\n                                    <Select\n                                        onPopupScroll={handleScroll}\n                                        onChange={handleSelectWarehouse}\n                                        value={warehouseId}\n                                        placeholder='Chọn địa chỉ lấy hàng'\n                                        style={{ width: '100%' }}\n                                        disabled={disabled}\n                                    >\n                                        {dataWarehouse.map((warehouse: any) => (\n                                            <Select.Option\n                                                key={warehouse._id}\n                                                value={warehouse._id}\n                                            >\n                                                {warehouse.name}\n                                            </Select.Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n\n                            <Col span={24}>\n                                <Divider dashed style={{ margin: '10px 0' }} />\n                            </Col>\n\n                            <Col span={24}>\n                                <Row\n                                    align='middle'\n                                    justify='space-between'\n                                    style={{\n                                        marginTop: 20,\n                                        marginBottom: 15,\n                                    }}\n                                >\n                                    <Col>\n                                        <div className='title' style={{ margin: 0 }}>\n                                            Sản phẩm\n                                        </div>\n                                    </Col>\n\n                                    <Col>\n                                        {!disabled && (\n                                            <AddProduct\n                                                order={order_local}\n                                                changeProduct={handleAddProduct}\n                                            />\n                                        )}\n                                    </Col>\n                                </Row>\n\n                                <Form.Item style={style}>\n                                    <TableOrderList\n                                        products={order_local.products}\n                                        removeProduct={handleRemoveProduct}\n                                        updateProduct={updateProduct}\n                                        disabled={disabled}\n                                    />\n                                </Form.Item>\n                            </Col>\n\n                            <Col span={24}>\n                                <Divider dashed style={{ margin: '10px 0' }} />\n                            </Col>\n                        </Row>\n                    </Card>\n                </Col>\n\n                <Col md={8}>\n                    <Card type='inner' style={{ marginBottom: 15 }}>\n                        <div className='title'>Trạng thái</div>\n                        <Form.Item label='Đơn hàng' {...formItemLayout1} style={style}>\n                            <ChangeStatus status={order_local.status} orderId={order_local._id} />\n                        </Form.Item>\n                        {order_local.code && (\n                            <Form.Item label='Mã Đơn hàng' {...formItemLayout1} style={style}>\n                                <Tag style={{ wordBreak: 'break-all' }}>{order_local.code}</Tag>\n                            </Form.Item>\n                        )}\n                        <Form.Item label='Vận chuyển' {...formItemLayout1} style={style}>\n                            {renderShipLabel()}\n                            {renderStatusDelivery()}\n                        </Form.Item>\n\n                        {order_local.deliveryOptions &&\n                            order_local.deliveryOptions.shipmentOrderId && (\n                                <Form.Item label='Mã vận đơn' {...formItemLayout1} style={style}>\n                                    <Tag style={{ wordBreak: 'break-all' }}>\n                                        {order_local.deliveryOptions.shipmentOrderId}\n                                    </Tag>\n                                </Form.Item>\n                            )}\n                    </Card>\n\n                    <Card type='inner' style={{ marginBottom: 15 }}>\n                        <div className='title'>Thanh toán</div>\n\n                        <Form.Item label='Chiết khấu' {...formItemLayout1} style={style}>\n                            <Discount\n                                discount={order_local.deliveryOptions.discount}\n                                discountBy={order_local.deliveryOptions.discountBy}\n                                changeDiscount={changeDiscount}\n                                disabled={disabled}\n                            />\n                        </Form.Item>\n\n                        <Form.Item label='Phí vận chuyển' {...formItemLayout1} style={style}>\n                            <InputNumber\n                                min={0}\n                                style={{ width: '100%' }}\n                                value={order_local.deliveryOptions.shipmentFee}\n                                onChange={changeShipmentFee}\n                                disabled\n                                formatter={formatterInput}\n                                parser={parserInput}\n                            />\n                        </Form.Item>\n\n                        <Form.Item label='Phí báo khách' {...formItemLayout1} style={style}>\n                            <InputNumber\n                                style={{ width: '100%' }}\n                                min={0}\n                                value={order_local.deliveryOptions.shipmentFeeForCustomer}\n                                onChange={changeShipmentFeeForCustomer}\n                                formatter={formatterInput}\n                                parser={parserInput}\n                                disabled={disabled}\n                            />\n                        </Form.Item>\n                    </Card>\n\n                    <TotalOrder order={order_local} />\n\n                    <div style={{ marginTop: 15 }}>\n                        <Button\n                            type='primary'\n                            icon={<SaveOutlined />}\n                            onClick={() => saveOrder({ showMessage: true })}\n                            loading={loading}\n                            disabled={disabledUpdate}\n                        >\n                            Cập nhật\n                        </Button>\n                    </div>\n                </Col>\n            </Row>\n        </Form>\n    );\n};\n\nexport default FormUpdateOrder;\n"]},"metadata":{},"sourceType":"module"}