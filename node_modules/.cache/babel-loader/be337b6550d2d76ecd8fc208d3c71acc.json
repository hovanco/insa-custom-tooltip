{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/tab-pages/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { PushpinOutlined, UnorderedListOutlined, UserOutlined } from '@ant-design/icons';\nimport { Avatar, Badge, Dropdown, Menu } from 'antd';\nimport React, { memo, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { loadQuickMessageAction } from '../../../actions/setting';\nimport { PlusDashedCircle } from '../../../assets/icon';\nimport HeaderRight from '../../../components/header-customer/header-right';\nimport { removeConversations, setNullForConversation } from '../../../reducers/fanpageState/fanpageAction';\nimport { loadLabels } from '../../../reducers/labelState/labelAction';\nimport { generateUrlImgFb } from '../../../utils/generate-url-img-fb';\nimport Pages from './pages';\nimport './tab-pages.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst TabPages = () => {\n  _s();\n\n  const pages = useSelector(({\n    fanpage\n  }) => fanpage.pages);\n  const store = useSelector(({\n    store\n  }) => store.store);\n  const [pagesShow, setPagesShow] = useState([...Object.keys(pages)]);\n  const [pagesHide, setPagesHide] = useState([]);\n  const dispatch = useDispatch();\n  const arrPage = Object.keys(pages).map(key => pages[key]);\n  const [pageActive, setPageActive] = useState({\n    _id: arrPage[0]._id,\n    fbObjectId: arrPage[0].fbObjectId\n  });\n\n  if (!store.activePage) {\n    store.activePage = arrPage[0];\n  }\n\n  useEffect(() => {\n    function isActive(page) {\n      return pageActive._id === page;\n    }\n\n    if (pagesShow.findIndex(item => isActive(item)) < 0) {\n      handleSelectPage(pages[pagesShow[0]]);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [pagesShow, pageActive]);\n  useEffect(() => {\n    let fbpageId;\n\n    if (store.activePage) {\n      fbpageId = store.activePage.fbObjectId;\n      setPageActive(store.activePage);\n    } else {\n      fbpageId = pageActive.fbObjectId;\n    }\n\n    const data = {\n      pageId: fbpageId,\n      storeId: store._id\n    };\n    dispatch(loadQuickMessageAction(data));\n    dispatch(loadLabels(fbpageId)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [store.activePage]);\n\n  const pinPage = page => {\n    function isNot(item, page) {\n      return item !== page._id;\n    }\n\n    setPagesHide(prev => prev.filter(item => isNot(item, page)));\n    setPagesShow(prev => [...prev, page._id]);\n  };\n\n  const handleSelectPage = page => {\n    if (!pagesShow.includes(page._id)) {\n      setPagesHide(prev => prev.filter(item => item !== page._id));\n      setPagesShow(prev => [page._id, ...prev]);\n    }\n\n    if (page._id === pageActive._id) {\n      // setPageActive({ _id: null });\n      // store.activePage = null;\n      // dispatch(loadConversations(store.queryConversation));\n      return;\n    } else {\n      setPageActive(page);\n      store.activePage = page;\n      store.queryConversation = null;\n      dispatch(removeConversations());\n      dispatch(setNullForConversation());\n    }\n  };\n\n  const menus = /*#__PURE__*/_jsxDEV(Menu, {\n    children: pagesHide.map(key => /*#__PURE__*/_jsxDEV(Menu.Item, {\n      className: pageActive._id === pages[key]._id ? 'page-active' : '',\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => handleSelectPage(pages[key]),\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          src: generateUrlImgFb(pages[key].fbObjectId, pages[key].accessToken),\n          icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 35\n          }, this),\n          size: \"small\",\n          style: {\n            marginRight: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Badge, {\n          className: \"badge\",\n          count: pages[key].countUnread,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text\",\n            style: {\n              marginRight: 12\n            },\n            children: pages[key].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(PushpinOutlined, {\n        style: {\n          marginLeft: 20,\n          cursor: 'default'\n        },\n        onClick: () => pinPage(pages[key])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this)]\n    }, key, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(HeaderRight, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-pages\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pages-items\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"title text\",\n          children: \"H\\u1ED9p tho\\u1EA1i t\\u1EEB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Pages, {\n          items: pagesShow,\n          setItems: setPagesShow,\n          pages: pages,\n          pageActive: pageActive,\n          handleSelectPage: handleSelectPage,\n          setPagesHide: setPagesHide\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/customer/select-pages\",\n          style: {\n            lineHeight: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(PlusDashedCircle, {\n            style: {\n              fontSize: 22,\n              marginLeft: 10\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), pagesHide.length > 0 ? /*#__PURE__*/_jsxDEV(Dropdown, {\n        overlay: menus,\n        placement: \"bottomRight\",\n        trigger: ['click'],\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-page menus\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text\",\n            children: /*#__PURE__*/_jsxDEV(UnorderedListOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n};\n\n_s(TabPages, \"BxmTEWfhnymCSn+8Orkwg7jd4bU=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = TabPages;\nexport default _c2 = /*#__PURE__*/memo(TabPages);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TabPages\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/tab-pages/index.tsx"],"names":["PushpinOutlined","UnorderedListOutlined","UserOutlined","Avatar","Badge","Dropdown","Menu","React","memo","useEffect","useState","useDispatch","useSelector","Link","loadQuickMessageAction","PlusDashedCircle","HeaderRight","removeConversations","setNullForConversation","loadLabels","generateUrlImgFb","Pages","TabPages","pages","fanpage","store","pagesShow","setPagesShow","Object","keys","pagesHide","setPagesHide","dispatch","arrPage","map","key","pageActive","setPageActive","_id","fbObjectId","activePage","isActive","page","findIndex","item","handleSelectPage","fbpageId","data","pageId","storeId","pinPage","isNot","prev","filter","includes","queryConversation","menus","display","alignItems","justifyContent","accessToken","marginRight","countUnread","name","marginLeft","cursor","lineHeight","fontSize","length"],"mappings":"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","sourcesContent":["import { PushpinOutlined, UnorderedListOutlined, UserOutlined } from '@ant-design/icons';\nimport { Avatar, Badge, Dropdown, Menu } from 'antd';\nimport React, { FC, memo, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { loadQuickMessageAction } from '../../../actions/setting';\nimport { PlusDashedCircle } from '../../../assets/icon';\nimport HeaderRight from '../../../components/header-customer/header-right';\nimport {\n    removeConversations, setNullForConversation\n} from '../../../reducers/fanpageState/fanpageAction';\nimport { IFacebookState } from '../../../reducers/fanpageState/fanpageReducer';\nimport { loadLabels } from '../../../reducers/labelState/labelAction';\nimport { IStoreState } from '../../../reducers/storeState/storeReducer';\nimport { generateUrlImgFb } from '../../../utils/generate-url-img-fb';\nimport Pages from './pages';\nimport './tab-pages.less';\n\nconst TabPages: FC = (): JSX.Element => {\n    const pages = useSelector(({ fanpage }: { fanpage: IFacebookState }) => fanpage.pages);\n    const store = useSelector(({ store }: { store: IStoreState }) => store.store);\n    const [pagesShow, setPagesShow] = useState([...Object.keys(pages)]);\n    const [pagesHide, setPagesHide] = useState([]);\n    const dispatch = useDispatch();\n\n    const arrPage = Object.keys(pages).map((key: string) => pages[key]);\n    const [pageActive, setPageActive] = useState<any>({\n        _id: arrPage[0]._id,\n        fbObjectId: arrPage[0].fbObjectId,\n    });\n    if (!store.activePage) {\n        store.activePage = arrPage[0];\n    }\n\n    useEffect(() => {\n        function isActive(page: any) {\n            return pageActive._id === page\n        }\n        if (pagesShow.findIndex(item => isActive(item)) < 0) {\n            handleSelectPage(pages[pagesShow[0]]);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [pagesShow, pageActive])\n\n    useEffect(() => {\n        let fbpageId;\n        if (store.activePage) {\n            fbpageId = store.activePage.fbObjectId;\n            setPageActive(store.activePage);\n        } else {\n            fbpageId = pageActive.fbObjectId;\n        }\n\n        const data = {\n            pageId: fbpageId,\n            storeId: store._id,\n        };\n\n        dispatch(loadQuickMessageAction(data));\n        dispatch(loadLabels(fbpageId));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [store.activePage]);\n\n    const pinPage = (page: any) => {\n\n        function isNot(item: string, page: any) {\n            return item !== page._id\n        }\n        setPagesHide(prev => prev.filter(item => isNot(item, page)));\n        setPagesShow(prev => [...prev, page._id]);\n    }\n\n    const handleSelectPage = (page: any) => {\n\n        if (!pagesShow.includes(page._id)) {\n            setPagesHide(prev => prev.filter(item => item !== page._id));\n            setPagesShow(prev => [page._id, ...prev]);\n        }\n\n        if (page._id === pageActive._id) {\n            // setPageActive({ _id: null });\n            // store.activePage = null;\n            // dispatch(loadConversations(store.queryConversation));\n            return;\n        } else {\n            setPageActive(page);\n            store.activePage = page;\n            store.queryConversation = null;\n            dispatch(removeConversations());\n            dispatch(setNullForConversation());\n        }\n    };\n\n    const menus = (\n        <Menu>\n            {pagesHide.map((key: string) => (\n                <Menu.Item\n                    key={key}\n                    className={pageActive._id === pages[key]._id ? 'page-active' : ''}\n                    style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}\n                >\n                    <div onClick={() => handleSelectPage(pages[key])}>\n                        <Avatar\n                            src={generateUrlImgFb(\n                                pages[key].fbObjectId,\n                                pages[key].accessToken\n                            )}\n                            icon={<UserOutlined />}\n                            size='small'\n                            style={{ marginRight: 10 }}\n                        />\n                        <Badge className='badge' count={pages[key].countUnread}>\n                            <span className='text' style={{ marginRight: 12 }}>\n                                {pages[key].name}\n                            </span>\n                        </Badge>\n                    </div>\n                    <PushpinOutlined\n                        style={{ marginLeft: 20, cursor: 'default' }}\n                        onClick={() => pinPage(pages[key])}\n                    />\n                </Menu.Item>\n            ))}\n        </Menu>\n    );\n\n    return (\n        <HeaderRight>\n            <div className='tab-pages'>\n                <div className='tab-pages-items'>\n                    <span className='title text'>Hộp thoại từ</span>\n                    <Pages\n                        items={pagesShow}\n                        setItems={setPagesShow}\n                        pages={pages}\n                        pageActive={pageActive}\n                        handleSelectPage={handleSelectPage}\n                        setPagesHide={setPagesHide}\n                    />\n                    <Link to='/customer/select-pages' style={{ lineHeight: 1 }}>\n                        <PlusDashedCircle style={{ fontSize: 22, marginLeft: 10 }} />\n                    </Link>\n                </div>\n                {pagesHide.length > 0 ?\n                    <Dropdown overlay={menus} placement='bottomRight' trigger={['click']}>\n                        <div className='btn-page menus'>\n                            <span className='text'>\n                                <UnorderedListOutlined />\n                            </span>\n                        </div>\n                    </Dropdown> :\n                    <></>\n                }\n            </div>\n        </HeaderRight>\n    );\n};\n\nexport default memo(TabPages);\n"]},"metadata":{},"sourceType":"module"}