{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/scripts/script-table-action.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport { Dropdown, Menu, message, Modal } from 'antd';\nimport livestreamApi from '../../../api/livestream-api';\nimport { loadLivestreams, loadLiveStreamStart, loadLiveStreamFailed } from '../../../reducers/livestreamState/livestreamAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ScriptTableAction = ({\n  scripts,\n  resetScriptSelect\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const store = useSelector(state => state.store.store);\n  const [loading, setLoading] = useState(false);\n\n  const disableScript = async () => {\n    setLoading(true);\n    Modal.confirm({\n      title: 'Ngưng kích hoạt kịch bản',\n      icon: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 19\n      }, this),\n      content: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"B\\u1EA1n ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n ng\\u01B0ng k\\xEDch ho\\u1EA1t k\\u1ECBch b\\u1EA3n \\u0111\\xE3 ch\\u1ECDn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 22\n      }, this),\n      okText: 'Đồng ý',\n      cancelText: 'Hủy',\n\n      onOk() {\n        dispatch(loadLiveStreamStart());\n        Promise.all(scripts.map(async script => {\n          const res = await livestreamApi.changeActiveScript({\n            storeId: store._id,\n            fbPageId: script.fbPageId,\n            scriptId: script._id,\n            active: false\n          });\n          return res;\n        })).then(response => {\n          message.success(`Đã ngưng kích hoạt ${scripts.length} kịch bản`);\n          setLoading(false);\n          dispatch(loadLivestreams());\n        }).catch(error => {\n          message.error('Lỗi ngưng kích hoạt kịch bản');\n          setLoading(false);\n          dispatch(loadLiveStreamFailed());\n        });\n      },\n\n      onCancel() {\n        setLoading(false);\n      }\n\n    });\n  };\n\n  const removeScripts = async () => {\n    setLoading(true);\n    Modal.confirm({\n      title: 'Xóa kịch bản',\n      icon: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 19\n      }, this),\n      content: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"B\\u1EA1n ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a k\\u1ECBch b\\u1EA3n \\u0111\\xE3 ch\\u1ECDn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 22\n      }, this),\n      okText: 'Đồng ý',\n      cancelText: 'Hủy',\n\n      onOk() {\n        Promise.all(scripts.map(async script => {\n          const res = await livestreamApi.deleteScript({\n            storeId: store._id,\n            fbPageId: script.fbPageId,\n            scriptId: script._id\n          });\n          return res;\n        })).then(response => {\n          message.success(`Đã xóa ${scripts.length} thành công`);\n          setLoading(false);\n          dispatch(loadLivestreams());\n          resetScriptSelect();\n        }).catch(error => {\n          message.error('Lỗi xóa kịch bản');\n          setLoading(false);\n        });\n      },\n\n      onCancel() {\n        setLoading(false);\n      }\n\n    });\n  };\n\n  const menu = /*#__PURE__*/_jsxDEV(Menu, {\n    children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: disableScript,\n      children: \"Ng\\u01B0ng k\\xEDch ho\\u1EA1t\"\n    }, '0', false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: removeScripts,\n      children: \"X\\xF3a k\\u1ECBch b\\u1EA3n\"\n    }, '1', false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(Dropdown, {\n    overlay: menu,\n    trigger: ['click'],\n    disabled: loading\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ScriptTableAction, \"BSe2gFFMrg+/VrfbJB9mnyFeDq0=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = ScriptTableAction;\nexport default ScriptTableAction;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScriptTableAction\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/scripts/script-table-action.tsx"],"names":["React","useState","useDispatch","useSelector","ExclamationCircleOutlined","Dropdown","Menu","message","Modal","livestreamApi","loadLivestreams","loadLiveStreamStart","loadLiveStreamFailed","ScriptTableAction","scripts","resetScriptSelect","dispatch","store","state","loading","setLoading","disableScript","confirm","title","icon","content","okText","cancelText","onOk","Promise","all","map","script","res","changeActiveScript","storeId","_id","fbPageId","scriptId","active","then","response","success","length","catch","error","onCancel","removeScripts","deleteScript","menu"],"mappings":"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","sourcesContent":["import React, { FC, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CaretDownOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport { Button, Dropdown, Menu, message, Modal } from 'antd';\nimport { IScript } from './interface';\nimport livestreamApi from '../../../api/livestream-api';\nimport {\n    loadLivestreams,\n    loadLiveStreamStart,\n    loadLiveStreamFailed,\n} from '../../../reducers/livestreamState/livestreamAction';\n\ninterface Props {\n    scripts: Array<IScript>;\n    resetScriptSelect: Function;\n}\n\nconst ScriptTableAction: FC<Props> = ({ scripts, resetScriptSelect }): JSX.Element => {\n    const dispatch = useDispatch();\n    const store = useSelector((state: any) => state.store.store);\n    const [loading, setLoading] = useState(false);\n\n    const disableScript = async () => {\n        setLoading(true);\n\n        Modal.confirm({\n            title: 'Ngưng kích hoạt kịch bản',\n            icon: <ExclamationCircleOutlined />,\n            content: <span>Bạn chắc chắn muốn ngưng kích hoạt kịch bản đã chọn</span>,\n            okText: 'Đồng ý',\n            cancelText: 'Hủy',\n            onOk() {\n                dispatch(loadLiveStreamStart());\n\n                Promise.all(\n                    scripts.map(async (script: any) => {\n                        const res = await livestreamApi.changeActiveScript({\n                            storeId: store._id,\n                            fbPageId: script.fbPageId,\n                            scriptId: script._id,\n                            active: false,\n                        });\n\n                        return res;\n                    })\n                )\n                    .then((response) => {\n                        message.success(`Đã ngưng kích hoạt ${scripts.length} kịch bản`);\n                        setLoading(false);\n                        dispatch(loadLivestreams());\n                    })\n                    .catch((error) => {\n                        message.error('Lỗi ngưng kích hoạt kịch bản');\n                        setLoading(false);\n\n                        dispatch(loadLiveStreamFailed());\n                    });\n            },\n            onCancel() {\n                setLoading(false);\n            },\n        });\n    };\n\n    const removeScripts = async () => {\n        setLoading(true);\n\n        Modal.confirm({\n            title: 'Xóa kịch bản',\n            icon: <ExclamationCircleOutlined />,\n            content: <span>Bạn chắc chắn muốn xóa kịch bản đã chọn</span>,\n            okText: 'Đồng ý',\n            cancelText: 'Hủy',\n            onOk() {\n                Promise.all(\n                    scripts.map(async (script: any) => {\n                        const res = await livestreamApi.deleteScript({\n                            storeId: store._id,\n                            fbPageId: script.fbPageId,\n                            scriptId: script._id,\n                        });\n                        return res;\n                    })\n                )\n                    .then((response) => {\n                        message.success(`Đã xóa ${scripts.length} thành công`);\n                        setLoading(false);\n                        dispatch(loadLivestreams());\n                        resetScriptSelect();\n                    })\n                    .catch((error) => {\n                        message.error('Lỗi xóa kịch bản');\n                        setLoading(false);\n                    });\n            },\n            onCancel() {\n                setLoading(false);\n            },\n        });\n    };\n\n    const menu = (\n        <Menu>\n            <Menu.Item key='0' onClick={disableScript}>\n                Ngưng kích hoạt\n            </Menu.Item>\n            <Menu.Item key='1' onClick={removeScripts}>\n                Xóa kịch bản\n            </Menu.Item>\n        </Menu>\n    );\n    return (\n        <Dropdown overlay={menu} trigger={['click']} disabled={loading}>\n            {/* <Button>\n                Chọn thao tác <CaretDownOutlined />\n            </Button> */}\n        </Dropdown>\n    );\n};\n\nexport default ScriptTableAction;\n"]},"metadata":{},"sourceType":"module"}