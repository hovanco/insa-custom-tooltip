{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/components/error-boundary/index.tsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { get } from 'lodash';\nimport { sendErrorToSlack } from '../../api/slack-api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      errorInfo: null\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n    const {\n      propsAll\n    } = this.props;\n    let message = `${error && error.toString()}`;\n    message = message.substring(0, 255);\n\n    if (window.location.href.indexOf('localhost') === -1) {\n      sendErrorToSlack({\n        data: {\n          message,\n          data: {\n            storeId: get(propsAll, 'store.store._id', ''),\n            userId: get(propsAll, 'auth.user._id', ''),\n            'user-agent': navigator && navigator.userAgent,\n            router: window && window.location.href,\n            error: errorInfo\n          }\n        }\n      });\n    }\n  }\n\n  render() {\n    const {\n      errorInfo,\n      error\n    } = this.state;\n\n    if (errorInfo) {\n      // Error path\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Something went wrong.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          style: {\n            whiteSpace: 'pre-wrap'\n          },\n          children: [error && error.toString(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this), errorInfo.componentStack]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this);\n    } // Normally, just render children\n\n\n    return this.props.children;\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  propsAll: state\n});\n\nexport default connect(mapStateToProps, null)(ErrorBoundary);","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/components/error-boundary/index.tsx"],"names":["React","connect","get","sendErrorToSlack","ErrorBoundary","Component","constructor","props","state","error","errorInfo","componentDidCatch","setState","propsAll","message","toString","substring","window","location","href","indexOf","data","storeId","userId","navigator","userAgent","router","render","whiteSpace","componentStack","children","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,MAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,GAAT,QAAoB,QAApB;AAEA,SAASC,gBAAT,QAAiC,qBAAjC;;;AAMA,MAAMC,aAAN,SAA4BJ,KAAK,CAACK,SAAlC,CAAwD;AACpDC,EAAAA,WAAW,CAACC,KAAD,EAAa;AACpB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAAEC,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,SAAS,EAAE;AAA1B,KAAb;AACH;;AAEDC,EAAAA,iBAAiB,CAACF,KAAD,EAAaC,SAAb,EAA6B;AAC1C,SAAKE,QAAL,CAAc;AACVH,MAAAA,KAAK,EAAEA,KADG;AAEVC,MAAAA,SAAS,EAAEA;AAFD,KAAd;AAKA,UAAM;AAAEG,MAAAA;AAAF,QAAoB,KAAKN,KAA/B;AAEA,QAAIO,OAAO,GAAI,GAAEL,KAAK,IAAIA,KAAK,CAACM,QAAN,EAAiB,EAA3C;AACAD,IAAAA,OAAO,GAAGA,OAAO,CAACE,SAAR,CAAkB,CAAlB,EAAqB,GAArB,CAAV;;AACA,QAAIC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,OAArB,CAA6B,WAA7B,MAA8C,CAAC,CAAnD,EAAsD;AAClDjB,MAAAA,gBAAgB,CAAC;AACbkB,QAAAA,IAAI,EAAE;AACFP,UAAAA,OADE;AAEFO,UAAAA,IAAI,EAAE;AACFC,YAAAA,OAAO,EAAEpB,GAAG,CAACW,QAAD,EAAW,iBAAX,EAA8B,EAA9B,CADV;AAEFU,YAAAA,MAAM,EAAErB,GAAG,CAACW,QAAD,EAAW,eAAX,EAA4B,EAA5B,CAFT;AAGF,0BAAcW,SAAS,IAAIA,SAAS,CAACC,SAHnC;AAIFC,YAAAA,MAAM,EAAET,MAAM,IAAIA,MAAM,CAACC,QAAP,CAAgBC,IAJhC;AAKFV,YAAAA,KAAK,EAAEC;AALL;AAFJ;AADO,OAAD,CAAhB;AAYH;AACJ;;AAEDiB,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEjB,MAAAA,SAAF;AAAaD,MAAAA;AAAb,QAAuB,KAAKD,KAAlC;;AAEA,QAAIE,SAAJ,EAAe;AACX;AACA,0BACI;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAS,UAAA,KAAK,EAAE;AAAEkB,YAAAA,UAAU,EAAE;AAAd,WAAhB;AAAA,qBACKnB,KAAK,IAAIA,KAAK,CAACM,QAAN,EADd,eAEI;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAGKL,SAAS,CAACmB,cAHf;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ;AAUH,KAfI,CAiBL;;;AACA,WAAO,KAAKtB,KAAL,CAAWuB,QAAlB;AACH;;AAnDmD;;AAsDxD,MAAMC,eAAe,GAAIvB,KAAD,KAAiB;AAAEK,EAAAA,QAAQ,EAAEL;AAAZ,CAAjB,CAAxB;;AAEA,eAAeP,OAAO,CAAC8B,eAAD,EAAkB,IAAlB,CAAP,CAA+B3B,aAA/B,CAAf","sourcesContent":["import React, { ReactNode } from 'react';\nimport { connect } from 'react-redux';\nimport { get } from 'lodash';\n\nimport { sendErrorToSlack } from '../../api/slack-api';\n\ninterface Props {\n    children: ReactNode;\n}\n\nclass ErrorBoundary extends React.Component<Props, any> {\n    constructor(props: any) {\n        super(props);\n        this.state = { error: null, errorInfo: null };\n    }\n\n    componentDidCatch(error: any, errorInfo: any) {\n        this.setState({\n            error: error,\n            errorInfo: errorInfo,\n        });\n\n        const { propsAll }: any = this.props;\n\n        let message = `${error && error.toString()}`;\n        message = message.substring(0, 255);\n        if (window.location.href.indexOf('localhost') === -1) {\n            sendErrorToSlack({\n                data: {\n                    message,\n                    data: {\n                        storeId: get(propsAll, 'store.store._id', ''),\n                        userId: get(propsAll, 'auth.user._id', ''),\n                        'user-agent': navigator && navigator.userAgent,\n                        router: window && window.location.href,\n                        error: errorInfo,\n                    },\n                },\n            });\n        }\n    }\n\n    render() {\n        const { errorInfo, error } = this.state;\n\n        if (errorInfo) {\n            // Error path\n            return (\n                <div>\n                    <h2>Something went wrong.</h2>\n                    <details style={{ whiteSpace: 'pre-wrap' }}>\n                        {error && error.toString()}\n                        <br />\n                        {errorInfo.componentStack}\n                    </details>\n                </div>\n            );\n        }\n\n        // Normally, just render children\n        return this.props.children;\n    }\n}\n\nconst mapStateToProps = (state: any) => ({ propsAll: state });\n\nexport default connect(mapStateToProps, null)(ErrorBoundary);\n"]},"metadata":{},"sourceType":"module"}