{"ast":null,"code":"import { union } from 'lodash';\nimport { keywordRegex, parsePhoneNumber } from '../../../utils/string';\n\nconst getProductFromKeyword = ({\n  keywords,\n  text\n}) => {\n  let products = [];\n\n  if (!text) {\n    return products;\n  }\n\n  keywords.forEach(keyword => {\n    const regex = keywordRegex(keyword.keyword);\n\n    if (text.match(regex)) {\n      products = union(products, keyword.products);\n    }\n  });\n  return products;\n};\n\nexport const checkRightSyntax = ({\n  keywords,\n  text,\n  syntax\n}) => {\n  const products = getProductFromKeyword({\n    keywords,\n    text\n  });\n  const phone = parsePhoneNumber(text);\n\n  if (products.length === 0) {\n    return {\n      valid: false,\n      products: [],\n      phoneNo: phone\n    };\n  }\n\n  if (syntax === 1) {\n    if (phone) {\n      return {\n        valid: true,\n        products,\n        phoneNo: phone\n      };\n    }\n\n    return {\n      valid: false,\n      products,\n      phoneNo: phone\n    };\n  }\n\n  return {\n    valid: true,\n    products,\n    phoneNo: phone\n  };\n};","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/script-step/util.ts"],"names":["union","keywordRegex","parsePhoneNumber","getProductFromKeyword","keywords","text","products","forEach","keyword","regex","match","checkRightSyntax","syntax","phone","length","valid","phoneNo"],"mappings":"AAAA,SAASA,KAAT,QAAsB,QAAtB;AACA,SAASC,YAAT,EAAuBC,gBAAvB,QAA+C,uBAA/C;;AAEA,MAAMC,qBAAqB,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAD,KAAkE;AAC5F,MAAIC,QAAe,GAAG,EAAtB;;AAEA,MAAI,CAACD,IAAL,EAAW;AACP,WAAOC,QAAP;AACH;;AAEDF,EAAAA,QAAQ,CAACG,OAAT,CAAkBC,OAAD,IAAkB;AAC/B,UAAMC,KAAK,GAAGR,YAAY,CAACO,OAAO,CAACA,OAAT,CAA1B;;AACA,QAAIH,IAAI,CAACK,KAAL,CAAWD,KAAX,CAAJ,EAAuB;AACnBH,MAAAA,QAAQ,GAAGN,KAAK,CAACM,QAAD,EAAWE,OAAO,CAACF,QAAnB,CAAhB;AACH;AACJ,GALD;AAOA,SAAOA,QAAP;AACH,CAfD;;AAiBA,OAAO,MAAMK,gBAAgB,GAAG,CAAC;AAC7BP,EAAAA,QAD6B;AAE7BC,EAAAA,IAF6B;AAG7BO,EAAAA;AAH6B,CAAD,KAQ8B;AAC1D,QAAMN,QAAQ,GAAGH,qBAAqB,CAAC;AACnCC,IAAAA,QADmC;AAEnCC,IAAAA;AAFmC,GAAD,CAAtC;AAIA,QAAMQ,KAAK,GAAGX,gBAAgB,CAACG,IAAD,CAA9B;;AAEA,MAAIC,QAAQ,CAACQ,MAAT,KAAoB,CAAxB,EAA2B;AACvB,WAAO;AACHC,MAAAA,KAAK,EAAE,KADJ;AAEHT,MAAAA,QAAQ,EAAE,EAFP;AAGHU,MAAAA,OAAO,EAAEH;AAHN,KAAP;AAKH;;AAED,MAAID,MAAM,KAAK,CAAf,EAAkB;AACd,QAAIC,KAAJ,EAAW;AACP,aAAO;AACHE,QAAAA,KAAK,EAAE,IADJ;AAEHT,QAAAA,QAFG;AAGHU,QAAAA,OAAO,EAAEH;AAHN,OAAP;AAKH;;AAED,WAAO;AACHE,MAAAA,KAAK,EAAE,KADJ;AAEHT,MAAAA,QAFG;AAGHU,MAAAA,OAAO,EAAEH;AAHN,KAAP;AAKH;;AAED,SAAO;AACHE,IAAAA,KAAK,EAAE,IADJ;AAEHT,IAAAA,QAFG;AAGHU,IAAAA,OAAO,EAAEH;AAHN,GAAP;AAKH,CA5CM","sourcesContent":["import { union } from 'lodash';\nimport { keywordRegex, parsePhoneNumber } from '../../../utils/string';\n\nconst getProductFromKeyword = ({ keywords, text }: { keywords: any[]; text: string }): any[] => {\n    let products: any[] = [];\n\n    if (!text) {\n        return products;\n    }\n\n    keywords.forEach((keyword: any) => {\n        const regex = keywordRegex(keyword.keyword);\n        if (text.match(regex)) {\n            products = union(products, keyword.products);\n        }\n    });\n\n    return products;\n};\n\nexport const checkRightSyntax = ({\n    keywords,\n    text,\n    syntax,\n}: {\n    keywords: any[];\n    text: string;\n    syntax: number;\n}): { valid: boolean; products?: any[]; phoneNo?: string } => {\n    const products = getProductFromKeyword({\n        keywords,\n        text,\n    });\n    const phone = parsePhoneNumber(text);\n\n    if (products.length === 0) {\n        return {\n            valid: false,\n            products: [],\n            phoneNo: phone,\n        };\n    }\n\n    if (syntax === 1) {\n        if (phone) {\n            return {\n                valid: true,\n                products,\n                phoneNo: phone,\n            };\n        }\n\n        return {\n            valid: false,\n            products,\n            phoneNo: phone,\n        };\n    }\n\n    return {\n        valid: true,\n        products,\n        phoneNo: phone,\n    };\n};\n"]},"metadata":{},"sourceType":"module"}