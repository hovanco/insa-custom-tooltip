{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-detail/quick-message-list.tsx\",\n    _s = $RefreshSig$();\n\nimport { SettingFilled } from '@ant-design/icons';\nimport { Col, Row } from 'antd';\nimport { filter } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { useConversationDetail } from './context';\nimport QuickMessageItem from './quick-message-item';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst QuickmessageList = ({\n  toggle,\n  textFilter = '',\n  chat = false\n}) => {\n  _s();\n\n  const {\n    changeText,\n    changeTextChat\n  } = useConversationDetail();\n  const [index, setIndex] = useState(0);\n  const quickMessage = useSelector(({\n    setting\n  }) => setting.quickMessage);\n  const conversation = useSelector(({\n    fanpage\n  }) => fanpage.conversation);\n  const quickMessageArr = Object.keys(quickMessage).map(key => ({ ...quickMessage[key]\n  }));\n  const handMoveSelect = React.useCallback(e => {\n    const leng_answers = quickMessageArr.length;\n\n    if (e.code === 'ArrowDown') {\n      if (index === leng_answers - 1) return null;\n      return setIndex(index + 1);\n    }\n\n    if (e.code === 'ArrowUp') {\n      if (index === 0) return null;\n      return setIndex(index - 1);\n    }\n\n    if (e.code === 'Enter') {\n      const answer = messages[index];\n\n      if (answer) {\n        if (!chat) {\n          changeText('');\n          let message = answer.message.trim();\n\n          if (conversation.type === 2) {\n            message = message.replace(/{FULL_NAME}/gi, `{${conversation.fbUsername || ''}}`);\n          } else {\n            message = message.replace(/{FULL_NAME}/gi, conversation.fbUsername || '');\n          }\n\n          return changeText(message);\n        } else {\n          changeTextChat('');\n          return changeTextChat(answer.message.trim().replace(/{FULL_NAME}/gi, conversation.fbUsername || ''));\n        }\n      } else {\n        toggle();\n\n        if (!chat) {\n          return changeText(`${textFilter}`);\n        } else {\n          return changeTextChat(`${textFilter}`);\n        }\n      }\n    }\n\n    return null;\n  }, [index, quickMessage]);\n  useEffect(() => {\n    document.addEventListener('keydown', handMoveSelect);\n    return () => {\n      document.removeEventListener('keydown', handMoveSelect);\n    };\n  }, [handMoveSelect]);\n  const messages = filter(quickMessage, message => message.shortcut.includes(textFilter.substring(1)));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"quick-messages\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      align: \"middle\",\n      justify: \"space-between\",\n      style: {\n        background: '#eee',\n        padding: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: \"S\\u1EED d\\u1EE5ng \\u2191 ho\\u1EB7c \\u2193 \\u0111\\u1EC3 di chuy\\u1EC3n [enter \\u0111\\u1EC3 ch\\u1ECDn]\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/customer/other/setting\",\n          children: [/*#__PURE__*/_jsxDEV(SettingFilled, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), \" C\\xE0i \\u0111\\u1EB7t\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), messages.map((message, i) => {\n      return /*#__PURE__*/_jsxDEV(QuickMessageItem, {\n        chat: chat,\n        active: index === i,\n        message: message,\n        toggleModal: toggle,\n        conversation: conversation,\n        fbUsername: conversation.fbUsername\n      }, message._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n};\n\n_s(QuickmessageList, \"+wKT/U5UX3nV85xWyy+Ln9qS86o=\", false, function () {\n  return [useConversationDetail, useSelector, useSelector];\n});\n\n_c = QuickmessageList;\nexport default QuickmessageList;\n\nvar _c;\n\n$RefreshReg$(_c, \"QuickmessageList\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-detail/quick-message-list.tsx"],"names":["SettingFilled","Col","Row","filter","React","useEffect","useState","useSelector","Link","useConversationDetail","QuickMessageItem","QuickmessageList","toggle","textFilter","chat","changeText","changeTextChat","index","setIndex","quickMessage","setting","conversation","fanpage","quickMessageArr","Object","keys","map","key","handMoveSelect","useCallback","e","leng_answers","length","code","answer","messages","message","trim","type","replace","fbUsername","document","addEventListener","removeEventListener","shortcut","includes","substring","background","padding","i","_id"],"mappings":"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","sourcesContent":["import { SettingFilled } from '@ant-design/icons';\nimport { Col, Row } from 'antd';\nimport { filter } from 'lodash';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { IConversation, IFacebookState } from '../../../reducers/fanpageState/fanpageReducer';\nimport { QuickMessageInterface } from '../../../reducers/setting/interfaces';\nimport { IState as SettingState } from '../../../reducers/setting/settingReducer';\nimport { useConversationDetail } from './context';\nimport QuickMessageItem from './quick-message-item';\n\ninterface Props {\n    toggle: () => void;\n    textFilter?: string;\n    chat?: boolean;\n}\n\nconst QuickmessageList: FC<Props> = ({ toggle, textFilter = '', chat = false }): JSX.Element => {\n    const { changeText, changeTextChat } = useConversationDetail();\n    const [index, setIndex] = useState(0);\n\n    const quickMessage = useSelector(\n        ({ setting }: { setting: SettingState }) => setting.quickMessage\n    );\n\n    const conversation: IConversation = useSelector(\n        ({ fanpage }: { fanpage: IFacebookState }) => fanpage.conversation\n    );\n\n    const quickMessageArr = Object.keys(quickMessage).map((key: string) => ({\n        ...quickMessage[key],\n    }));\n\n    const handMoveSelect = React.useCallback(\n        (e) => {\n            const leng_answers = quickMessageArr.length;\n\n            if (e.code === 'ArrowDown') {\n                if (index === leng_answers - 1) return null;\n                return setIndex(index + 1);\n            }\n\n            if (e.code === 'ArrowUp') {\n                if (index === 0) return null;\n                return setIndex(index - 1);\n            }\n\n            if (e.code === 'Enter') {\n                const answer = messages[index];\n                if (answer) {\n                    if (!chat) {\n                        changeText('');\n                        let message = (answer.message as string).trim();\n\n                        if (conversation.type === 2) {\n                            message = message.replace(\n                                /{FULL_NAME}/gi,\n                                `{${conversation.fbUsername || ''}}`\n                            );\n                        } else {\n                            message = message.replace(\n                                /{FULL_NAME}/gi,\n                                conversation.fbUsername || ''\n                            );\n                        }\n\n                        return changeText(message);\n                    } else {\n                        changeTextChat('');\n                        return changeTextChat(\n                            (answer.message as string)\n                                .trim()\n                                .replace(/{FULL_NAME}/gi, conversation.fbUsername || '')\n                        );\n                    }\n                } else {\n                    toggle();\n                    if (!chat) {\n                        return changeText(`${textFilter}`);\n                    } else {\n                        return changeTextChat(`${textFilter}`);\n                    }\n                }\n            }\n\n            return null;\n        },\n        [index, quickMessage]\n    );\n\n    useEffect(() => {\n        document.addEventListener('keydown', handMoveSelect);\n\n        return () => {\n            document.removeEventListener('keydown', handMoveSelect);\n        };\n    }, [handMoveSelect]);\n\n    const messages = filter(quickMessage, (message: QuickMessageInterface) =>\n        (message.shortcut as string).includes(textFilter.substring(1))\n    );\n\n    return (\n        <div className='quick-messages'>\n            <Row align='middle' justify='space-between' style={{ background: '#eee', padding: 10 }}>\n                <Col>Sử dụng ↑ hoặc ↓ để di chuyển [enter để chọn]</Col>\n                <Col>\n                    <Link to='/customer/other/setting'>\n                        <SettingFilled /> Cài đặt\n                    </Link>\n                </Col>\n            </Row>\n            {messages.map((message: QuickMessageInterface, i: number) => {\n                return (\n                    <QuickMessageItem\n                        chat={chat}\n                        active={index === i}\n                        key={message._id}\n                        message={message}\n                        toggleModal={toggle}\n                        conversation={conversation}\n                        fbUsername={conversation.fbUsername}\n                    />\n                );\n            })}\n        </div>\n    );\n};\n\nexport default QuickmessageList;\n"]},"metadata":{},"sourceType":"module"}