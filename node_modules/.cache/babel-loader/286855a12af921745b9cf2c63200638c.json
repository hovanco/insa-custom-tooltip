{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/products/products-table.tsx\",\n    _s = $RefreshSig$();\n\nimport { CheckOutlined, CloseOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { AutoComplete, Button, Col, Divider, Input, InputNumber, Row, Table } from 'antd';\nimport { flatten, isNumber } from 'lodash';\nimport querystring from 'querystring';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { UploadImage } from '../../components';\nimport { createCategory, deleteProduct, fetchCategory, fetchProducts, updateProduct } from '../../reducers/productState/productAction';\nimport formatMoney, { formatterInput, parserInput } from '../../utils/format-money';\nimport Action from './action';\nimport AddProduct from './add-product';\nimport BtnRemoveProduct from './btn-remove-product';\nimport InputSize from './input-size';\nimport './product-table.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst errorStyle = {\n  borderColor: 'red'\n};\nconst LIMIT = 20;\nconst {\n  Search\n} = Input;\n\nconst ProductsTable = () => {\n  _s();\n\n  const [selectedRowKeys, setSelectedRowKeys] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [textSearch, setTextSearch] = useState('');\n  const [page, setPage] = useState(1);\n  const dispatch = useDispatch();\n  const products = useSelector(({\n    product\n  }) => product.products.data);\n  const total = useSelector(({\n    product\n  }) => product.products.total);\n  const loading = useSelector(({\n    product\n  }) => product.loading);\n  const category = useSelector(({\n    product\n  }) => product.category);\n  const categoryId = useSelector(({\n    product\n  }) => product.categoryId);\n  const [newCategory, setNewCategory] = useState('');\n  const [categoryIdFilter, setCategoryId] = useState('');\n  const [sort, setSort] = useState(null);\n  const options = useMemo(() => {\n    return (category || []).map(item => ({ ...item,\n      value: item.name\n    }));\n  }, [category]);\n  useEffect(() => {\n    if (categoryId) {\n      setCategoryId(categoryId);\n    }\n  }, [categoryId]);\n\n  const onSelect = (value, option) => {\n    setCategoryId(option._id);\n  };\n\n  const filterOption = (inputValue, option) => {\n    return option.value.toUpperCase().indexOf(inputValue.toUpperCase()) !== -1;\n  };\n\n  const onChangeCategory = value => {\n    dispatch(fetchCategory(value));\n    setCategoryId(null);\n    setNewCategory(value);\n  };\n\n  const onCreateCategory = async () => {\n    await dispatch(createCategory(newCategory));\n    setNewCategory('');\n  };\n\n  const [dataSource, setDataSource] = useState((products || []).map(i => ({ ...i,\n    key: i._id\n  })));\n  const [productSelected, setProductSelected] = useState();\n\n  const onChange = e => {\n    const {\n      value,\n      name\n    } = e.target || {};\n\n    if (selected) {\n      setSelected({ ...selected,\n        [name]: value\n      });\n    }\n  };\n\n  const onChangeOriginalPrice = value => {\n    if (selected && isNumber(value)) {\n      setSelected({ ...selected,\n        originalPrice: value\n      });\n    }\n  };\n\n  const onChangePrice = value => {\n    if (selected && isNumber(value)) {\n      setSelected({ ...selected,\n        price: value\n      });\n    }\n  };\n\n  const onChangeWholesalePrice = value => {\n    if (selected && isNumber(value)) {\n      setSelected({ ...selected,\n        wholesalePrice: value\n      });\n    }\n  };\n\n  const onChangeWeight = value => {\n    if (selected && isNumber(value)) {\n      setSelected({ ...selected,\n        weight: value\n      });\n    }\n  };\n\n  const onChangeLength = value => {\n    if (selected && isNumber(value)) {\n      setSelected({ ...selected,\n        length: value\n      });\n    }\n  };\n\n  const onChangeHeight = value => {\n    if (selected && isNumber(value)) {\n      setSelected({ ...selected,\n        height: value\n      });\n    }\n  };\n\n  const onChangeWidth = value => {\n    if (selected && isNumber(value)) {\n      setSelected({ ...selected,\n        width: value\n      });\n    }\n  };\n\n  const searchProduct = value => {\n    dispatch(fetchProducts({\n      textSearch: value.trim(),\n      page: 1,\n      limit: LIMIT,\n      sort\n    }));\n  };\n\n  const refreshProduct = () => {\n    setPage(1);\n    searchProduct(textSearch);\n  };\n\n  const reloadTable = () => {\n    dispatch(fetchProducts({\n      textSearch,\n      page,\n      limit: LIMIT,\n      sort\n    }));\n    setSelectedRowKeys([]);\n  };\n\n  useEffect(() => {\n    dispatch(fetchProducts({\n      page: 1,\n      limit: LIMIT\n    }));\n  }, []);\n  useEffect(() => {\n    setDataSource((products || []).map(i => ({ ...i,\n      key: i._id\n    })));\n  }, [products]);\n\n  const handleImages = async images => {\n    let newImage = [];\n    images.forEach(img => {\n      if (img && img.key) newImage.push(img.key);\n    });\n    const data = {\n      _id: productSelected._id,\n      images: newImage\n    };\n    await dispatch(updateProduct(data));\n    const tempDataSource = products.map(item => {\n      if (item._id === productSelected._id) {\n        item.images = newImage;\n      }\n\n      return item;\n    });\n    productSelected.images = newImage;\n    setDataSource(tempDataSource);\n  };\n\n  const handleTableChange = (pagination, filters, sorter) => {\n    setPage(pagination.current);\n    const columnFilters = flatten([sorter]).filter(col => !!col.order).map(col => ({\n      key: col.columnKey,\n      value: col.order === 'ascend' ? 'asc' : 'desc'\n    }));\n\n    if (columnFilters.length === 0) {\n      setSort(null);\n      dispatch(fetchProducts({\n        textSearch,\n        page: pagination.current,\n        limit: LIMIT\n      }));\n    } else {\n      const objFilter = Object.fromEntries(columnFilters.map(item => [item.key, item.value]));\n      setSort(querystring.stringify(objFilter));\n      dispatch(fetchProducts({\n        textSearch,\n        page: pagination.current,\n        limit: LIMIT,\n        sort: querystring.stringify(objFilter)\n      }));\n    }\n  };\n\n  const columns = [{\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"H\\xECnh \\u1EA3nh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 20\n    }, this),\n    dataIndex: 'images',\n    key: 'img',\n    render: images => /*#__PURE__*/_jsxDEV(UploadImage, {\n      size: 50,\n      img: images.length > 0 ? images[0] : '',\n      handleImages: handleImages,\n      imagesSeleted: images\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }, this)\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"T\\xEAn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'name',\n    sorter: {\n      compare: () => 0,\n      multiple: 0\n    },\n    render: ({\n      name,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        const style = selected.name.length === 0 ? { ...errorStyle,\n          width: 80\n        } : {\n          width: 80\n        };\n        return /*#__PURE__*/_jsxDEV(Input, {\n          name: \"name\",\n          value: selected.name,\n          onChange: onChange,\n          style: style\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 25\n        }, this);\n      }\n\n      return name;\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"M\\xE3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'code',\n    render: ({\n      code,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        const style = {\n          width: 80\n        };\n        return /*#__PURE__*/_jsxDEV(Input, {\n          name: \"code\",\n          value: selected.code,\n          onChange: onChange,\n          style: style\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 25\n        }, this);\n      }\n\n      if (!code) return '';\n      return code;\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"Danh m\\u1EE5c\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'categoryId',\n    render: ({\n      categoryId,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        const style = {\n          width: 100\n        };\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product__table--category\",\n          children: [/*#__PURE__*/_jsxDEV(AutoComplete, {\n            style: style,\n            options: options,\n            onChange: onChangeCategory,\n            onSelect: onSelect,\n            filterOption: filterOption,\n            searchValue: selected.categoryId ? selected.categoryId.name : '',\n            children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 29\n          }, this), category.length === 0 && newCategory.trim().length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: onCreateCategory,\n            className: \"category__item\",\n            children: [\"T\\u1EA1o m\\u1EDBi danh m\\u1EE5c: \", newCategory]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this);\n      }\n\n      if (!categoryId) return '';\n      return categoryId.name;\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"Gi\\xE1 v\\u1ED1n (vnd)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'originalPrice',\n    sorter: {\n      compare: () => 0,\n      multiple: 0\n    },\n    render: ({\n      originalPrice,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        return /*#__PURE__*/_jsxDEV(InputNumber, {\n          name: \"originalPrice\",\n          min: 1,\n          formatter: formatterInput,\n          parser: parserInput,\n          value: selected.originalPrice,\n          onChange: onChangeOriginalPrice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 25\n        }, this);\n      }\n\n      if (!originalPrice) return '';\n      return formatMoney(originalPrice);\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"Gi\\xE1 b\\xE1n (vnd)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'price',\n    sorter: {\n      compare: () => 0,\n      multiple: 0\n    },\n    render: ({\n      price,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        const style = !selected.price ? { ...errorStyle\n        } : {};\n        return /*#__PURE__*/_jsxDEV(InputNumber, {\n          name: \"price\",\n          min: 1,\n          formatter: formatterInput,\n          parser: parserInput,\n          value: selected.price,\n          onChange: onChangePrice,\n          style: style\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 25\n        }, this);\n      }\n\n      if (!price) return '\"';\n      return formatMoney(price);\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"Gi\\xE1 bu\\xF4n (vnd)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'wholesalePrice',\n    sorter: {\n      compare: () => 0,\n      multiple: 0\n    },\n    render: ({\n      wholesalePrice,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        return /*#__PURE__*/_jsxDEV(InputNumber, {\n          name: \"wholesalePrice\",\n          min: 1,\n          formatter: formatterInput,\n          parser: parserInput,\n          value: selected.wholesalePrice,\n          onChange: onChangeWholesalePrice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 25\n        }, this);\n      }\n\n      if (!wholesalePrice) return '';\n      return formatMoney(wholesalePrice);\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"C/d\\xE0i\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'length',\n    align: 'center',\n    sorter: {\n      compare: () => 0,\n      multiple: 0\n    },\n    render: ({\n      length,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        return /*#__PURE__*/_jsxDEV(InputSize, {\n          size: selected.length,\n          changeSize: onChangeLength\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 28\n        }, this);\n      }\n\n      if (!length) return '\"';\n      return length;\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"C/r\\u1ED9ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'width',\n    align: 'center',\n    sorter: {\n      compare: () => 0,\n      multiple: 0\n    },\n    render: ({\n      width,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        return /*#__PURE__*/_jsxDEV(InputSize, {\n          size: selected.width,\n          changeSize: onChangeWidth\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 28\n        }, this);\n      }\n\n      if (!width) return '\"';\n      return width;\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"C/cao\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    key: 'height',\n    align: 'center',\n    sorter: {\n      compare: () => 0,\n      multiple: 0\n    },\n    render: ({\n      height,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        return /*#__PURE__*/_jsxDEV(InputSize, {\n          size: selected.height,\n          changeSize: onChangeHeight\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 28\n        }, this);\n      }\n\n      if (!height) return '\"';\n      return height;\n    }\n  }, {\n    title: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"th\",\n      children: \"KL (gram)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 20\n    }, this),\n    dataIndex: '',\n    align: 'center',\n    key: 'weight',\n    sorter: {\n      compare: () => 0,\n      multiple: 0\n    },\n    render: ({\n      weight,\n      _id\n    }) => {\n      if (selected && selected._id === _id) {\n        const style = selected.weight === 0 ? errorStyle : {};\n        return /*#__PURE__*/_jsxDEV(InputNumber, {\n          value: selected.weight,\n          onChange: onChangeWeight,\n          style: style,\n          min: 10,\n          max: 100000\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 25\n        }, this);\n      }\n\n      if (!weight) return '\"';\n      return weight;\n    }\n  }, {\n    title: '',\n    dataIndex: '',\n    align: 'right',\n    key: 'x',\n    render: product => {\n      const onEdit = () => {\n        product.categoryId && setCategoryId(product.categoryId._id);\n        setSelected(product);\n      };\n\n      const onSave = async () => {\n        if (!categoryIdFilter) {\n          delete selected.categoryId;\n        } else {\n          selected.categoryId = categoryIdFilter;\n        }\n\n        const result = await dispatch(updateProduct({ ...selected,\n          images: productSelected.images\n        }));\n\n        if (!!result) {\n          reloadTable();\n          setSelected(null);\n          setNewCategory('');\n          setCategoryId('');\n        }\n      };\n\n      const removeProduct = () => {\n        dispatch(deleteProduct(product._id));\n      };\n\n      const onCancel = () => {\n        setNewCategory('');\n        setCategoryId('');\n        setSelected(null);\n      };\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        children: selected && selected._id === product._id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: onSave,\n            type: \"primary\",\n            icon: /*#__PURE__*/_jsxDEV(CheckOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 43\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            type: \"vertical\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onCancel,\n            danger: true,\n            type: \"primary\",\n            icon: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 43\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Action, {\n          product: product,\n          removeProduct: removeProduct,\n          onCancel: onCancel,\n          onEdit: onEdit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 21\n      }, this);\n    }\n  }];\n\n  const onSelectChange = selectedRows => {\n    setSelectedRowKeys(selectedRows);\n  };\n\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: onSelectChange\n  };\n\n  const resetSelect = () => {\n    setSelectedRowKeys([]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      style: {\n        marginBottom: 20\n      },\n      justify: \"space-between\",\n      align: \"middle\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          justify: \"space-between\",\n          align: \"middle\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Search // ref={this.searchRef}\n            , {\n              onChange: e => setTextSearch(e.target.value),\n              onSearch: searchProduct,\n              style: {\n                maxWidth: 250\n              },\n              placeholder: \"T\\xECm theo t\\xEAn, m\\xE3 s\\u1EA3n ph\\u1EA9m\",\n              value: textSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: refreshProduct,\n              style: {\n                margin: '0 10px'\n              },\n              icon: /*#__PURE__*/_jsxDEV(ReloadOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 39\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(AddProduct, {\n              reloadTable: reloadTable\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: selectedRowKeys.length > 0 && /*#__PURE__*/_jsxDEV(BtnRemoveProduct, {\n          products: selectedRowKeys,\n          resetSelect: resetSelect,\n          textSearch: textSearch,\n          page: page,\n          limit: LIMIT\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      className: \"product__table\",\n      loading: loading,\n      rowSelection: rowSelection,\n      dataSource: dataSource,\n      columns: columns,\n      onChange: handleTableChange,\n      onRow: r => ({\n        onClick: () => setProductSelected(r)\n      }),\n      rowKey: \"_id\",\n      pagination: {\n        current: page,\n        total,\n        pageSize: LIMIT\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ProductsTable, \"bGuBt/fyVpWAz3Hy0IetS94qofc=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = ProductsTable;\nexport default ProductsTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductsTable\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/products/products-table.tsx"],"names":["CheckOutlined","CloseOutlined","ReloadOutlined","AutoComplete","Button","Col","Divider","Input","InputNumber","Row","Table","flatten","isNumber","querystring","React","useEffect","useMemo","useState","useDispatch","useSelector","UploadImage","createCategory","deleteProduct","fetchCategory","fetchProducts","updateProduct","formatMoney","formatterInput","parserInput","Action","AddProduct","BtnRemoveProduct","InputSize","errorStyle","borderColor","LIMIT","Search","ProductsTable","selectedRowKeys","setSelectedRowKeys","selected","setSelected","textSearch","setTextSearch","page","setPage","dispatch","products","product","data","total","loading","category","categoryId","newCategory","setNewCategory","categoryIdFilter","setCategoryId","sort","setSort","options","map","item","value","name","onSelect","option","_id","filterOption","inputValue","toUpperCase","indexOf","onChangeCategory","onCreateCategory","dataSource","setDataSource","i","key","productSelected","setProductSelected","onChange","e","target","onChangeOriginalPrice","originalPrice","onChangePrice","price","onChangeWholesalePrice","wholesalePrice","onChangeWeight","weight","onChangeLength","length","onChangeHeight","height","onChangeWidth","width","searchProduct","trim","limit","refreshProduct","reloadTable","handleImages","images","newImage","forEach","img","push","tempDataSource","handleTableChange","pagination","filters","sorter","current","columnFilters","filter","col","order","columnKey","objFilter","Object","fromEntries","stringify","columns","title","dataIndex","render","compare","multiple","style","code","align","onEdit","onSave","result","removeProduct","onCancel","display","alignItems","justifyContent","onSelectChange","selectedRows","rowSelection","resetSelect","marginBottom","maxWidth","margin","r","onClick","pageSize"],"mappings":"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","sourcesContent":["import { CheckOutlined, CloseOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { AutoComplete, Button, Col, Divider, Input, InputNumber, Row, Table } from 'antd';\nimport { ColumnsType } from 'antd/lib/table';\nimport { flatten, isNumber } from 'lodash';\nimport querystring from 'querystring';\nimport React, { FC, useEffect, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { IImage } from '../../collections/image';\nimport { IProduct } from '../../collections/product';\nimport { UploadImage } from '../../components';\nimport {\n    createCategory,\n    deleteProduct,\n    fetchCategory,\n    fetchProducts,\n    updateProduct,\n} from '../../reducers/productState/productAction';\nimport formatMoney, { formatterInput, parserInput } from '../../utils/format-money';\nimport Action from './action';\nimport AddProduct from './add-product';\nimport BtnRemoveProduct from './btn-remove-product';\nimport InputSize from './input-size';\nimport './product-table.less';\n\nconst errorStyle = {\n    borderColor: 'red',\n};\n\nconst LIMIT = 20;\nconst { Search } = Input;\n\nconst ProductsTable: FC = (): JSX.Element => {\n    const [selectedRowKeys, setSelectedRowKeys] = useState([]);\n    const [selected, setSelected] = useState<any | null>(null);\n    const [textSearch, setTextSearch] = useState<string>('');\n    const [page, setPage] = useState<number>(1);\n\n    const dispatch = useDispatch();\n    const products: IProduct[] = useSelector(\n        ({ product }: { product: any }) => product.products.data\n    );\n    const total = useSelector(({ product }: { product: any }) => product.products.total);\n    const loading = useSelector(({ product }: { product: any }) => product.loading);\n\n    const category = useSelector(({ product }: { product: any }) => product.category);\n    const categoryId = useSelector(({ product }: { product: any }) => product.categoryId);\n    const [newCategory, setNewCategory] = useState('');\n    const [categoryIdFilter, setCategoryId] = useState<any>('');\n    const [sort, setSort] = useState<any>(null);\n\n    const options = useMemo(() => {\n        return (category || []).map((item: { _id: string; name: string; value?: string }) => ({\n            ...item,\n            value: item.name,\n        }));\n    }, [category]);\n\n    useEffect(() => {\n        if (categoryId) {\n            setCategoryId(categoryId);\n        }\n    }, [categoryId]);\n\n    const onSelect = (value: string, option: any) => {\n        setCategoryId(option._id);\n    };\n\n    const filterOption = (inputValue: string, option: any) => {\n        return option.value.toUpperCase().indexOf(inputValue.toUpperCase()) !== -1;\n    };\n\n    const onChangeCategory = (value: string) => {\n        dispatch(fetchCategory(value));\n        setCategoryId(null);\n        setNewCategory(value);\n    };\n\n    const onCreateCategory = async () => {\n        await dispatch(createCategory(newCategory));\n        setNewCategory('');\n    };\n\n    const [dataSource, setDataSource] = useState(\n        (products || []).map((i: IProduct) => ({\n            ...i,\n            key: i._id,\n        }))\n    );\n    const [productSelected, setProductSelected] = useState<any>();\n\n    const onChange = (e: any) => {\n        const { value, name } = e.target || {};\n        if (selected) {\n            setSelected({ ...selected, [name]: value });\n        }\n    };\n\n    const onChangeOriginalPrice = (value: number | string | undefined) => {\n        if (selected && isNumber(value)) {\n            setSelected({ ...selected, originalPrice: value });\n        }\n    };\n\n    const onChangePrice = (value: number | string | undefined) => {\n        if (selected && isNumber(value)) {\n            setSelected({ ...selected, price: value });\n        }\n    };\n\n    const onChangeWholesalePrice = (value: number | string | undefined) => {\n        if (selected && isNumber(value)) {\n            setSelected({ ...selected, wholesalePrice: value });\n        }\n    };\n\n    const onChangeWeight = (value: number | string | undefined) => {\n        if (selected && isNumber(value)) {\n            setSelected({ ...selected, weight: value });\n        }\n    };\n\n    const onChangeLength = (value: number | string | undefined) => {\n        if (selected && isNumber(value)) {\n            setSelected({ ...selected, length: value });\n        }\n    };\n\n    const onChangeHeight = (value: number | string | undefined) => {\n        if (selected && isNumber(value)) {\n            setSelected({ ...selected, height: value });\n        }\n    };\n\n    const onChangeWidth = (value: number | string | undefined) => {\n        if (selected && isNumber(value)) {\n            setSelected({ ...selected, width: value });\n        }\n    };\n\n    const searchProduct = (value: string) => {\n        dispatch(fetchProducts({ textSearch: value.trim(), page: 1, limit: LIMIT, sort }));\n    };\n\n    const refreshProduct = () => {\n        setPage(1);\n        searchProduct(textSearch);\n    };\n\n    const reloadTable = () => {\n        dispatch(fetchProducts({ textSearch, page, limit: LIMIT, sort }));\n        setSelectedRowKeys([]);\n    };\n\n    useEffect(() => {\n        dispatch(fetchProducts({ page: 1, limit: LIMIT }));\n    }, []);\n\n    useEffect(() => {\n        setDataSource(\n            (products || []).map((i: IProduct) => ({\n                ...i,\n                key: i._id,\n            }))\n        );\n    }, [products]);\n\n    const handleImages = async (images: IImage[]) => {\n        let newImage: string[] = [];\n\n        images.forEach((img) => {\n            if (img && img.key) newImage.push(img.key);\n        });\n        const data = {\n            _id: productSelected._id,\n            images: newImage,\n        };\n        await dispatch(updateProduct(data));\n        const tempDataSource = products.map((item: any) => {\n            if (item._id === productSelected._id) {\n                item.images = newImage;\n            }\n            return item;\n        });\n        productSelected.images = newImage;\n        setDataSource(tempDataSource);\n    };\n\n    const handleTableChange = (pagination: any, filters: any, sorter: any) => {\n        setPage(pagination.current);\n\n        const columnFilters = flatten([sorter])\n            .filter((col: any) => !!col.order)\n            .map((col: any) => ({\n                key: col.columnKey,\n                value: col.order === 'ascend' ? 'asc' : 'desc',\n            }));\n\n        if (columnFilters.length === 0) {\n            setSort(null);\n            dispatch(fetchProducts({ textSearch, page: pagination.current, limit: LIMIT }));\n        } else {\n            const objFilter = Object.fromEntries(\n                columnFilters.map((item) => [item.key, item.value])\n            );\n            setSort(querystring.stringify(objFilter));\n            dispatch(\n                fetchProducts({\n                    textSearch,\n                    page: pagination.current,\n                    limit: LIMIT,\n                    sort: querystring.stringify(objFilter),\n                })\n            );\n        }\n    };\n\n    const columns: ColumnsType<any> | undefined = [\n        {\n            title: <span className='th'>Hình ảnh</span>,\n            dataIndex: 'images',\n            key: 'img',\n            render: (images) => (\n                <UploadImage\n                    size={50}\n                    img={images.length > 0 ? images[0] : ''}\n                    handleImages={handleImages}\n                    imagesSeleted={images}\n                />\n            ),\n        },\n        {\n            title: <span className='th'>Tên</span>,\n            dataIndex: '',\n            key: 'name',\n            sorter: {\n                compare: () => 0,\n                multiple: 0,\n            },\n            render: ({ name, _id }) => {\n                if (selected && selected._id === _id) {\n                    const style =\n                        selected.name.length === 0 ? { ...errorStyle, width: 80 } : { width: 80 };\n\n                    return (\n                        <Input\n                            name='name'\n                            value={selected.name}\n                            onChange={onChange}\n                            style={style}\n                        />\n                    );\n                }\n                return name;\n            },\n        },\n        {\n            title: <span className='th'>Mã</span>,\n            dataIndex: '',\n            key: 'code',\n            render: ({ code, _id }) => {\n                if (selected && selected._id === _id) {\n                    const style = { width: 80 };\n\n                    return (\n                        <Input\n                            name='code'\n                            value={selected.code}\n                            onChange={onChange}\n                            style={style}\n                        />\n                    );\n                }\n\n                if (!code) return '';\n\n                return code;\n            },\n        },\n        {\n            title: <span className='th'>Danh mục</span>,\n            dataIndex: '',\n            key: 'categoryId',\n            render: ({ categoryId, _id }) => {\n                if (selected && selected._id === _id) {\n                    const style = { width: 100 };\n\n                    return (\n                        <div className='product__table--category'>\n                            <AutoComplete\n                                style={style}\n                                options={options}\n                                onChange={onChangeCategory}\n                                onSelect={onSelect}\n                                filterOption={filterOption}\n                                searchValue={selected.categoryId ? selected.categoryId.name : ''}\n                            >\n                                <Input />\n                            </AutoComplete>\n\n                            {category.length === 0 && newCategory.trim().length > 0 && (\n                                <p onClick={onCreateCategory} className='category__item'>\n                                    Tạo mới danh mục: {newCategory}\n                                </p>\n                            )}\n                        </div>\n                    );\n                }\n\n                if (!categoryId) return '';\n\n                return categoryId.name;\n            },\n        },\n        {\n            title: <span className='th'>Giá vốn (vnd)</span>,\n            dataIndex: '',\n            key: 'originalPrice',\n            sorter: {\n                compare: () => 0,\n                multiple: 0,\n            },\n            render: ({ originalPrice, _id }) => {\n                if (selected && selected._id === _id) {\n                    return (\n                        <InputNumber\n                            name='originalPrice'\n                            min={1}\n                            formatter={formatterInput}\n                            parser={parserInput}\n                            value={selected.originalPrice}\n                            onChange={onChangeOriginalPrice}\n                        />\n                    );\n                }\n\n                if (!originalPrice) return '';\n\n                return formatMoney(originalPrice);\n            },\n        },\n        {\n            title: <span className='th'>Giá bán (vnd)</span>,\n            dataIndex: '',\n            key: 'price',\n            sorter: {\n                compare: () => 0,\n                multiple: 0,\n            },\n            render: ({ price, _id }) => {\n                if (selected && selected._id === _id) {\n                    const style = !selected.price ? { ...errorStyle } : {};\n\n                    return (\n                        <InputNumber\n                            name='price'\n                            min={1}\n                            formatter={formatterInput}\n                            parser={parserInput}\n                            value={selected.price}\n                            onChange={onChangePrice}\n                            style={style}\n                        />\n                    );\n                }\n\n                if (!price) return '\"';\n\n                return formatMoney(price);\n            },\n        },\n        {\n            title: <span className='th'>Giá buôn (vnd)</span>,\n            dataIndex: '',\n            key: 'wholesalePrice',\n            sorter: {\n                compare: () => 0,\n                multiple: 0,\n            },\n            render: ({ wholesalePrice, _id }) => {\n                if (selected && selected._id === _id) {\n                    return (\n                        <InputNumber\n                            name='wholesalePrice'\n                            min={1}\n                            formatter={formatterInput}\n                            parser={parserInput}\n                            value={selected.wholesalePrice}\n                            onChange={onChangeWholesalePrice}\n                        />\n                    );\n                }\n                if (!wholesalePrice) return '';\n\n                return formatMoney(wholesalePrice);\n            },\n        },\n        {\n            title: <span className='th'>C/dài</span>,\n            dataIndex: '',\n            key: 'length',\n            align: 'center',\n            sorter: {\n                compare: () => 0,\n                multiple: 0,\n            },\n            render: ({ length, _id }) => {\n                if (selected && selected._id === _id) {\n                    return <InputSize size={selected.length} changeSize={onChangeLength} />;\n                }\n\n                if (!length) return '\"';\n\n                return length;\n            },\n        },\n        {\n            title: <span className='th'>C/rộng</span>,\n            dataIndex: '',\n            key: 'width',\n            align: 'center',\n            sorter: {\n                compare: () => 0,\n                multiple: 0,\n            },\n            render: ({ width, _id }) => {\n                if (selected && selected._id === _id) {\n                    return <InputSize size={selected.width} changeSize={onChangeWidth} />;\n                }\n\n                if (!width) return '\"';\n\n                return width;\n            },\n        },\n        {\n            title: <span className='th'>C/cao</span>,\n            dataIndex: '',\n            key: 'height',\n            align: 'center',\n            sorter: {\n                compare: () => 0,\n                multiple: 0,\n            },\n            render: ({ height, _id }) => {\n                if (selected && selected._id === _id) {\n                    return <InputSize size={selected.height} changeSize={onChangeHeight} />;\n                }\n\n                if (!height) return '\"';\n\n                return height;\n            },\n        },\n\n        {\n            title: <span className='th'>KL (gram)</span>,\n            dataIndex: '',\n            align: 'center',\n            key: 'weight',\n            sorter: {\n                compare: () => 0,\n                multiple: 0,\n            },\n            render: ({ weight, _id }) => {\n                if (selected && selected._id === _id) {\n                    const style = selected.weight === 0 ? errorStyle : {};\n                    return (\n                        <InputNumber\n                            value={selected.weight}\n                            onChange={onChangeWeight}\n                            style={style}\n                            min={10}\n                            max={100000}\n                        />\n                    );\n                }\n\n                if (!weight) return '\"';\n\n                return weight;\n            },\n        },\n        {\n            title: '',\n            dataIndex: '',\n            align: 'right',\n            key: 'x',\n            render: (product) => {\n                const onEdit = () => {\n                    product.categoryId && setCategoryId(product.categoryId._id);\n                    setSelected(product);\n                };\n\n                const onSave = async () => {\n                    if (!categoryIdFilter) {\n                        delete selected.categoryId;\n                    } else {\n                        selected.categoryId = categoryIdFilter;\n                    }\n                    const result = await dispatch(\n                        updateProduct({ ...selected, images: productSelected.images })\n                    );\n                    if (!!result) {\n                        reloadTable();\n                        setSelected(null);\n                        setNewCategory('');\n                        setCategoryId('');\n                    }\n                };\n\n                const removeProduct = () => {\n                    dispatch(deleteProduct(product._id));\n                };\n\n                const onCancel = () => {\n                    setNewCategory('');\n                    setCategoryId('');\n                    setSelected(null);\n                };\n\n                return (\n                    <div\n                        style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}\n                    >\n                        {selected && selected._id === product._id ? (\n                            <>\n                                <Button\n                                    onClick={onSave}\n                                    type='primary'\n                                    icon={<CheckOutlined />}\n                                ></Button>\n\n                                <Divider type='vertical' />\n\n                                <Button\n                                    onClick={onCancel}\n                                    danger\n                                    type='primary'\n                                    icon={<CloseOutlined />}\n                                ></Button>\n                            </>\n                        ) : (\n                            <Action\n                                product={product}\n                                removeProduct={removeProduct}\n                                onCancel={onCancel}\n                                onEdit={onEdit}\n                            />\n                        )}\n                    </div>\n                );\n            },\n        },\n    ];\n\n    const onSelectChange = (selectedRows: any) => {\n        setSelectedRowKeys(selectedRows);\n    };\n\n    const rowSelection = {\n        selectedRowKeys,\n        onChange: onSelectChange,\n    };\n\n    const resetSelect = () => {\n        setSelectedRowKeys([]);\n    };\n\n    return (\n        <>\n            <Row style={{ marginBottom: 20 }} justify='space-between' align='middle'>\n                <Col>\n                    <Row justify='space-between' align='middle'>\n                        <Col>\n                            <Search\n                                // ref={this.searchRef}\n                                onChange={(e) => setTextSearch(e.target.value)}\n                                onSearch={searchProduct}\n                                style={{ maxWidth: 250 }}\n                                placeholder='Tìm theo tên, mã sản phẩm'\n                                value={textSearch}\n                            />\n                        </Col>\n                        <Col>\n                            <Button\n                                onClick={refreshProduct}\n                                style={{ margin: '0 10px' }}\n                                icon={<ReloadOutlined />}\n                            ></Button>\n                        </Col>\n                        <Col>\n                            <AddProduct reloadTable={reloadTable} />\n                        </Col>\n                    </Row>\n                </Col>\n                <Col>\n                    {selectedRowKeys.length > 0 && (\n                        <BtnRemoveProduct\n                            products={selectedRowKeys}\n                            resetSelect={resetSelect}\n                            textSearch={textSearch}\n                            page={page}\n                            limit={LIMIT}\n                        />\n                    )}\n                </Col>\n            </Row>\n\n            <Table\n                className='product__table'\n                loading={loading}\n                rowSelection={rowSelection}\n                dataSource={dataSource}\n                columns={columns}\n                onChange={handleTableChange}\n                onRow={(r) => ({\n                    onClick: () => setProductSelected(r),\n                })}\n                rowKey='_id'\n                pagination={{\n                    current: page,\n                    total,\n                    pageSize: LIMIT,\n                }}\n            />\n        </>\n    );\n};\n\nexport default ProductsTable;\n"]},"metadata":{},"sourceType":"module"}