{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/script-step/demo.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { CheckCircleFilled, CloseCircleFilled, PictureOutlined, UserOutlined } from '@ant-design/icons';\nimport { Avatar, Button, Col, Form, Input, Row, Space, Tag } from 'antd';\nimport { find, isEmpty } from 'lodash';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { SendIcon } from '../../../assets/icon';\nimport constants from '../../../constants';\nimport formatMoney from '../../../utils/format-money';\nimport { generateUrlImgFb } from '../../../utils/generate-url-img-fb';\nimport { useNewLiveStream } from './context';\nimport './demo.less';\nimport { checkRightSyntax } from './util';\nimport { ECreateOrderSyntax } from '../../../collections/livestream-script';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst color = {\n  wrong: '#e3404a',\n  right: '#0fd186'\n}; // avatar user\n\nconst AvatarUser = ({\n  isPage\n}) => {\n  _s();\n\n  const user = useSelector(state => state.auth.user);\n  const pages = useSelector(state => state.fanpage.pages);\n  const {\n    livestream\n  } = useNewLiveStream();\n  const page = find(pages, page => page.fbObjectId === livestream.fbPageId);\n  return /*#__PURE__*/_jsxDEV(Avatar, {\n    src: isPage ? generateUrlImgFb(page.fbObjectId, page.accessToken) : user.picture,\n    icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 19\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n}; // comment row\n\n\n_s(AvatarUser, \"I63L/M5ItLJG1OFz9xwCgO45aq8=\", false, function () {\n  return [useSelector, useSelector, useNewLiveStream];\n});\n\n_c = AvatarUser;\n\nconst CommentRow = ({\n  comment\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"demo-comment\",\n    style: {\n      flexDirection: comment.isPage ? 'row-reverse' : 'row',\n      alignItems: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(AvatarUser, {\n      isPage: comment.isPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-comment\",\n      style: {\n        alignItems: comment.isPage ? 'flex-end' : 'flex-start'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: comment.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}; // box comment\n\n\n_c2 = CommentRow;\n\nconst BoxComment = ({\n  sendComment\n}) => {\n  _s2();\n\n  const [form] = Form.useForm();\n\n  const onFinish = values => {\n    if (values.comment.length > 0) {\n      sendComment({\n        id: Date.now(),\n        text: values.comment\n      });\n      form.resetFields();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onFinish: onFinish,\n    form: form,\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      gutter: 15,\n      align: \"middle\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(AvatarUser, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        style: {\n          flex: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          style: {\n            margin: 0\n          },\n          name: \"comment\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Vi\\u1EBFt b\\xECnh lu\\u1EADn t\\u1EA1i \\u0111\\xE2y\",\n            className: \"input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          htmlType: \"submit\",\n          icon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 31\n          }, this),\n          style: {\n            border: 'none',\n            padding: 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n}; // wrong syntax\n\n\n_s2(BoxComment, \"rI7DrJIrFu7YmlGWYiMFTzs8jF0=\", false, function () {\n  return [Form.useForm];\n});\n\n_c3 = BoxComment;\n\nconst WrongSyntax = () => /*#__PURE__*/_jsxDEV(_Fragment, {\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"status\",\n    style: {\n      color: color.wrong\n    },\n    children: /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(CloseCircleFilled, {\n        style: {\n          fontSize: 30\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Kh\\xF4ng t\\u1EA1o \\u0111\\u01B0\\u1EE3c \\u0111\\u01A1n h\\xE0ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    children: \"B\\xECnh lu\\u1EADn ch\\u01B0a \\u0111\\xFAng c\\xFA ph\\xE1p\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this)]\n}, void 0, true); // product row\n\n\n_c4 = WrongSyntax;\n\nconst ProductRow = ({\n  product\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-row\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      gutter: 15,\n      align: \"middle\",\n      justify: \"space-between\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            shape: \"square\",\n            src: `${constants.URL_IMG}${product.images[0]}`,\n            icon: /*#__PURE__*/_jsxDEV(PictureOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 35\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: [formatMoney(product.price), \" \\u0111\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 9\n  }, this);\n}; // demo\n\n\n_c5 = ProductRow;\n\nconst Demo = props => {\n  _s3();\n\n  const user = useSelector(state => state.auth.user);\n  const pages = useSelector(state => state.fanpage.pages);\n  const {\n    livestream\n  } = useNewLiveStream();\n  const [comments, setComments] = useState([]);\n  const [lastComment, setLastComment] = useState({\n    id: 1,\n    text: ''\n  });\n  const noComment = comments.length === 0;\n\n  const renderComments = () => {\n    return comments.map(comment => {\n      return /*#__PURE__*/_jsxDEV(CommentRow, {\n        comment: comment\n      }, comment.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 20\n      }, this);\n    });\n  };\n\n  const page = find(pages, page => page.fbObjectId === livestream.fbPageId);\n\n  const renderSyntax = () => {\n    return /*#__PURE__*/_jsxDEV(Space, {\n      direction: \"vertical\",\n      children: livestream.keywords.map(keyword => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Tag, {\n          children: keyword.keyword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this), livestream.syntax === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"+ \", /*#__PURE__*/_jsxDEV(Tag, {\n            children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true)]\n      }, keyword.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, this);\n  };\n\n  const sendComment = comment => {\n    setLastComment(comment);\n    setComments(prev => [...prev, comment]);\n    const {\n      valid,\n      phoneNo,\n      products\n    } = checkRightSyntax({\n      keywords: livestream.keywords,\n      text: comment.text,\n      syntax: livestream.syntax\n    });\n    const newComment = {\n      id: Date.now() + 1,\n      text: '',\n      isPage: true\n    };\n\n    if (valid) {\n      if (livestream.messageTemplate) {\n        newComment.text = `${(livestream.messageTemplate || '').replace(/{{Name}}/g, `${user.name}`)}`;\n        return setComments(prev => [...prev, newComment]);\n      }\n\n      return;\n    }\n\n    if (livestream.syntax === ECreateOrderSyntax.Keyword) return;\n\n    if (!phoneNo && !isEmpty(products) && livestream.messageTemplateForWrongPhoneNo) {\n      const text = `${livestream.messageTemplateForWrongPhoneNo}`.replace(/{{Name}}/g, `${user.name}`).replace(/{{comment livestream}}/g, `${comment.text}`);\n      newComment.text = text;\n      return setComments(prev => [...prev, newComment]);\n    }\n\n    if (phoneNo && isEmpty(products) && livestream.messageTemplateForWrongKeyword) {\n      const text = `${livestream.messageTemplateForWrongKeyword}`.replace(/{{Name}}/g, `${user.name}`).replace(/{{comment livestream}}/g, `${comment.text}`);\n      newComment.text = text;\n      setComments(prev => [...prev, newComment]);\n    }\n  };\n\n  const renderStatus = () => {\n    const {\n      valid,\n      products\n    } = checkRightSyntax({\n      keywords: livestream.keywords,\n      text: lastComment.text,\n      syntax: livestream.syntax\n    });\n\n    if (!valid) {\n      return /*#__PURE__*/_jsxDEV(WrongSyntax, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Space, {\n      direction: \"vertical\",\n      style: {\n        width: '100%'\n      },\n      size: 15,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status\",\n        style: {\n          color: color.right\n        },\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          children: [/*#__PURE__*/_jsxDEV(CheckCircleFilled, {\n            style: {\n              fontSize: 30\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"T\\u1EA1o \\u0111\\u01A1n h\\xE0ng th\\xE0nh c\\xF4ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products\",\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          direction: \"vertical\",\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"S\\u1EA3n ph\\u1EA9m trong \\u0111\\u01A1n:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: products === null || products === void 0 ? void 0 : products.map(product => {\n              const productData = { ...product,\n                ...product.productId\n              };\n              return /*#__PURE__*/_jsxDEV(ProductRow, {\n                product: productData\n              }, productData._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 40\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"demo\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: '100%'\n            },\n            src: \"https://socials.sapoapps.vn/images/demo-img-live.png\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"process-comment\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            gutter: 15,\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              span: noComment ? 24 : 8,\n              style: {\n                textAlign: 'center'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"demo-gif\",\n                src: \"https://socials.sapoapps.vn/images/icon-demo-livestream.gif\",\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 29\n            }, this), !noComment && /*#__PURE__*/_jsxDEV(Col, {\n              span: 16,\n              children: /*#__PURE__*/_jsxDEV(Space, {\n                style: {\n                  width: '100%'\n                },\n                direction: \"vertical\",\n                size: 20,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"process-comment-title\",\n                  children: [\"H\\u1EC7 th\\u1ED1ng \\u0111\\xE3 x\\u1EED l\\xFD xong b\\xECnh lu\\u1EADn c\\u1EE7a \", user.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-comment\",\n                  children: lastComment.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"process-comment-order\",\n                  children: renderStatus()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        style: {\n          width: '40%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"test-comment\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"page-content\",\n            children: /*#__PURE__*/_jsxDEV(Space, {\n              size: 15,\n              style: {\n                width: '100%'\n              },\n              direction: \"vertical\",\n              children: [/*#__PURE__*/_jsxDEV(Space, {\n                children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                  src: generateUrlImgFb(page.fbObjectId, page.accessToken)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: page.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"B\\u1EA1n c\\xF3 th\\u1EC3 \\u0111\\u1EC3 l\\u1EA1i b\\xECnh lu\\u1EADn theo m\\u1ED9t trong nh\\u1EEFng c\\xFA ph\\xE1p sau \\u0111\\u1EC3 \\u0111\\u1EB7t mua s\\u1EA3n ph\\u1EA9m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 33\n              }, this), renderSyntax()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comments-list\",\n            children: /*#__PURE__*/_jsxDEV(Space, {\n              style: {\n                width: '100%'\n              },\n              direction: \"vertical\",\n              children: renderComments()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comments-editor\",\n            children: /*#__PURE__*/_jsxDEV(BoxComment, {\n              sendComment: sendComment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 9\n  }, this);\n};\n\n_s3(Demo, \"vCEZsKhBfpue3CNUbWS3Umupn2I=\", false, function () {\n  return [useSelector, useSelector, useNewLiveStream];\n});\n\n_c6 = Demo;\nexport default Demo;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"AvatarUser\");\n$RefreshReg$(_c2, \"CommentRow\");\n$RefreshReg$(_c3, \"BoxComment\");\n$RefreshReg$(_c4, \"WrongSyntax\");\n$RefreshReg$(_c5, \"ProductRow\");\n$RefreshReg$(_c6, \"Demo\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/script-step/demo.tsx"],"names":["CheckCircleFilled","CloseCircleFilled","PictureOutlined","UserOutlined","Avatar","Button","Col","Form","Input","Row","Space","Tag","find","isEmpty","React","useState","useSelector","SendIcon","constants","formatMoney","generateUrlImgFb","useNewLiveStream","checkRightSyntax","ECreateOrderSyntax","color","wrong","right","AvatarUser","isPage","user","state","auth","pages","fanpage","livestream","page","fbObjectId","fbPageId","accessToken","picture","CommentRow","comment","flexDirection","alignItems","text","BoxComment","sendComment","form","useForm","onFinish","values","length","id","Date","now","resetFields","flex","margin","border","padding","WrongSyntax","fontSize","ProductRow","product","URL_IMG","images","name","price","Demo","props","comments","setComments","lastComment","setLastComment","noComment","renderComments","map","renderSyntax","keywords","keyword","syntax","prev","valid","phoneNo","products","newComment","messageTemplate","replace","Keyword","messageTemplateForWrongPhoneNo","messageTemplateForWrongKeyword","renderStatus","width","productData","productId","_id","textAlign"],"mappings":"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","sourcesContent":["import {\n    CheckCircleFilled,\n    CloseCircleFilled,\n    PictureOutlined,\n    UserOutlined,\n} from '@ant-design/icons';\nimport { Avatar, Button, Col, Form, Input, Row, Space, Tag } from 'antd';\nimport { Store } from 'antd/lib/form/interface';\nimport { find, isArray, isEmpty } from 'lodash';\nimport React, { FC, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { SendIcon } from '../../../assets/icon';\nimport constants from '../../../constants';\nimport formatMoney from '../../../utils/format-money';\nimport { generateUrlImgFb } from '../../../utils/generate-url-img-fb';\nimport { useNewLiveStream } from './context';\nimport './demo.less';\nimport { checkRightSyntax } from './util';\nimport { ECreateOrderSyntax } from '../../../collections/livestream-script';\n\ninterface IComment {\n    id: number;\n    text: string;\n}\n\nconst color = {\n    wrong: '#e3404a',\n    right: '#0fd186',\n};\n\n// avatar user\nconst AvatarUser = ({ isPage }: { isPage?: boolean }) => {\n    const user = useSelector((state: any) => state.auth.user);\n    const pages = useSelector((state: any) => state.fanpage.pages);\n\n    const { livestream } = useNewLiveStream();\n\n    const page = find(pages, (page: any) => page.fbObjectId === livestream.fbPageId);\n\n    return (\n        <Avatar\n            src={isPage ? generateUrlImgFb(page.fbObjectId, page.accessToken) : user.picture}\n            icon={<UserOutlined />}\n        />\n    );\n};\n\n// comment row\ninterface CommentRowProps {\n    comment: {\n        text: string;\n        isPage?: boolean;\n    };\n}\n\nconst CommentRow: FC<CommentRowProps> = ({ comment }) => {\n    return (\n        <div\n            className='demo-comment'\n            style={{\n                flexDirection: comment.isPage ? 'row-reverse' : 'row',\n                alignItems: 'center',\n            }}\n        >\n            <AvatarUser isPage={comment.isPage} />\n            <div\n                className='text-comment'\n                style={{\n                    alignItems: comment.isPage ? 'flex-end' : 'flex-start',\n                }}\n            >\n                <span>{comment.text}</span>\n            </div>\n        </div>\n    );\n};\n\n// box comment\ninterface BoxCommentProps {\n    sendComment: (comment: IComment) => void;\n}\n\nconst BoxComment: FC<BoxCommentProps> = ({ sendComment }) => {\n    const [form] = Form.useForm();\n    const onFinish = (values: Store) => {\n        if (values.comment.length > 0) {\n            sendComment({\n                id: Date.now(),\n                text: values.comment,\n            });\n            form.resetFields();\n        }\n    };\n\n    return (\n        <Form onFinish={onFinish} form={form}>\n            <Row gutter={15} align='middle'>\n                <Col>\n                    <AvatarUser />\n                </Col>\n                <Col style={{ flex: 1 }}>\n                    <Form.Item style={{ margin: 0 }} name='comment'>\n                        <Input placeholder='Viết bình luận tại đây' className='input' />\n                    </Form.Item>\n                </Col>\n                <Col>\n                    <Button\n                        htmlType='submit'\n                        icon={<SendIcon />}\n                        style={{ border: 'none', padding: 0 }}\n                    />\n                </Col>\n            </Row>\n        </Form>\n    );\n};\n\n// wrong syntax\nconst WrongSyntax = () => (\n    <>\n        <div className='status' style={{ color: color.wrong }}>\n            <Space>\n                <CloseCircleFilled style={{ fontSize: 30 }} />\n                <span>Không tạo được đơn hàng</span>\n            </Space>\n        </div>\n\n        <span>Bình luận chưa đúng cú pháp</span>\n    </>\n);\n\n// product row\ninterface ProductRowProps {\n    product: {\n        _id: string;\n        images: string[];\n        name: string;\n        price: number;\n    };\n}\nconst ProductRow: FC<ProductRowProps> = ({ product }) => {\n    return (\n        <div className='product-row'>\n            <Row gutter={15} align='middle' justify='space-between'>\n                <Col>\n                    <Space>\n                        <Avatar\n                            shape='square'\n                            src={`${constants.URL_IMG}${product.images[0]}`}\n                            icon={<PictureOutlined />}\n                        />\n                        <span>{product.name}</span>\n                    </Space>\n                </Col>\n\n                <Col>{formatMoney(product.price)} đ</Col>\n            </Row>\n        </div>\n    );\n};\n\n// demo\ninterface Props {}\n\nconst Demo = (props: Props) => {\n    const user = useSelector((state: any) => state.auth.user);\n    const pages = useSelector((state: any) => state.fanpage.pages);\n    const { livestream } = useNewLiveStream();\n\n    const [comments, setComments] = useState<any[]>([]);\n    const [lastComment, setLastComment] = useState<IComment>({ id: 1, text: '' });\n\n    const noComment = comments.length === 0;\n\n    const renderComments = () => {\n        return comments.map((comment: IComment) => {\n            return <CommentRow key={comment.id} comment={comment} />;\n        });\n    };\n\n    const page = find(pages, (page: any) => page.fbObjectId === livestream.fbPageId);\n\n    const renderSyntax = () => {\n        return (\n            <Space direction='vertical'>\n                {livestream.keywords.map((keyword: any) => (\n                    <div key={keyword.id}>\n                        <Tag>{keyword.keyword}</Tag>\n                        {livestream.syntax === 1 && (\n                            <>\n                                + <Tag>Số điện thoại</Tag>\n                            </>\n                        )}\n                    </div>\n                ))}\n            </Space>\n        );\n    };\n\n    const sendComment = (comment: IComment) => {\n        setLastComment(comment);\n        setComments((prev) => [...prev, comment]);\n\n        const { valid, phoneNo, products } = checkRightSyntax({\n            keywords: livestream.keywords,\n            text: comment.text,\n            syntax: livestream.syntax,\n        });\n\n        const newComment = { id: Date.now() + 1, text: '', isPage: true };\n\n        if (valid) {\n            if (livestream.messageTemplate) {\n                newComment.text = `${(livestream.messageTemplate || '').replace(\n                    /{{Name}}/g,\n                    `${user.name}`\n                )}`;\n\n                return setComments((prev) => [...prev, newComment]);\n            }\n\n            return;\n        }\n\n        if (livestream.syntax === ECreateOrderSyntax.Keyword) return;\n\n        if (!phoneNo && !isEmpty(products) && livestream.messageTemplateForWrongPhoneNo) {\n            const text = `${livestream.messageTemplateForWrongPhoneNo}`\n                .replace(/{{Name}}/g, `${user.name}`)\n                .replace(/{{comment livestream}}/g, `${comment.text}`);\n\n            newComment.text = text;\n            return setComments((prev) => [...prev, newComment]);\n        }\n\n        if (phoneNo && isEmpty(products) && livestream.messageTemplateForWrongKeyword) {\n            const text = `${livestream.messageTemplateForWrongKeyword}`\n                .replace(/{{Name}}/g, `${user.name}`)\n                .replace(/{{comment livestream}}/g, `${comment.text}`);\n\n            newComment.text = text;\n            setComments((prev) => [...prev, newComment]);\n        }\n    };\n\n    const renderStatus = () => {\n        const { valid, products } = checkRightSyntax({\n            keywords: livestream.keywords,\n            text: lastComment.text,\n            syntax: livestream.syntax,\n        });\n\n        if (!valid) {\n            return <WrongSyntax />;\n        }\n\n        return (\n            <Space direction='vertical' style={{ width: '100%' }} size={15}>\n                <div className='status' style={{ color: color.right }}>\n                    <Space>\n                        <CheckCircleFilled style={{ fontSize: 30 }} />\n                        <span>Tạo đơn hàng thành công</span>\n                    </Space>\n                </div>\n\n                <div className='products'>\n                    <Space direction='vertical' style={{ width: '100%' }}>\n                        <div>Sản phẩm trong đơn:</div>\n\n                        <div>\n                            {products?.map((product: any) => {\n                                const productData = { ...product, ...product.productId };\n\n                                return <ProductRow product={productData} key={productData._id} />;\n                            })}\n                        </div>\n                    </Space>\n                </div>\n            </Space>\n        );\n    };\n\n    return (\n        <div className='demo'>\n            <Row>\n                <Col style={{ flex: 1 }}>\n                    <div>\n                        <img\n                            style={{ width: '100%' }}\n                            src='https://socials.sapoapps.vn/images/demo-img-live.png'\n                            alt=''\n                        />\n                    </div>\n\n                    <div className='process-comment'>\n                        <Row gutter={15}>\n                            <Col span={noComment ? 24 : 8} style={{ textAlign: 'center' }}>\n                                <img\n                                    className='demo-gif'\n                                    src='https://socials.sapoapps.vn/images/icon-demo-livestream.gif'\n                                    alt=''\n                                />\n                            </Col>\n                            {!noComment && (\n                                <Col span={16}>\n                                    <Space style={{ width: '100%' }} direction='vertical' size={20}>\n                                        <div className='process-comment-title'>\n                                            Hệ thống đã xử lý xong bình luận của {user.name}\n                                        </div>\n                                        <div className='text-comment'>{lastComment.text}</div>\n\n                                        <div className='process-comment-order'>\n                                            {renderStatus()}\n                                        </div>\n                                    </Space>\n                                </Col>\n                            )}\n                        </Row>\n                    </div>\n                </Col>\n                <Col style={{ width: '40%' }}>\n                    <div className='test-comment'>\n                        <div className='page-content'>\n                            <Space size={15} style={{ width: '100%' }} direction='vertical'>\n                                <Space>\n                                    <Avatar\n                                        src={generateUrlImgFb(page.fbObjectId, page.accessToken)}\n                                    />\n                                    <span>{page.name}</span>\n                                </Space>\n                                <div>\n                                    Bạn có thể để lại bình luận theo một trong những cú pháp sau để\n                                    đặt mua sản phẩm\n                                </div>\n                                {renderSyntax()}\n                            </Space>\n                        </div>\n\n                        <div className='comments-list'>\n                            <Space style={{ width: '100%' }} direction='vertical'>\n                                {renderComments()}\n                            </Space>\n                        </div>\n\n                        <div className='comments-editor'>\n                            <BoxComment sendComment={sendComment} />\n                        </div>\n                    </div>\n                </Col>\n            </Row>\n        </div>\n    );\n};\n\nexport default Demo;\n"]},"metadata":{},"sourceType":"module"}