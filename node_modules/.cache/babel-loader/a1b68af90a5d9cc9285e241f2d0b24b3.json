{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-detail/index.tsx\",\n    _s = $RefreshSig$();\n\nimport 'emoji-mart/css/emoji-mart.css';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getDetailPost } from '../../../api/conversation-api';\nimport { loadConversations, removeConversations } from '../../../reducers/fanpageState/fanpageAction';\nimport { useExpriedPackage } from '../../customer/expried-package-context';\nimport { ProviderContext } from './context';\nimport ConversationDetailAction from './conversation-detail-action';\nimport ConversationDetailList from './conversation-detail-list';\nimport ConversationDetailTop from './conversation-detail-top';\nimport Labels from './labels';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ConversationDetail = () => {\n  _s();\n\n  const {\n    isExpired,\n    isTrial\n  } = useExpriedPackage();\n  const [contentPost, setContentPost] = useState({});\n  const [loadingContent, setLoadingContent] = useState(false);\n  const conversation = useSelector(({\n    fanpage\n  }) => fanpage.conversation);\n  const store = useSelector(({\n    store\n  }) => store.store);\n  const token = useSelector(({\n    auth\n  }) => auth.token);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!conversation) return;\n    updateContentPost();\n  }, [conversation]);\n\n  if (!conversation) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversation-detail\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 16\n    }, this);\n  }\n\n  const updateContentPost = async () => {\n    try {\n      if (conversation.type === 2 && conversation.postId) {\n        setLoadingContent(true);\n        const result = await getDetailPost({\n          postId: conversation.postId,\n          fbPageId: conversation.fbPageId,\n          storeId: store._id,\n          token: token.accessToken\n        });\n        setContentPost(result);\n        setLoadingContent(false);\n      }\n    } catch (error) {\n      setLoadingContent(false);\n    }\n  };\n\n  const filterConversation = () => {\n    if (conversation.type === 2 && conversation.postId) {\n      let fbPageId;\n\n      if (store.activePage) {\n        fbPageId = store.activePage.fbObjectId;\n      }\n\n      dispatch(removeConversations());\n      dispatch(loadConversations(`type=2&postId=${conversation.postId}`, [fbPageId]));\n    }\n  };\n\n  const HEIGHT = `calc(100vh - ${isExpired || isTrial ? '140px' : '75px'}`;\n  return /*#__PURE__*/_jsxDEV(ProviderContext, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversation-detail\",\n      style: {\n        height: HEIGHT\n      },\n      children: [/*#__PURE__*/_jsxDEV(ConversationDetailTop, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ConversationDetailList, {\n        loadingContent: loadingContent,\n        contentPost: contentPost,\n        updateContentPost: updateContentPost,\n        filterConversation: filterConversation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Labels, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ConversationDetailAction, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ConversationDetail, \"cOGef0sJ8WGPyvesBtKEaIPbVU4=\", false, function () {\n  return [useExpriedPackage, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = ConversationDetail;\nexport default ConversationDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConversationDetail\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-detail/index.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","getDetailPost","loadConversations","removeConversations","useExpriedPackage","ProviderContext","ConversationDetailAction","ConversationDetailList","ConversationDetailTop","Labels","ConversationDetail","isExpired","isTrial","contentPost","setContentPost","loadingContent","setLoadingContent","conversation","fanpage","store","token","auth","dispatch","updateContentPost","type","postId","result","fbPageId","storeId","_id","accessToken","error","filterConversation","activePage","fbObjectId","HEIGHT","height"],"mappings":"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","sourcesContent":["import 'emoji-mart/css/emoji-mart.css';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getDetailPost } from '../../../api/conversation-api';\nimport { IAuthState } from '../../../reducers/authState/authReducer';\nimport {\n    loadConversations,\n    removeConversations,\n} from '../../../reducers/fanpageState/fanpageAction';\nimport { IConversation, IFacebookState } from '../../../reducers/fanpageState/fanpageReducer';\nimport { IStoreState } from '../../../reducers/storeState/storeReducer';\nimport { useExpriedPackage } from '../../customer/expried-package-context';\nimport { ProviderContext } from './context';\nimport ConversationDetailAction from './conversation-detail-action';\nimport ConversationDetailList from './conversation-detail-list';\nimport ConversationDetailTop from './conversation-detail-top';\nimport Labels from './labels';\n\nconst ConversationDetail: FC = (): JSX.Element => {\n    const { isExpired, isTrial } = useExpriedPackage();\n    const [contentPost, setContentPost] = useState({});\n    const [loadingContent, setLoadingContent] = useState(false);\n\n    const conversation: IConversation = useSelector(\n        ({ fanpage }: { fanpage: IFacebookState }) => fanpage.conversation,\n    );\n\n    const store = useSelector(({ store }: { store: IStoreState }) => store.store);\n\n    const token: any = useSelector(({ auth }: { auth: IAuthState }) => auth.token);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (!conversation) return;\n        updateContentPost();\n    }, [conversation]);\n\n    if (!conversation) {\n        return <div className='conversation-detail' />;\n    }\n\n    const updateContentPost = async () => {\n        try {\n            if (conversation.type === 2 && conversation.postId) {\n                setLoadingContent(true);\n                const result = await getDetailPost({\n                    postId: conversation.postId,\n                    fbPageId: conversation.fbPageId,\n                    storeId: store._id,\n                    token: token.accessToken,\n                });\n                setContentPost(result);\n                setLoadingContent(false);\n            }\n        } catch (error) {\n            setLoadingContent(false);\n        }\n    };\n\n    const filterConversation = () => {\n        if (conversation.type === 2 && conversation.postId) {\n            let fbPageId;\n            if (store.activePage) {\n                fbPageId = store.activePage.fbObjectId;\n            }\n            dispatch(removeConversations());\n            dispatch(loadConversations(`type=2&postId=${conversation.postId}`, [fbPageId]));\n        }\n    };\n\n    const HEIGHT = `calc(100vh - ${isExpired || isTrial ? '140px' : '75px'}`;\n\n    return (\n        <ProviderContext>\n            <div className='conversation-detail' style={{ height: HEIGHT }}>\n                <ConversationDetailTop />\n                <ConversationDetailList\n                    loadingContent={loadingContent}\n                    contentPost={contentPost}\n                    updateContentPost={updateContentPost}\n                    filterConversation={filterConversation}\n                />\n\n                <Labels />\n                <ConversationDetailAction />\n            </div>\n        </ProviderContext>\n    );\n};\nexport default ConversationDetail;\n"]},"metadata":{},"sourceType":"module"}