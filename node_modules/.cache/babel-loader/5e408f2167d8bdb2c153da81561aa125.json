{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/members/edit-member-form.tsx\",\n    _s = $RefreshSig$();\n\nimport { EditFilled } from '@ant-design/icons';\nimport { Button, Form, Input, message, Modal, Select } from 'antd';\nimport { map } from 'lodash';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport staffApi from '../../api/staff-api';\nimport useModal from '../../hooks/use-modal';\nimport { updateStaff } from '../../reducers/staffState/staffAction';\nimport roles from './roles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst EditMemberForm = ({\n  staff\n}) => {\n  _s();\n\n  const {\n    visible,\n    toggle\n  } = useModal();\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n\n  const reset = () => form.resetFields();\n\n  const token = useSelector(state => state.auth.token);\n  const store = useSelector(state => state.store.store);\n\n  const onFinish = async values => {\n    setLoading(true);\n\n    try {\n      const response = await staffApi.updateStaff({\n        storeId: store._id,\n        token: token.accessToken,\n        staffId: staff._id,\n        data: {\n          role: values.role,\n          name: values.name\n        }\n      });\n      dispatch(updateStaff({\n        _id: staff._id,\n        name: values.name,\n        role: values.role\n      }));\n      setLoading(false);\n      message.success('Chỉnh sửa nhân viên thành công');\n      toggle();\n    } catch (error) {\n      setLoading(false);\n      message.error('Lỗi chỉnh sửa nhân viên');\n    }\n  };\n\n  const closeModal = () => {\n    toggle();\n    reset();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      icon: /*#__PURE__*/_jsxDEV(EditFilled, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 27\n      }, this),\n      onClick: toggle,\n      style: {\n        marginLeft: '10px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      visible: visible,\n      onCancel: closeModal,\n      title: \"Ch\\u1EC9nh s\\u1EEDa nh\\xE2n vi\\xEAn\",\n      footer: null,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        layout: \"vertical\",\n        form: form,\n        onFinish: onFinish,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"T\\xEAn\",\n          name: \"name\",\n          initialValue: staff.name,\n          rules: [{\n            required: true,\n            message: 'Điền tên nhân viên'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"T\\xEAn nh\\xE2n vi\\xEAn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"V\\u1ECB tr\\xED\",\n          name: \"role\",\n          initialValue: staff.role,\n          rules: [{\n            required: true,\n            message: 'Chọn vị trí cho nhân viên'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"Ch\\u1ECDn v\\u1ECB tr\\xED\",\n            children: map(roles, role => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: role.id,\n              children: role.title\n            }, role.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            htmlType: \"button\",\n            onClick: closeModal,\n            style: {\n              marginRight: 15\n            },\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            loading: loading,\n            children: \"L\\u01B0u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(EditMemberForm, \"abpPbZ/p172WLwg2DtMuyAUaWNQ=\", false, function () {\n  return [useModal, useDispatch, Form.useForm, useSelector, useSelector];\n});\n\n_c = EditMemberForm;\nexport default EditMemberForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditMemberForm\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/members/edit-member-form.tsx"],"names":["EditFilled","Button","Form","Input","message","Modal","Select","map","React","useState","useDispatch","useSelector","staffApi","useModal","updateStaff","roles","EditMemberForm","staff","visible","toggle","dispatch","form","useForm","loading","setLoading","reset","resetFields","token","state","auth","store","onFinish","values","response","storeId","_id","accessToken","staffId","data","role","name","success","error","closeModal","marginLeft","required","id","title","marginRight"],"mappings":"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","sourcesContent":["import { EditFilled } from '@ant-design/icons';\nimport { Button, Form, Input, message, Modal, Select } from 'antd';\nimport { map } from 'lodash';\nimport React, { FC, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport staffApi from '../../api/staff-api';\nimport useModal from '../../hooks/use-modal';\nimport { updateStaff } from '../../reducers/staffState/staffAction';\nimport { IStaff } from '../../reducers/staffState/staffReducer';\nimport roles, { IRole } from './roles';\n\ninterface Props {\n    staff: IStaff;\n}\n\nconst EditMemberForm: FC<Props> = ({ staff }) => {\n    const { visible, toggle } = useModal();\n    const dispatch = useDispatch();\n    const [form] = Form.useForm();\n    const [loading, setLoading] = useState(false);\n\n    const reset = () => form.resetFields();\n    const token = useSelector((state: any) => state.auth.token);\n    const store = useSelector((state: any) => state.store.store);\n\n    const onFinish = async (values: any) => {\n        setLoading(true);\n        try {\n            const response = await staffApi.updateStaff({\n                storeId: store._id,\n                token: token.accessToken,\n                staffId: staff._id,\n                data: {\n                    role: values.role,\n                    name: values.name,\n                },\n            });\n\n            dispatch(\n                updateStaff({\n                    _id: staff._id,\n                    name: values.name,\n                    role: values.role,\n                })\n            );\n\n            setLoading(false);\n            message.success('Chỉnh sửa nhân viên thành công');\n            toggle();\n        } catch (error) {\n            setLoading(false);\n            message.error('Lỗi chỉnh sửa nhân viên');\n        }\n    };\n\n    const closeModal = () => {\n        toggle();\n        reset();\n    };\n\n    return (\n        <>\n            <Button icon={<EditFilled />} onClick={toggle} style={{ marginLeft: '10px' }} />\n\n            <Modal\n                visible={visible}\n                onCancel={closeModal}\n                title='Chỉnh sửa nhân viên'\n                footer={null}\n            >\n                <Form layout='vertical' form={form} onFinish={onFinish}>\n                    <Form.Item\n                        label='Tên'\n                        name='name'\n                        initialValue={staff.name}\n                        rules={[{ required: true, message: 'Điền tên nhân viên' }]}\n                    >\n                        <Input placeholder='Tên nhân viên' />\n                    </Form.Item>\n\n                    <Form.Item\n                        label='Vị trí'\n                        name='role'\n                        initialValue={staff.role}\n                        rules={[\n                            {\n                                required: true,\n                                message: 'Chọn vị trí cho nhân viên',\n                            },\n                        ]}\n                    >\n                        <Select placeholder='Chọn vị trí'>\n                            {map(roles, (role: IRole) => (\n                                <Select.Option value={role.id} key={role.id}>\n                                    {role.title}\n                                </Select.Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n                    <Form.Item>\n                        <Button htmlType='button' onClick={closeModal} style={{ marginRight: 15 }}>\n                            Hủy\n                        </Button>\n                        <Button type='primary' htmlType='submit' loading={loading}>\n                            Lưu\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        </>\n    );\n};\n\nexport default EditMemberForm;\n"]},"metadata":{},"sourceType":"module"}