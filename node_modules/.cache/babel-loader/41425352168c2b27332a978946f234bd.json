{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/script-step/edit-keyword.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNewLiveStream } from './context';\nimport useModal from '../../../hooks/use-modal';\nimport { size } from './index';\nimport { Button, Col, Divider, Empty, Input, Modal, Row, message } from 'antd';\nimport { ListProducts } from './list-keyword';\nimport SearchProducts from './search-products';\nimport AddProduct from './add-product';\nimport { EmptyProduct } from '../../../assets/icon';\nimport './add-keyword.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst EditKeyword = ({\n  keyword,\n  keywordIndex\n}) => {\n  _s();\n\n  const [state, setState] = useState(keyword);\n  const [show_list, setShowList] = useState(false);\n  const {\n    updateKeyword,\n    removeKeyword,\n    livestream\n  } = useNewLiveStream();\n  const {\n    visible,\n    toggle\n  } = useModal();\n  useEffect(() => {\n    setState(keyword);\n  }, [visible, keyword]);\n  const validate = useCallback(() => {\n    if (state.products.length === 0) {\n      message.error('Bạn chưa chọn sản phẩm');\n      return false;\n    }\n\n    if (state.keyword.length === 0) {\n      message.error('Bạn chưa điền từ khóa');\n      return false;\n    }\n\n    if (livestream.keywords.map(keywordItem => keywordItem.keyword).filter((keywordItem, index) => index !== keywordIndex && keywordItem === state.keyword).length) {\n      message.error('Từ khoá đã tồn tại');\n      return false;\n    }\n\n    return true;\n  }, [state, livestream.keywords]);\n\n  const handlechangeKeyword = e => {\n    setState({ ...state,\n      keyword: e.target.value\n    });\n  };\n\n  const handleRemoveKeyword = () => {\n    removeKeyword(keywordIndex);\n    toggle();\n  };\n\n  const handleSaveEdit = () => {\n    if (!validate()) return;\n    updateKeyword(state, keywordIndex);\n    toggle();\n  };\n\n  const addProduct = product => {\n    if (state.products.filter(item => item.productId ? item.productId._id === product._id : item._id === product._id).length) {\n      message.warning('Sản phẩm này đã được chọn');\n      return;\n    }\n\n    const newProducts = [...state.products, product];\n    setState({ ...state,\n      products: newProducts\n    });\n  };\n\n  const removeProduct = productId => {\n    const newProducts = state.products.filter(product => {\n      let productData = product.productId ? product.productId : product;\n      return productData._id !== productId;\n    });\n    setState({ ...state,\n      products: newProducts\n    });\n  };\n\n  const updateProduct = (productId, price) => {\n    const newProducts = state.products.map(product => {\n      let productData = product.productId ? product.productId : product;\n\n      if (productData._id === productId) {\n        product.price = price;\n      }\n\n      return product;\n    });\n    setState({ ...state,\n      products: newProducts\n    });\n  };\n\n  const updateService = (productId, propertyChanged) => {\n    const newProducts = state.products.map(product => {\n      let productData = product.productId ? product.productId : product;\n\n      if (productData._id === productId) {\n        return { ...product,\n          ...propertyChanged\n        };\n      }\n\n      return product;\n    });\n    setState({ ...state,\n      products: newProducts\n    });\n  };\n\n  const renderContent = () => {\n    if (show_list) {\n      return null;\n    }\n\n    if (state.products.length > 0) {\n      return /*#__PURE__*/_jsxDEV(ListProducts, {\n        className: \"selected-product-table\",\n        products: state.products,\n        removeProduct: removeProduct,\n        updateProduct: updateProduct,\n        updateService: updateService\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Row, {\n      justify: \"center\",\n      align: \"middle\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 18,\n        children: /*#__PURE__*/_jsxDEV(Empty, {\n          image: /*#__PURE__*/_jsxDEV(EmptyProduct, {\n            className: \"icon-empty-product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 32\n          }, this),\n          description: \"B\\u1EA1n ch\\u01B0a ch\\u1ECDn s\\u1EA3n ph\\u1EA9m n\\xE0o. Vui l\\xF2ng b\\u1EA5m v\\xE0o \\xF4 t\\xECm ki\\u1EBFm ho\\u1EB7c th\\xEAm m\\u1EDBi s\\u1EA3n ph\\u1EA9m \\u0111\\u1EC3 t\\u1EA1o t\\u1EEB kh\\xF3a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      onClick: toggle,\n      children: state.keyword\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      visible: visible,\n      onCancel: toggle,\n      title: \"Ch\\u1EC9nh s\\u1EEDa m\\u1EABu n\\u1ED9i dung \\u0111\\u1EB7t h\\xE0ng\",\n      footer: null,\n      wrapClassName: \"modal-add-keyword\",\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        justify: \"space-between\",\n        align: \"middle\",\n        style: {\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label_form\",\n            children: \"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(AddProduct, {\n            addProduct: addProduct\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SearchProducts, {\n        setShowList: value => setShowList(value),\n        addProduct: addProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this), renderContent(), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"label_form\",\n          children: \"T\\u1EEB kh\\xF3a \\u0111\\u1EB7t h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Nh\\u1EADp t\\u1EEB kh\\xF3a \\u0111\\u1EB7t h\\xE0ng\",\n          style: {\n            margin: '10px 0'\n          },\n          size: size,\n          onChange: handlechangeKeyword,\n          value: state.keyword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"N\\u1EBFu b\\u1EA1n ch\\u1ECDn s\\u1EA3n ph\\u1EA9m l\\xE0 SON MAC th\\xEC n\\xEAn \\u0111\\u1EB7t t\\u1EEB kh\\xF3a t\\u01B0\\u01A1ng \\u1EE9ng l\\xE0 \\u201CMAC\\u201D. N\\u1EBFu s\\u1EA3n ph\\u1EA9m l\\xE0 tai nghe Airpod th\\xEC t\\u1EEB kh\\xF3a \\u0111\\u1EB7t h\\xE0ng n\\xEAn l\\xE0 \\u201CAIRPOD\\u201D.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        justify: \"space-between\",\n        align: \"middle\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            danger: true,\n            onClick: handleRemoveKeyword,\n            children: \"X\\xF3a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: toggle,\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            style: {\n              marginLeft: 15\n            },\n            onClick: handleSaveEdit,\n            children: \"L\\u01B0u l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(EditKeyword, \"sryaWVzmlWOK5FEdZZOTq7HgBoA=\", false, function () {\n  return [useNewLiveStream, useModal];\n});\n\n_c = EditKeyword;\nexport default EditKeyword;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditKeyword\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/script-step/edit-keyword.tsx"],"names":["React","useState","useEffect","useCallback","useNewLiveStream","useModal","size","Button","Col","Divider","Empty","Input","Modal","Row","message","ListProducts","SearchProducts","AddProduct","EmptyProduct","EditKeyword","keyword","keywordIndex","state","setState","show_list","setShowList","updateKeyword","removeKeyword","livestream","visible","toggle","validate","products","length","error","keywords","map","keywordItem","filter","index","handlechangeKeyword","e","target","value","handleRemoveKeyword","handleSaveEdit","addProduct","product","item","productId","_id","warning","newProducts","removeProduct","productData","updateProduct","price","updateService","propertyChanged","renderContent","marginBottom","marginTop","margin","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNewLiveStream } from './context';\nimport useModal from '../../../hooks/use-modal';\n\nimport { size } from './index';\nimport { Button, Col, Divider, Empty, Input, Modal, Row, message } from 'antd';\nimport { ListProducts } from './list-keyword';\nimport SearchProducts from './search-products';\nimport AddProduct from './add-product';\nimport { EmptyProduct } from '../../../assets/icon';\n\nimport './add-keyword.less';\n\ninterface Props {\n    keyword: {\n        id: any;\n        keyword: string;\n        products: any[];\n    };\n    keywordIndex: number;\n}\n\nconst EditKeyword = ({ keyword, keywordIndex }: Props) => {\n    const [state, setState] = useState(keyword);\n    const [show_list, setShowList] = useState(false);\n\n    const { updateKeyword, removeKeyword, livestream } = useNewLiveStream();\n    const { visible, toggle } = useModal();\n\n    useEffect(() => {\n        setState(keyword);\n    }, [visible, keyword]);\n\n    const validate = useCallback(() => {\n        if (state.products.length === 0) {\n            message.error('Bạn chưa chọn sản phẩm');\n            return false;\n        }\n\n        if (state.keyword.length === 0) {\n            message.error('Bạn chưa điền từ khóa');\n            return false;\n        }\n\n        if (\n            livestream.keywords\n                .map((keywordItem: any) => keywordItem.keyword)\n                .filter(\n                    (keywordItem: any, index: number) =>\n                        index !== keywordIndex && keywordItem === state.keyword\n                ).length\n        ) {\n            message.error('Từ khoá đã tồn tại');\n            return false;\n        }\n\n        return true;\n    }, [state, livestream.keywords]);\n\n    const handlechangeKeyword = (e: any) => {\n        setState({\n            ...state,\n            keyword: e.target.value,\n        });\n    };\n\n    const handleRemoveKeyword = () => {\n        removeKeyword(keywordIndex);\n        toggle();\n    };\n\n    const handleSaveEdit = () => {\n        if (!validate()) return;\n\n        updateKeyword(state, keywordIndex);\n        toggle();\n    };\n\n    const addProduct = (product: any) => {\n        if (\n            state.products.filter((item: any) =>\n                item.productId ? item.productId._id === product._id : item._id === product._id\n            ).length\n        ) {\n            message.warning('Sản phẩm này đã được chọn');\n\n            return;\n        }\n\n        const newProducts = [...state.products, product];\n\n        setState({ ...state, products: newProducts });\n    };\n\n    const removeProduct = (productId: string) => {\n        const newProducts = state.products.filter((product: any) => {\n            let productData = product.productId ? product.productId : product;\n            return productData._id !== productId;\n        });\n\n        setState({ ...state, products: newProducts });\n    };\n\n    const updateProduct = (productId: string, price: number) => {\n        const newProducts = state.products.map((product: any) => {\n            let productData = product.productId ? product.productId : product;\n\n            if (productData._id === productId) {\n                product.price = price;\n            }\n            return product;\n        });\n        setState({ ...state, products: newProducts });\n    };\n\n    const updateService = (productId: string, propertyChanged: any) => {\n        const newProducts = state.products.map((product: any) => {\n            let productData = product.productId ? product.productId : product;\n\n            if (productData._id === productId) {\n                return { ...product, ...propertyChanged };\n            }\n            return product;\n        });\n        setState({ ...state, products: newProducts });\n    };\n\n    const renderContent = () => {\n        if (show_list) {\n            return null;\n        }\n\n        if (state.products.length > 0) {\n            return (\n                <ListProducts\n                    className='selected-product-table'\n                    products={state.products}\n                    removeProduct={removeProduct}\n                    updateProduct={updateProduct}\n                    updateService={updateService}\n                />\n            );\n        }\n\n        return (\n            <Row justify='center' align='middle'>\n                <Col md={18}>\n                    <Empty\n                        image={<EmptyProduct className='icon-empty-product' />}\n                        description='Bạn chưa chọn sản phẩm nào. Vui lòng bấm vào ô tìm kiếm hoặc thêm mới sản phẩm để tạo từ khóa'\n                    />\n                </Col>\n            </Row>\n        );\n    };\n\n    return (\n        <>\n            <a onClick={toggle}>{state.keyword}</a>\n\n            <Modal\n                visible={visible}\n                onCancel={toggle}\n                title='Chỉnh sửa mẫu nội dung đặt hàng'\n                footer={null}\n                wrapClassName='modal-add-keyword'\n            >\n                <Row justify='space-between' align='middle' style={{ marginBottom: 10 }}>\n                    <Col>\n                        <span className='label_form'>Chọn sản phẩm</span>\n                    </Col>\n\n                    <Col>\n                        <AddProduct addProduct={addProduct} />\n                    </Col>\n                </Row>\n\n                <SearchProducts\n                    setShowList={(value) => setShowList(value)}\n                    addProduct={addProduct}\n                />\n\n                {renderContent()}\n\n                <div style={{ marginTop: 20 }}>\n                    <span className='label_form'>Từ khóa đặt hàng</span>\n                    <br />\n                    <Input\n                        placeholder='Nhập từ khóa đặt hàng'\n                        style={{ margin: '10px 0' }}\n                        size={size}\n                        onChange={handlechangeKeyword}\n                        value={state.keyword}\n                    />\n                    <br />\n\n                    <div>\n                        Nếu bạn chọn sản phẩm là SON MAC thì nên đặt từ khóa tương ứng là “MAC”. Nếu\n                        sản phẩm là tai nghe Airpod thì từ khóa đặt hàng nên là “AIRPOD”.\n                    </div>\n                </div>\n\n                <Divider />\n\n                <Row justify='space-between' align='middle'>\n                    <Col>\n                        <Button type='primary' danger onClick={handleRemoveKeyword}>\n                            Xóa\n                        </Button>\n                    </Col>\n\n                    <Col>\n                        <Button onClick={toggle}>Hủy</Button>\n                        <Button type='primary' style={{ marginLeft: 15 }} onClick={handleSaveEdit}>\n                            Lưu lại\n                        </Button>\n                    </Col>\n                </Row>\n            </Modal>\n        </>\n    );\n};\n\nexport default EditKeyword;\n"]},"metadata":{},"sourceType":"module"}