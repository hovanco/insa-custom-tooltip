{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/scripts/script-copy.tsx\",\n    _s = $RefreshSig$();\n\nimport { Form, Input, message, Modal, Select } from 'antd';\nimport { map } from 'lodash';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport livestreamApi from '../../../api/livestream-api';\nimport useModal from '../../../hooks/use-modal';\nimport { loadLivestreams } from '../../../reducers/livestreamState/livestreamAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst size = 'large';\n\nconst ScriptCopy = ({\n  script,\n  children\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const pages = useSelector(state => state.fanpage.pages);\n  const store = useSelector(state => state.store.store);\n  const [loading, setLoading] = useState(false);\n  const {\n    toggle,\n    visible\n  } = useModal();\n  const [form] = Form.useForm();\n\n  const handleOk = () => {\n    form.validateFields().then(async values => {\n      try {\n        setLoading(true);\n        await livestreamApi.copyLivestream({\n          storeId: store._id,\n          fbPageId: values.fbPageId,\n          data: {\n            scriptId: script._id,\n            name: values.name\n          }\n        });\n        message.success('Sao chép kịch bản thành công!');\n        setLoading(false);\n        toggle();\n        dispatch(loadLivestreams());\n      } catch (error) {\n        message.error('Lỗi sao chép kịch bản');\n        setLoading(false);\n      }\n    }).catch(info => {});\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/React.cloneElement(children, {\n      onClick: toggle\n    }), /*#__PURE__*/_jsxDEV(Modal, {\n      visible: visible,\n      onCancel: toggle,\n      title: \"X\\xE1c nh\\u1EADn sao ch\\xE9p k\\u1ECBch b\\u1EA3n\",\n      okText: \"\\u0110\\u1ED3ng \\xFD\",\n      cancelText: \"H\\u1EE7y\",\n      okButtonProps: {\n        loading\n      },\n      onOk: handleOk,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        layout: \"vertical\",\n        initialValues: {\n          fbPageId: script.fbPageId,\n          name: `Sao chép - ${script.name}`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"L\\u1EF1a ch\\u1ECDn 1 trang m\\xE0 b\\u1EA1n mu\\u1ED1n sao ch\\xE9p cho k\\u1ECBch b\\u1EA3n\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: script.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"fbPageId\",\n          label: \"Ch\\u1ECDn trang\",\n          rules: [{\n            required: true,\n            message: 'Chọn 1 trang để sao chép'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            style: {\n              width: '100%'\n            },\n            size: size,\n            children: map(pages, page => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: page.fbObjectId,\n              children: page.name\n            }, page.fbObjectId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"name\",\n          label: \"T\\xEAn k\\u1ECBch b\\u1EA3n\",\n          rules: [{\n            required: true,\n            message: 'Điền tên kịch bản'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            size: size\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ScriptCopy, \"LCHWzEpDK+4km6l8Br1kBEMa1Ko=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useModal, Form.useForm];\n});\n\n_c = ScriptCopy;\nexport default ScriptCopy;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScriptCopy\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/scripts/script-copy.tsx"],"names":["Form","Input","message","Modal","Select","map","React","useState","useDispatch","useSelector","livestreamApi","useModal","loadLivestreams","size","ScriptCopy","script","children","dispatch","pages","state","fanpage","store","loading","setLoading","toggle","visible","form","useForm","handleOk","validateFields","then","values","copyLivestream","storeId","_id","fbPageId","data","scriptId","name","success","error","catch","info","cloneElement","onClick","required","width","page","fbObjectId"],"mappings":"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","sourcesContent":["import { Form, Input, message, Modal, Select } from 'antd';\nimport { map } from 'lodash';\nimport React, { ReactElement, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport livestreamApi from '../../../api/livestream-api';\nimport useModal from '../../../hooks/use-modal';\nimport { loadLivestreams } from '../../../reducers/livestreamState/livestreamAction';\nimport { ILivestreamScript } from '../../../collections/livestream-script';\n\ninterface Props {\n    script: ILivestreamScript;\n    children: ReactElement;\n}\n\nconst size = 'large';\n\nconst ScriptCopy = ({ script, children }: Props) => {\n    const dispatch = useDispatch();\n    const pages = useSelector((state: any) => state.fanpage.pages);\n    const store = useSelector((state: any) => state.store.store);\n    const [loading, setLoading] = useState(false);\n\n    const { toggle, visible } = useModal();\n\n    const [form] = Form.useForm();\n\n    const handleOk = () => {\n        form.validateFields()\n            .then(async (values) => {\n                try {\n                    setLoading(true);\n\n                    await livestreamApi.copyLivestream({\n                        storeId: store._id,\n                        fbPageId: values.fbPageId,\n                        data: {\n                            scriptId: script._id,\n                            name: values.name,\n                        },\n                    });\n\n                    message.success('Sao chép kịch bản thành công!');\n\n                    setLoading(false);\n                    toggle();\n\n                    dispatch(loadLivestreams());\n                } catch (error) {\n                    message.error('Lỗi sao chép kịch bản');\n                    setLoading(false);\n                }\n            })\n            .catch((info) => {});\n    };\n\n    return (\n        <div>\n            {React.cloneElement(children, { onClick: toggle })}\n\n            <Modal\n                visible={visible}\n                onCancel={toggle}\n                title='Xác nhận sao chép kịch bản'\n                okText='Đồng ý'\n                cancelText='Hủy'\n                okButtonProps={{\n                    loading,\n                }}\n                onOk={handleOk}\n            >\n                <Form\n                    form={form}\n                    layout='vertical'\n                    initialValues={{\n                        fbPageId: script.fbPageId,\n                        name: `Sao chép - ${script.name}`,\n                    }}\n                >\n                    <p>\n                        Lựa chọn 1 trang mà bạn muốn sao chép cho kịch bản{' '}\n                        <strong>{script.name}</strong>\n                    </p>\n                    <Form.Item\n                        name='fbPageId'\n                        label='Chọn trang'\n                        rules={[{ required: true, message: 'Chọn 1 trang để sao chép' }]}\n                    >\n                        <Select style={{ width: '100%' }} size={size}>\n                            {map(pages, (page: any) => (\n                                <Select.Option key={page.fbObjectId} value={page.fbObjectId}>\n                                    {page.name}\n                                </Select.Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n\n                    <Form.Item\n                        name='name'\n                        label='Tên kịch bản'\n                        rules={[{ required: true, message: 'Điền tên kịch bản' }]}\n                    >\n                        <Input size={size} />\n                    </Form.Item>\n                </Form>\n            </Modal>\n        </div>\n    );\n};\n\nexport default ScriptCopy;\n"]},"metadata":{},"sourceType":"module"}