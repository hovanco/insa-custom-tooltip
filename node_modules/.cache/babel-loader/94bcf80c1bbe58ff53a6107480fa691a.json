{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-customer/order-tab.tsx\",\n    _s = $RefreshSig$();\n\nimport { SaveOutlined } from '@ant-design/icons';\nimport { Button, message } from 'antd';\nimport { get, isEmpty, pick } from 'lodash';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport storeApi from '../../../api/store-api';\nimport { useOrder } from './context-order';\nimport OrderDone from './order-done';\nimport { getFee } from './util';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OrderTab = props => {\n  _s();\n\n  const token = useSelector(state => state.auth.token);\n  const store = useSelector(state => state.store.store);\n  const page = useSelector(state => state.fanpage.page);\n  const conversation = useSelector(state => state.fanpage.conversation);\n  const {\n    order,\n    resetOrder,\n    customerObjectId,\n    setCustomerObjectId\n  } = useOrder();\n  const [submit, setSubmit] = useState(false);\n  const [done, setDone] = useState(false);\n\n  const toggleDone = () => {\n    resetOrder();\n    setDone(!done);\n  };\n\n  const saveOrder = async () => {\n    try {\n      setSubmit(true);\n      let newCustomerId;\n\n      if (isEmpty(customerObjectId)) {\n        const dataCustomer = { ...pick(order.customer, ['name', 'phoneNo', 'address', 'province', 'district', 'ward']),\n          fbPageId: store.activePage._id,\n          fbUserId: conversation.fbUserId\n        };\n        const newCustomer = await storeApi.createCustomer({\n          token: token.accessToken,\n          storeId: store._id,\n          data: dataCustomer\n        });\n        newCustomerId = newCustomer._id;\n        order.customer = newCustomer;\n      }\n\n      const products = order.products.map(p => pick(p, ['count', 'productId', 'price']));\n      const valueShipmentFeeForCustomer = get(order, 'deliveryOptions.shipmentFeeForCustomer');\n      const shipmentFeeForCustomer = !valueShipmentFeeForCustomer || valueShipmentFeeForCustomer === 0 ? get(order, 'deliveryOptions.shipmentFee') : valueShipmentFeeForCustomer;\n      const data = {\n        products,\n        customer: pick(order.customer, ['_id', 'fbUserId', 'name', 'phoneNo', 'address', 'province', 'district', 'ward']),\n        fbPageId: page.fbObjectId,\n        deliveryOptions: { ...pick(order.deliveryOptions, ['shipmentFee', 'discount', 'discountBy', 'noteForDelivery']),\n          shipmentFeeForCustomer,\n          serviceId: order.deliveryOptions.serviceId || 0,\n          transportType: order.deliveryOptions.transportType || 0,\n          customerNote: order.deliveryOptions.customerNote.length > 0 ? order.deliveryOptions.customerNote : undefined,\n          noteForCustomerCare: order.deliveryOptions.noteForCustomerCare.length > 0 ? order.deliveryOptions.noteForCustomerCare : undefined,\n          feeForReceiver: getFee(order).feeForReceiver,\n          shipmentFeeByTotal: true\n        },\n        warehouseId: order.warehouseId\n      };\n      await storeApi.createOrder({\n        storeId: store._id,\n        token: token.accessToken,\n        data\n      });\n      setSubmit(false);\n      message.success('Đã tạo đơn thành công');\n\n      if (isEmpty(customerObjectId)) {\n        const dataCustomer = { ...order.customer,\n          fbPageId: store.activePage._id,\n          fbUserId: conversation.fbUserId\n        };\n        const newCustomer = await storeApi.createCustomer({\n          token: token.accessToken,\n          storeId: store._id,\n          data: dataCustomer\n        });\n        setCustomerObjectId(newCustomer._id);\n      }\n\n      toggleDone();\n    } catch (error) {\n      setSubmit(false);\n\n      if (get(error, 'response.data.message') === 'INVALID_PRODUCTS_QUANTITY') {\n        message.error('Sản phẩm được chọn có thể không tồn tại hoặc không đủ số lượng ở kho lấy hàng mà bạn đã chọn');\n      } else {\n        message.error('Lỗi tạo đơn');\n      }\n    }\n  };\n\n  const notValidDelivery = () => {\n    const hasSelectDelivery = order.deliveryOptions.serviceId && order.deliveryOptions.serviceId !== 0; // if(!hasSelectDelivery) return true;\n\n    if (hasSelectDelivery && !order.deliveryOptions.transportType || hasSelectDelivery && typeof order.deliveryOptions.noteForDelivery === 'undefined') {\n      return true;\n    }\n\n    return false;\n  };\n\n  const checkValid = () => {\n    if (order.customer.name.length === 0 || order.customer.phoneNo.length === 0 || typeof order.customer.province === 'undefined' || typeof order.customer.district === 'undefined' || typeof order.customer.ward === 'undefined' || typeof order.warehouseId === 'undefined' || order.products.length === 0 || notValidDelivery()) return false;\n    return true;\n  };\n\n  if (done) {\n    return /*#__PURE__*/_jsxDEV(OrderDone, {\n      toggleDone: toggleDone\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order-tab\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-tab-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-content-inner\",\n        style: {\n          paddingTop: 5\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-tab-bottom\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        loading: submit,\n        disabled: !checkValid(),\n        icon: /*#__PURE__*/_jsxDEV(SaveOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 27\n        }, this),\n        onClick: saveOrder,\n        style: {\n          height: 35\n        },\n        children: \"L\\u01B0u\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 9\n  }, this);\n};\n\n_s(OrderTab, \"kDjF4792HWhwivseKMZxEVvJVtk=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useOrder];\n});\n\n_c = OrderTab;\nexport default OrderTab;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderTab\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-customer/order-tab.tsx"],"names":["SaveOutlined","Button","message","get","isEmpty","pick","React","useState","useSelector","storeApi","useOrder","OrderDone","getFee","OrderTab","props","token","state","auth","store","page","fanpage","conversation","order","resetOrder","customerObjectId","setCustomerObjectId","submit","setSubmit","done","setDone","toggleDone","saveOrder","newCustomerId","dataCustomer","customer","fbPageId","activePage","_id","fbUserId","newCustomer","createCustomer","accessToken","storeId","data","products","map","p","valueShipmentFeeForCustomer","shipmentFeeForCustomer","fbObjectId","deliveryOptions","serviceId","transportType","customerNote","length","undefined","noteForCustomerCare","feeForReceiver","shipmentFeeByTotal","warehouseId","createOrder","success","error","notValidDelivery","hasSelectDelivery","noteForDelivery","checkValid","name","phoneNo","province","district","ward","paddingTop","height"],"mappings":"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","sourcesContent":["import { SaveOutlined } from '@ant-design/icons';\nimport { Button, message, Space, Divider } from 'antd';\nimport { get, isEmpty, pick } from 'lodash';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport storeApi from '../../../api/store-api';\nimport AddProduct from './add-product';\nimport { useOrder } from './context-order';\nimport OrderDone from './order-done';\nimport OrderProductList from './order-product-list';\nimport OrderStore from './order-store';\nimport OrderTransport from './order-transport';\nimport SearchProduct from './search-product';\nimport { getFee } from './util';\nimport OrderCustomerInfo from './order-customer-info';\n\nexport interface IOrder {\n    pageId: string;\n    order_name: string;\n    order_phone: string;\n    order_email: string;\n    address: string;\n    addressInfo: {\n        city: any;\n        district: any;\n        ward: any;\n    };\n    list_order: any[];\n    type_order: string;\n    shiper: string | null;\n    phi_van_chuyen: number;\n    phi_bao_khach: number;\n    chiet_khau: {\n        type: string;\n        value: number;\n    };\n    customer_note: string;\n    cskh_note: string;\n    store: any;\n    tien_chuyen_khoan: number;\n    tien_coc: number;\n}\n\ninterface Props {}\n\nconst OrderTab = (props: Props) => {\n    const token = useSelector((state: any) => state.auth.token);\n    const store = useSelector((state: any) => state.store.store);\n    const page = useSelector((state: any) => state.fanpage.page);\n    const conversation = useSelector((state: any) => state.fanpage.conversation);\n\n    const { order, resetOrder, customerObjectId, setCustomerObjectId } = useOrder();\n    const [submit, setSubmit] = useState(false);\n    const [done, setDone] = useState(false);\n\n    const toggleDone = () => {\n        resetOrder();\n        setDone(!done);\n    };\n\n    const saveOrder = async () => {\n        try {\n            setSubmit(true);\n            let newCustomerId;\n            if (isEmpty(customerObjectId)) {\n                const dataCustomer = {\n                    ...pick(order.customer, [\n                        'name',\n                        'phoneNo',\n                        'address',\n                        'province',\n                        'district',\n                        'ward',\n                    ]),\n                    fbPageId: store.activePage._id,\n                    fbUserId: conversation.fbUserId,\n                };\n                const newCustomer = await storeApi.createCustomer({\n                    token: token.accessToken,\n                    storeId: store._id,\n                    data: dataCustomer,\n                });\n                newCustomerId = newCustomer._id;\n                order.customer = newCustomer;\n            }\n\n            const products = order.products.map((p: any) =>\n                pick(p, ['count', 'productId', 'price'])\n            );\n\n            const valueShipmentFeeForCustomer = get(\n                order,\n                'deliveryOptions.shipmentFeeForCustomer'\n            );\n\n            const shipmentFeeForCustomer =\n                !valueShipmentFeeForCustomer || valueShipmentFeeForCustomer === 0\n                    ? get(order, 'deliveryOptions.shipmentFee')\n                    : valueShipmentFeeForCustomer;\n\n            const data = {\n                products,\n                customer: pick(order.customer, [\n                    '_id',\n                    'fbUserId',\n                    'name',\n                    'phoneNo',\n                    'address',\n                    'province',\n                    'district',\n                    'ward',\n                ]),\n                fbPageId: page.fbObjectId,\n                deliveryOptions: {\n                    ...pick(order.deliveryOptions, [\n                        'shipmentFee',\n                        'discount',\n                        'discountBy',\n                        'noteForDelivery',\n                    ]),\n                    shipmentFeeForCustomer,\n                    serviceId: order.deliveryOptions.serviceId || 0,\n                    transportType: order.deliveryOptions.transportType || 0,\n                    customerNote:\n                        order.deliveryOptions.customerNote.length > 0\n                            ? order.deliveryOptions.customerNote\n                            : undefined,\n                    noteForCustomerCare:\n                        order.deliveryOptions.noteForCustomerCare.length > 0\n                            ? order.deliveryOptions.noteForCustomerCare\n                            : undefined,\n\n                    feeForReceiver: getFee(order).feeForReceiver,\n                    shipmentFeeByTotal: true,\n                },\n                warehouseId: order.warehouseId,\n            };\n\n            await storeApi.createOrder({\n                storeId: store._id,\n                token: token.accessToken,\n                data,\n            });\n\n            setSubmit(false);\n            message.success('Đã tạo đơn thành công');\n            if (isEmpty(customerObjectId)) {\n                const dataCustomer = {\n                    ...order.customer,\n                    fbPageId: store.activePage._id,\n                    fbUserId: conversation.fbUserId,\n                };\n                const newCustomer = await storeApi.createCustomer({\n                    token: token.accessToken,\n                    storeId: store._id,\n                    data: dataCustomer,\n                });\n                setCustomerObjectId(newCustomer._id);\n            }\n            toggleDone();\n        } catch (error) {\n            setSubmit(false);\n            if (get(error, 'response.data.message') === 'INVALID_PRODUCTS_QUANTITY') {\n                message.error('Sản phẩm được chọn có thể không tồn tại hoặc không đủ số lượng ở kho lấy hàng mà bạn đã chọn');\n            } else {\n                message.error('Lỗi tạo đơn');\n            }\n        }\n    };\n\n    const notValidDelivery = () => {\n        const hasSelectDelivery =\n            order.deliveryOptions.serviceId && order.deliveryOptions.serviceId !== 0;\n\n        // if(!hasSelectDelivery) return true;\n\n        if (\n            (hasSelectDelivery && !order.deliveryOptions.transportType) ||\n            (hasSelectDelivery && typeof order.deliveryOptions.noteForDelivery === 'undefined')\n        ) {\n            return true;\n        }\n\n        return false;\n    };\n\n    const checkValid = () => {\n        if (\n            order.customer.name.length === 0 ||\n            order.customer.phoneNo.length === 0 ||\n            typeof order.customer.province === 'undefined' ||\n            typeof order.customer.district === 'undefined' ||\n            typeof order.customer.ward === 'undefined' ||\n            typeof order.warehouseId === 'undefined' ||\n            order.products.length === 0 ||\n            notValidDelivery()\n        )\n            return false;\n\n        return true;\n    };\n\n    if (done) {\n        return <OrderDone toggleDone={toggleDone} />;\n    }\n\n    return (\n        <div className='order-tab'>\n            <div className='order-tab-content'>\n                <div className='tab-content-inner' style={{ paddingTop: 5 }}>\n                    {/* <Space direction='vertical' size={20} style={{ width: '100%' }}>\n                        <div>\n                            <OrderCustomerInfo />\n                            <Divider />\n                            <OrderStore />\n                            <OrderProductList />\n                            <AddProduct />\n                        </div>\n                        <SearchProduct />\n                        <OrderTransport />\n                    </Space> */}\n                </div>\n            </div>\n\n            <div className='order-tab-bottom'>\n                <Button\n                    type='primary'\n                    htmlType='submit'\n                    loading={submit}\n                    disabled={!checkValid()}\n                    icon={<SaveOutlined />}\n                    onClick={saveOrder}\n                    style={{ height: 35 }}\n                >\n                    Lưu\n                </Button>\n            </div>\n        </div>\n    );\n};\n\nexport default OrderTab;\n"]},"metadata":{},"sourceType":"module"}