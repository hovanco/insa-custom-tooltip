{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/script-step/add-keyword.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Col, Divider, Empty, Input, message, Modal, Row } from 'antd';\nimport React, { useCallback, useState } from 'react';\nimport { EmptyProduct } from '../../../assets/icon';\nimport useModal from '../../../hooks/use-modal';\nimport './add-keyword.less';\nimport AddProduct from './add-product';\nimport { useNewLiveStream } from './context';\nimport { ListProducts } from './list-keyword';\nimport SearchProducts from './search-products';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst size = 'large';\n\nconst SetupKeyWord = props => {\n  _s();\n\n  const {\n    visible,\n    toggle\n  } = useModal();\n  const {\n    addKeyword,\n    livestream\n  } = useNewLiveStream();\n  const [show_list, setShowList] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [keyword, setKeyword] = useState('');\n  const validate = useCallback(() => {\n    if (products.length === 0) {\n      message.error('Bạn chưa chọn sản phẩm');\n      return false;\n    }\n\n    if (keyword.length === 0) {\n      message.error('Bạn chưa điền từ khóa');\n      return false;\n    }\n\n    if (livestream.keywords.map(keywordItem => keywordItem.keyword).indexOf(keyword) !== -1) {\n      message.error('Từ khoá đã tồn tại');\n      return false;\n    }\n\n    return true;\n  }, [products, keyword, livestream.keywords]);\n\n  const addKeywordAndClose = () => {\n    if (!validate()) return;\n    addKeyword({\n      id: Date.now(),\n      keyword,\n      products\n    });\n    setKeyword('');\n    setProducts([]);\n    toggle();\n  };\n\n  const addKeywordAndAddNew = () => {\n    if (!validate()) return;\n    addKeyword({\n      id: Date.now(),\n      keyword,\n      products\n    });\n    setKeyword('');\n    setProducts([]);\n  };\n\n  const addProduct = product => {\n    if (products.filter(item => item.productId ? item.productId._id === product._id : item._id === product._id).length) {\n      message.warning('Sản phẩm này đã được chọn');\n      return;\n    }\n\n    const newProducts = [...products, product];\n    setProducts(newProducts);\n  };\n\n  const removeProduct = productId => {\n    const newProducts = products.filter(product => product._id !== productId);\n    setProducts(newProducts);\n  };\n\n  const updateProduct = (productId, price) => {\n    const newProducts = products.map(product => {\n      if (product._id === productId) {\n        product.price = price;\n      }\n\n      return product;\n    });\n    setProducts(newProducts);\n  };\n\n  const changeKeyword = e => {\n    setKeyword(e.target.value);\n  };\n\n  const addOtherService = () => {\n    const fakeId = products.filter(item => item.type == 'service').length;\n    let newService = {\n      _id: `service-${fakeId + 1}`,\n      name: '',\n      price: 0,\n      type: 'service'\n    };\n    setProducts([...products, newService]);\n  };\n\n  const updateService = (productId, propertyChanged) => {\n    const newProducts = products.map(product => {\n      if (product._id === productId) {\n        return { ...product,\n          ...propertyChanged\n        };\n      }\n\n      return product;\n    });\n    setProducts(newProducts);\n  };\n\n  const renderContent = () => {\n    if (show_list) {\n      return null;\n    }\n\n    if (products.length > 0) {\n      return /*#__PURE__*/_jsxDEV(ListProducts, {\n        className: \"selected-product-table\",\n        products: products,\n        removeProduct: removeProduct,\n        updateProduct: updateProduct,\n        updateService: updateService\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Row, {\n      justify: \"center\",\n      align: \"middle\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 18,\n        children: /*#__PURE__*/_jsxDEV(Empty, {\n          image: /*#__PURE__*/_jsxDEV(EmptyProduct, {\n            className: \"icon-empty-product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 32\n          }, this),\n          description: \"B\\u1EA1n ch\\u01B0a ch\\u1ECDn s\\u1EA3n ph\\u1EA9m n\\xE0o. Vui l\\xF2ng b\\u1EA5m v\\xE0o \\xF4 t\\xECm ki\\u1EBFm ho\\u1EB7c th\\xEAm m\\u1EDBi s\\u1EA3n ph\\u1EA9m \\u0111\\u1EC3 t\\u1EA1o t\\u1EEB kh\\xF3a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/React.cloneElement(props.children, {\n      onClick: toggle\n    }), /*#__PURE__*/_jsxDEV(Modal, {\n      visible: visible,\n      onCancel: toggle,\n      title: \"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m v\\xE0 t\\u1EA1o t\\u1EEB kh\\xF3a t\\u01B0\\u01A1ng \\u1EE9ng\",\n      footer: null,\n      width: 650,\n      wrapClassName: \"modal-add-keyword\",\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        justify: \"space-between\",\n        align: \"middle\",\n        style: {\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label_form\",\n            children: \"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(AddProduct, {\n            addProduct: addProduct\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SearchProducts, {\n        setShowList: value => setShowList(value),\n        addProduct: addProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this), renderContent(), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"label_form\",\n          children: \"T\\u1EEB kh\\xF3a \\u0111\\u1EB7t h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Nh\\u1EADp t\\u1EEB kh\\xF3a \\u0111\\u1EB7t h\\xE0ng\",\n          style: {\n            margin: '10px 0'\n          },\n          size: size,\n          onChange: changeKeyword,\n          value: keyword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"secondary-paragraph\",\n          children: \"N\\u1EBFu b\\u1EA1n ch\\u1ECDn s\\u1EA3n ph\\u1EA9m l\\xE0 SON MAC th\\xEC n\\xEAn \\u0111\\u1EB7t t\\u1EEB kh\\xF3a t\\u01B0\\u01A1ng \\u1EE9ng l\\xE0 \\u201CMAC\\u201D. N\\u1EBFu s\\u1EA3n ph\\u1EA9m l\\xE0 tai nghe Airpod th\\xEC t\\u1EEB kh\\xF3a \\u0111\\u1EB7t h\\xE0ng n\\xEAn l\\xE0 \\u201CAIRPOD\\u201D.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        gutter: 15,\n        justify: \"end\",\n        align: \"middle\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          span: 6\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 6,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: toggle,\n            block: true,\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 6,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            block: true,\n            type: \"primary\",\n            onClick: addKeywordAndClose,\n            children: \"L\\u01B0u & \\u0110\\xF3ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 6,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            block: true,\n            type: \"primary\",\n            onClick: addKeywordAndAddNew,\n            children: \"L\\u01B0u v\\xE0 Th\\xEAm m\\u1EDBi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SetupKeyWord, \"4+jq8Sw3y5OC8vLDEO8/656SzFM=\", false, function () {\n  return [useModal, useNewLiveStream];\n});\n\n_c = SetupKeyWord;\nexport default SetupKeyWord;\n\nvar _c;\n\n$RefreshReg$(_c, \"SetupKeyWord\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/live-stream/script-step/add-keyword.tsx"],"names":["Button","Col","Divider","Empty","Input","message","Modal","Row","React","useCallback","useState","EmptyProduct","useModal","AddProduct","useNewLiveStream","ListProducts","SearchProducts","size","SetupKeyWord","props","visible","toggle","addKeyword","livestream","show_list","setShowList","products","setProducts","keyword","setKeyword","validate","length","error","keywords","map","keywordItem","indexOf","addKeywordAndClose","id","Date","now","addKeywordAndAddNew","addProduct","product","filter","item","productId","_id","warning","newProducts","removeProduct","updateProduct","price","changeKeyword","e","target","value","addOtherService","fakeId","type","newService","name","updateService","propertyChanged","renderContent","cloneElement","children","onClick","marginBottom","marginTop","margin"],"mappings":"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","sourcesContent":["import { Button, Col, Divider, Empty, Input, message, Modal, Row } from 'antd';\nimport React, { ReactElement, useCallback, useState } from 'react';\nimport { EmptyProduct } from '../../../assets/icon';\nimport useModal from '../../../hooks/use-modal';\nimport './add-keyword.less';\nimport AddProduct from './add-product';\nimport { useNewLiveStream } from './context';\nimport { ListProducts } from './list-keyword';\nimport SearchProducts from './search-products';\n\ninterface Props {\n    children: ReactElement;\n}\n\nconst size = 'large';\n\nconst SetupKeyWord = (props: Props) => {\n    const { visible, toggle } = useModal();\n    const { addKeyword, livestream } = useNewLiveStream();\n\n    const [show_list, setShowList] = useState(false);\n\n    const [products, setProducts] = useState<any[]>([]);\n    const [keyword, setKeyword] = useState('');\n\n    const validate = useCallback(() => {\n        if (products.length === 0) {\n            message.error('Bạn chưa chọn sản phẩm');\n            return false;\n        }\n\n        if (keyword.length === 0) {\n            message.error('Bạn chưa điền từ khóa');\n            return false;\n        }\n\n        if (\n            livestream.keywords.map((keywordItem: any) => keywordItem.keyword).indexOf(keyword) !==\n            -1\n        ) {\n            message.error('Từ khoá đã tồn tại');\n            return false;\n        }\n\n        return true;\n    }, [products, keyword, livestream.keywords]);\n\n    const addKeywordAndClose = () => {\n        if (!validate()) return;\n\n        addKeyword({\n            id: Date.now(),\n            keyword,\n            products,\n        });\n        setKeyword('');\n        setProducts([]);\n        toggle();\n    };\n\n    const addKeywordAndAddNew = () => {\n        if (!validate()) return;\n\n        addKeyword({\n            id: Date.now(),\n            keyword,\n            products,\n        });\n        setKeyword('');\n        setProducts([]);\n    };\n\n    const addProduct = (product: any) => {\n        if (\n            products.filter((item: any) =>\n                item.productId ? item.productId._id === product._id : item._id === product._id\n            ).length\n        ) {\n            message.warning('Sản phẩm này đã được chọn');\n\n            return;\n        }\n\n        const newProducts = [...products, product];\n\n        setProducts(newProducts);\n    };\n\n    const removeProduct = (productId: string) => {\n        const newProducts = products.filter((product: any) => product._id !== productId);\n\n        setProducts(newProducts);\n    };\n\n    const updateProduct = (productId: string, price: number) => {\n        const newProducts = products.map((product: any) => {\n            if (product._id === productId) {\n                product.price = price;\n            }\n            return product;\n        });\n        setProducts(newProducts);\n    };\n\n    const changeKeyword = (e: any) => {\n        setKeyword(e.target.value);\n    };\n\n    const addOtherService = () => {\n        const fakeId: number = products.filter((item) => item.type == 'service').length;\n        let newService: any = {\n            _id: `service-${fakeId + 1}`,\n            name: '',\n            price: 0,\n            type: 'service',\n        };\n\n        setProducts([...products, newService]);\n    };\n\n    const updateService = (productId: string, propertyChanged: any) => {\n        const newProducts = products.map((product: any) => {\n            if (product._id === productId) {\n                return { ...product, ...propertyChanged };\n            }\n            return product;\n        });\n        setProducts(newProducts);\n    };\n\n    const renderContent = () => {\n        if (show_list) {\n            return null;\n        }\n\n        if (products.length > 0) {\n            return (\n                <ListProducts\n                    className='selected-product-table'\n                    products={products}\n                    removeProduct={removeProduct}\n                    updateProduct={updateProduct}\n                    updateService={updateService}\n                />\n            );\n        }\n\n        return (\n            <Row justify='center' align='middle'>\n                <Col md={18}>\n                    <Empty\n                        image={<EmptyProduct className='icon-empty-product' />}\n                        description='Bạn chưa chọn sản phẩm nào. Vui lòng bấm vào ô tìm kiếm hoặc thêm mới sản phẩm để tạo từ khóa'\n                    />\n                </Col>\n            </Row>\n        );\n    };\n\n    return (\n        <div>\n            {React.cloneElement(props.children, { onClick: toggle })}\n\n            <Modal\n                visible={visible}\n                onCancel={toggle}\n                title='Chọn sản phẩm và tạo từ khóa tương ứng'\n                footer={null}\n                width={650}\n                wrapClassName='modal-add-keyword'\n            >\n                <Row justify='space-between' align='middle' style={{ marginBottom: 10 }}>\n                    <Col>\n                        <span className='label_form'>Chọn sản phẩm</span>\n                    </Col>\n\n                    <Col>\n                        <AddProduct addProduct={addProduct} />\n                    </Col>\n                </Row>\n\n                <SearchProducts\n                    setShowList={(value) => setShowList(value)}\n                    addProduct={addProduct}\n                />\n\n                {renderContent()}\n\n                {/* <div className=\"other-services\">\n                    <span onClick={addOtherService}>\n                        <PlusCircleOutlined /> Thêm dịch vụ khác\n                    </span>\n                </div> */}\n\n                <div style={{ marginTop: 20 }}>\n                    <span className='label_form'>Từ khóa đặt hàng</span>\n                    <br />\n                    <Input\n                        placeholder='Nhập từ khóa đặt hàng'\n                        style={{ margin: '10px 0' }}\n                        size={size}\n                        onChange={changeKeyword}\n                        value={keyword}\n                    />\n                    <br />\n\n                    <div className='secondary-paragraph'>\n                        Nếu bạn chọn sản phẩm là SON MAC thì nên đặt từ khóa tương ứng là “MAC”. Nếu\n                        sản phẩm là tai nghe Airpod thì từ khóa đặt hàng nên là “AIRPOD”.\n                    </div>\n                </div>\n\n                <Divider />\n\n                <Row gutter={15} justify='end' align='middle'>\n                    <Col span={6}></Col>\n                    <Col span={6}>\n                        <Button onClick={toggle} block>\n                            Hủy\n                        </Button>\n                    </Col>\n                    <Col span={6}>\n                        <Button block type='primary' onClick={addKeywordAndClose}>\n                            Lưu & Đóng\n                        </Button>\n                    </Col>\n                    <Col span={6}>\n                        <Button block type='primary' onClick={addKeywordAndAddNew}>\n                            Lưu và Thêm mới\n                        </Button>\n                    </Col>\n                </Row>\n            </Modal>\n        </div>\n    );\n};\n\nexport default SetupKeyWord;\n"]},"metadata":{},"sourceType":"module"}