{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-detail/conversation-detail-action.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useConversationDetail } from './context';\nimport { useSelector } from 'react-redux';\nimport _findLast from 'lodash/findLast';\nimport _isObject from 'lodash/isObject';\nimport moment from 'moment';\nimport BoxReply from './box-reply';\nimport ModalAnswers from './modal-answers';\nimport ModalImgs from './modal-imgs';\nimport ModalShortcut from './model-shortcut';\nimport { Space } from 'antd';\nimport LabelMore from './label-more';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ConversationDetailAction = () => {\n  _s();\n\n  const {\n    messages\n  } = useConversationDetail();\n  const [disabled, setDisabled] = useState(true);\n  const conversation = useSelector(({\n    fanpage\n  }) => fanpage.conversation);\n  const page = useSelector(({\n    fanpage\n  }) => fanpage.page);\n  useEffect(() => {\n    if (conversation.type === 2) {\n      return setDisabled(false);\n    }\n\n    if (messages.length > 0 && conversation.type === 1) {\n      const message = _findLast(messages, o => o.from.id !== page.fbObjectId);\n\n      if (_isObject(message)) {\n        const createDate = moment(message.created_time);\n        const newDate = moment(new Date());\n\n        if (newDate.diff(createDate, 'days', true) <= 1) {\n          return setDisabled(false);\n        }\n      }\n    }\n\n    setDisabled(true);\n  }, [messages]);\n  const {\n    labels\n  } = useConversationDetail();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"conversation-detail-action\",\n    children: [/*#__PURE__*/_jsxDEV(Space, {\n      size: 20,\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(ModalShortcut, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalImgs, {\n        disabled: disabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalAnswers, {\n        disabled: disabled\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(LabelMore, {\n        labels: labels\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(BoxReply, {\n      disabled: disabled\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ConversationDetailAction, \"vDgHf3cAc4qxsqpCER5d7DrwSxg=\", false, function () {\n  return [useConversationDetail, useSelector, useSelector, useConversationDetail];\n});\n\n_c = ConversationDetailAction;\nexport default ConversationDetailAction;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConversationDetailAction\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/conversation-detail/conversation-detail-action.tsx"],"names":["React","useState","useEffect","useConversationDetail","useSelector","_findLast","_isObject","moment","BoxReply","ModalAnswers","ModalImgs","ModalShortcut","Space","LabelMore","ConversationDetailAction","messages","disabled","setDisabled","conversation","fanpage","page","type","length","message","o","from","id","fbObjectId","createDate","created_time","newDate","Date","diff","labels"],"mappings":";;;AAAA,OAAOA,KAAP,IAAoBC,QAApB,EAA8BC,SAA9B,QAA+C,OAA/C;AACA,SAASC,qBAAT,QAAsC,WAAtC;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,SAAP,MAAsB,iBAAtB;AAEA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,OAAOC,QAAP,MAAqB,aAArB;AAEA,OAAOC,YAAP,MAAyB,iBAAzB;AAEA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AAEA,SAASC,KAAT,QAAsB,MAAtB;AACA,OAAOC,SAAP,MAAsB,cAAtB;;;AAEA,MAAMC,wBAA4B,GAAG,MAAmB;AAAA;;AACpD,QAAM;AAAEC,IAAAA;AAAF,MAAeZ,qBAAqB,EAA1C;AAEA,QAAM,CAACa,QAAD,EAAWC,WAAX,IAA0BhB,QAAQ,CAAC,IAAD,CAAxC;AAEA,QAAMiB,YAA2B,GAAGd,WAAW,CAC3C,CAAC;AAAEe,IAAAA;AAAF,GAAD,KAA8CA,OAAO,CAACD,YADX,CAA/C;AAIA,QAAME,IAA0C,GAAGhB,WAAW,CAC1D,CAAC;AAAEe,IAAAA;AAAF,GAAD,KAAmCA,OAAO,CAACC,IADe,CAA9D;AAIAlB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIgB,YAAY,CAACG,IAAb,KAAsB,CAA1B,EAA6B;AACzB,aAAOJ,WAAW,CAAC,KAAD,CAAlB;AACH;;AAED,QAAIF,QAAQ,CAACO,MAAT,GAAkB,CAAlB,IAAuBJ,YAAY,CAACG,IAAb,KAAsB,CAAjD,EAAoD;AAChD,YAAME,OAAO,GAAGlB,SAAS,CAACU,QAAD,EAAYS,CAAD,IAAOA,CAAC,CAACC,IAAF,CAAOC,EAAP,KAAcN,IAAI,CAACO,UAArC,CAAzB;;AACA,UAAIrB,SAAS,CAACiB,OAAD,CAAb,EAAwB;AACpB,cAAMK,UAAU,GAAGrB,MAAM,CAACgB,OAAO,CAACM,YAAT,CAAzB;AACA,cAAMC,OAAO,GAAGvB,MAAM,CAAC,IAAIwB,IAAJ,EAAD,CAAtB;;AAEA,YAAID,OAAO,CAACE,IAAR,CAAaJ,UAAb,EAAyB,MAAzB,EAAiC,IAAjC,KAA0C,CAA9C,EAAiD;AAC7C,iBAAOX,WAAW,CAAC,KAAD,CAAlB;AACH;AACJ;AACJ;;AAEDA,IAAAA,WAAW,CAAC,IAAD,CAAX;AACH,GAlBQ,EAkBN,CAACF,QAAD,CAlBM,CAAT;AAoBA,QAAM;AAAEkB,IAAAA;AAAF,MAAa9B,qBAAqB,EAAxC;AACA,sBACI;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA,4BACI,QAAC,KAAD;AAAO,MAAA,IAAI,EAAE,EAAb;AAAiB,MAAA,KAAK,EAAC,QAAvB;AAAA,8BACI,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,SAAD;AAAW,QAAA,QAAQ,EAAEa;AAArB;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI,QAAC,YAAD;AAAc,QAAA,QAAQ,EAAEA;AAAxB;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII,QAAC,SAAD;AAAW,QAAA,MAAM,EAAEiB;AAAnB;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAQI,QAAC,QAAD;AAAU,MAAA,QAAQ,EAAEjB;AAApB;AAAA;AAAA;AAAA;AAAA,YARJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAYH,CA9CD;;GAAMF,wB;UACmBX,qB,EAIeC,W,EAIeA,W,EAwBhCD,qB;;;KAjCjBW,wB;AAgDN,eAAeA,wBAAf","sourcesContent":["import React, { FC, useState, useEffect } from 'react';\nimport { useConversationDetail } from './context';\nimport { useSelector } from 'react-redux';\n\nimport _findLast from 'lodash/findLast';\nimport _get from 'lodash/get';\nimport _isObject from 'lodash/isObject';\nimport moment from 'moment';\n\nimport BoxReply from './box-reply';\nimport Labels from './labels';\nimport ModalAnswers from './modal-answers';\nimport Emoji from './modal-emoji';\nimport ModalImgs from './modal-imgs';\nimport ModalShortcut from './model-shortcut';\nimport { IConversation, IFacebookState } from '../../../reducers/fanpageState/fanpageReducer';\nimport { Space } from 'antd';\nimport LabelMore from './label-more';\n\nconst ConversationDetailAction: FC = (): JSX.Element => {\n    const { messages } = useConversationDetail();\n\n    const [disabled, setDisabled] = useState(true);\n\n    const conversation: IConversation = useSelector(\n        ({ fanpage }: { fanpage: IFacebookState }) => fanpage.conversation\n    );\n\n    const page: { fbObjectId: string; name: string } = useSelector(\n        ({ fanpage }: { fanpage: any }) => fanpage.page\n    );\n\n    useEffect(() => {\n        if (conversation.type === 2) {\n            return setDisabled(false);\n        }\n\n        if (messages.length > 0 && conversation.type === 1) {\n            const message = _findLast(messages, (o) => o.from.id !== page.fbObjectId);\n            if (_isObject(message)) {\n                const createDate = moment(message.created_time);\n                const newDate = moment(new Date());\n\n                if (newDate.diff(createDate, 'days', true) <= 1) {\n                    return setDisabled(false);\n                }\n            }\n        }\n\n        setDisabled(true);\n    }, [messages]);\n\n    const { labels } = useConversationDetail();\n    return (\n        <div className='conversation-detail-action'>\n            <Space size={20} align='center'>\n                <ModalShortcut />\n                <ModalImgs disabled={disabled} />\n                <ModalAnswers disabled={disabled} />\n                <LabelMore labels={labels} />\n            </Space>\n\n            <BoxReply disabled={disabled} />\n        </div>\n    );\n};\n\nexport default ConversationDetailAction;\n"]},"metadata":{},"sourceType":"module"}