{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { HomeOutlined } from '@ant-design/icons';\nimport { Button, Col, message, Modal, Row, Tooltip } from 'antd';\nimport { push } from 'connected-react-router';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { validateToken } from '../../api/fanpage';\nimport { LoginFacebookBtn } from '../../components';\nimport { CustomerLayout } from '../../layout';\nimport { loginActionWithService } from '../../reducers/authState/authAction';\nimport { useNotification } from '../customer/notfication-context';\nimport ConversationCustomer from './conversation-customer';\nimport ConversationDetail from './conversation-detail';\nimport CoversationList from './conversation-list';\nimport './style.less';\nimport TabPages from './tab-pages';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Conversation = () => {\n  _s();\n\n  const {\n    title\n  } = useNotification();\n  const dispatch = useDispatch();\n  const page = useSelector(({\n    fanpage\n  }) => fanpage.page);\n  const loading = useSelector(({\n    fanpage\n  }) => fanpage.loading);\n  const store = useSelector(({\n    store\n  }) => store.store);\n  const loadingStore = useSelector(({\n    store\n  }) => store.loading);\n  const token = useSelector(({\n    auth\n  }) => auth.token);\n  const loadingAuth = useSelector(({\n    auth\n  }) => auth.loading);\n  const [isValidToken, setIsValidToken] = useState(true);\n\n  const handleSocialLogin = (response, service) => {\n    const {\n      accessToken\n    } = response;\n\n    if (accessToken) {\n      dispatch(loginActionWithService({\n        accessToken\n      }, service));\n    } else {\n      message.error('Đăng nhập không thành công.');\n    }\n  };\n\n  const loginFacebook = data => {\n    handleSocialLogin(data, 'facebook');\n  };\n\n  const title_page = `${title} Conversation`;\n  useEffect(() => {\n    if (!loading && !loadingAuth && !loadingStore && page) {\n      const callApiCheckToken = async () => {\n        try {\n          await validateToken({\n            storeId: store._id,\n            fbPageId: page.fbObjectId,\n            token: token.accessToken\n          });\n          setIsValidToken(true);\n        } catch (error) {\n          setIsValidToken(false);\n        }\n      };\n\n      callApiCheckToken();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CustomerLayout, {\n    title: title_page,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"conversation\",\n      children: [/*#__PURE__*/_jsxDEV(TabPages, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"conversation-main\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          className: \"content\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            style: {\n              width: 350\n            },\n            className: \"column conversation-wrap\",\n            children: /*#__PURE__*/_jsxDEV(CoversationList, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            className: \"column\",\n            style: {\n              flex: 1,\n              overflow: 'hidden'\n            },\n            children: /*#__PURE__*/_jsxDEV(ConversationDetail, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            style: {\n              maxWidth: 400,\n              width: '33.33%'\n            },\n            className: \"column\",\n            children: /*#__PURE__*/_jsxDEV(ConversationCustomer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), !loading && !isValidToken ? /*#__PURE__*/_jsxDEV(Modal, {\n      visible: true,\n      footer: null,\n      closeIcon: null,\n      closable: false,\n      bodyStyle: {\n        padding: 10,\n        textAlign: 'center'\n      },\n      width: 400,\n      title: /*#__PURE__*/_jsxDEV(Row, {\n        align: \"middle\",\n        justify: \"space-between\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: \"Th\\xF4ng b\\xE1o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            placement: \"left\",\n            title: \"Trang ch\\u1EE7\",\n            color: \"blue\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              icon: /*#__PURE__*/_jsxDEV(HomeOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 47\n              }, this),\n              onClick: () => dispatch(push('/'))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Facebook token c\\u1EE7a b\\u1EA1n \\u0111\\xE3 h\\u1EBFt h\\u1EA1n ho\\u1EB7c \\u0111\\xE3 b\\u1ECB thay \\u0111\\u1ED5i.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Vui l\\xF2ng k\\u1EBFt n\\u1ED1i l\\u1EA1i t\\xE0i kho\\u1EA3n facebook c\\u1EE7a b\\u1EA1n.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(LoginFacebookBtn, {\n        loginFacebook: loginFacebook,\n        title: \" K\\u1EBFt n\\u1ED1i l\\u1EA1i v\\u1EDBi facebook\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Conversation, \"5Q1DYVOUZ14PevUEjvpWtZUK5hw=\", false, function () {\n  return [useNotification, useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Conversation;\nexport default Conversation;\n\nvar _c;\n\n$RefreshReg$(_c, \"Conversation\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/conversation/index.tsx"],"names":["HomeOutlined","Button","Col","message","Modal","Row","Tooltip","push","React","useEffect","useState","useDispatch","useSelector","validateToken","LoginFacebookBtn","CustomerLayout","loginActionWithService","useNotification","ConversationCustomer","ConversationDetail","CoversationList","TabPages","Conversation","title","dispatch","page","fanpage","loading","store","loadingStore","token","auth","loadingAuth","isValidToken","setIsValidToken","handleSocialLogin","response","service","accessToken","error","loginFacebook","data","title_page","callApiCheckToken","storeId","_id","fbPageId","fbObjectId","width","flex","overflow","maxWidth","padding","textAlign","marginBottom"],"mappings":"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","sourcesContent":["import { HomeOutlined } from '@ant-design/icons';\nimport { Button, Col, message, Modal, Row, Tooltip } from 'antd';\nimport { push } from 'connected-react-router';\nimport React, { FC, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { validateToken } from '../../api/fanpage';\nimport { LoginFacebookBtn } from '../../components';\nimport { CustomerLayout } from '../../layout';\nimport { loginActionWithService } from '../../reducers/authState/authAction';\nimport { IAuthState } from '../../reducers/authState/authReducer';\nimport { IFacebookState } from '../../reducers/fanpageState/fanpageReducer';\nimport { IStoreState } from '../../reducers/storeState/storeReducer';\nimport { useNotification } from '../customer/notfication-context';\nimport ConversationCustomer from './conversation-customer';\nimport ConversationDetail from './conversation-detail';\nimport CoversationList from './conversation-list';\nimport './style.less';\nimport TabPages from './tab-pages';\n\nconst Conversation: FC = (): JSX.Element => {\n    const { title } = useNotification();\n    const dispatch = useDispatch();\n\n    const page = useSelector(({ fanpage }: { fanpage: IFacebookState }) => fanpage.page);\n    const loading = useSelector(({ fanpage }: { fanpage: IFacebookState }) => fanpage.loading);\n    const store = useSelector(({ store }: { store: IStoreState }) => store.store);\n    const loadingStore = useSelector(({ store }: { store: IStoreState }) => store.loading);\n    const token: any = useSelector(({ auth }: { auth: IAuthState }) => auth.token);\n    const loadingAuth: boolean = useSelector(({ auth }: { auth: IAuthState }) => auth.loading);\n\n    const [isValidToken, setIsValidToken] = useState(true);\n\n    const handleSocialLogin = (response: any, service?: string): void => {\n        const { accessToken } = response;\n        if (accessToken) {\n            dispatch(loginActionWithService({ accessToken }, service));\n        } else {\n            message.error('Đăng nhập không thành công.');\n        }\n    };\n\n    const loginFacebook = (data: any) => {\n        handleSocialLogin(data, 'facebook');\n    };\n\n    const title_page = `${title} Conversation`;\n\n    useEffect(() => {\n        if (!loading && !loadingAuth && !loadingStore && page) {\n            const callApiCheckToken = async () => {\n                try {\n                    await validateToken({\n                        storeId: store._id,\n                        fbPageId: page.fbObjectId,\n                        token: token.accessToken,\n                    });\n                    setIsValidToken(true);\n                } catch (error) {\n                    setIsValidToken(false);\n                }\n            };\n            callApiCheckToken();\n        }\n    }, []);\n\n    return (\n        <CustomerLayout title={title_page}>\n            <div className='conversation'>\n                <TabPages />\n                <div className='conversation-main'>\n                    <Row className='content'>\n                        <Col style={{ width: 350 }} className='column conversation-wrap'>\n                            <CoversationList />\n                        </Col>\n                        <Col className='column' style={{ flex: 1, overflow: 'hidden' }}>\n                            <ConversationDetail />\n                        </Col>\n                        <Col style={{ maxWidth: 400, width: '33.33%' }} className='column'>\n                            <ConversationCustomer />\n                        </Col>\n                    </Row>\n                </div>\n            </div>\n            {!loading && !isValidToken ? (\n                <Modal\n                    visible={true}\n                    footer={null}\n                    closeIcon={null}\n                    closable={false}\n                    bodyStyle={{ padding: 10, textAlign: 'center' }}\n                    width={400}\n                    title={\n                        <Row align='middle' justify='space-between'>\n                            <Col>Thông báo</Col>\n                            <Col>\n                                <Tooltip placement='left' title='Trang chủ' color='blue'>\n                                    <Button\n                                        icon={<HomeOutlined />}\n                                        onClick={() => dispatch(push('/'))}\n                                    ></Button>\n                                </Tooltip>\n                            </Col>\n                        </Row>\n                    }\n                >\n                    <div style={{ marginBottom: 10 }}>\n                        <span>Facebook token của bạn đã hết hạn hoặc đã bị thay đổi.</span>\n                        <br />\n                        <span>Vui lòng kết nối lại tài khoản facebook của bạn.</span>\n                    </div>\n                    <LoginFacebookBtn\n                        loginFacebook={loginFacebook}\n                        title=' Kết nối lại với facebook'\n                    />\n                </Modal>\n            ) : (\n                <></>\n            )}\n        </CustomerLayout>\n    );\n};\n\nexport default Conversation;\n"]},"metadata":{},"sourceType":"module"}