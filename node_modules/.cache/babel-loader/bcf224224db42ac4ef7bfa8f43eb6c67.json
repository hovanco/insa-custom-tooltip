{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/pages/products/form-add-product.tsx\",\n    _s = $RefreshSig$();\n\nimport { AutoComplete, Button, Col, Divider, Form, Input, InputNumber, Row } from 'antd';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { UploadImage } from '../../components';\nimport { createCategory, createProduct, fetchCategory, setCategory } from '../../reducers/productState/productAction';\nimport { formatterInput, parserInput } from '../../utils/format-money';\nimport './style.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst style = {\n  marginBottom: 15\n};\nconst {\n  TextArea\n} = Input;\n\nconst FormAddProduct = props => {\n  _s();\n\n  const {\n    toggle,\n    reloadTable,\n    visible\n  } = props;\n  const dispatch = useDispatch();\n  const category = useSelector(({\n    product\n  }) => product.category);\n  const categoryId = useSelector(({\n    product\n  }) => product.categoryId);\n  const [newCategory, setNewCategory] = useState('');\n  const [categoryIdFilter, setCategoryId] = useState('');\n  const formRef = useRef(null);\n  const [firstImage, setFirstImage] = useState('');\n  const [imagesSeleted, setImagesSeleted] = useState([]);\n\n  const resetForm = () => {\n    formRef.current.resetFields();\n  };\n\n  useEffect(() => {\n    if (categoryId) {\n      setCategoryId(categoryId);\n    }\n  }, [categoryId]);\n\n  const clearCategory = () => {\n    setCategoryId('');\n    setNewCategory('');\n    dispatch(setCategory([]));\n  };\n\n  const onFinish = async values => {\n    values.brandId = 'id__temp';\n    values.unitId = 'id__temp';\n    let images = [];\n\n    if (imagesSeleted.length > 0) {\n      images = imagesSeleted.map(img => img.key);\n    }\n\n    values.images = images;\n    categoryIdFilter && (values.categoryId = categoryIdFilter);\n    const data = { ...values,\n      length: values.length || undefined,\n      width: values.width || undefined,\n      height: values.height || undefined,\n      description: values.description && values.description.length === 0 || undefined\n    };\n    const result = await dispatch(createProduct(data));\n\n    if (!!result) {\n      clearCategory();\n      resetForm();\n      setFirstImage('');\n      setImagesSeleted([]);\n      toggle();\n      reloadTable();\n    }\n  };\n\n  const options = useMemo(() => {\n    return (category || []).map(item => ({ ...item,\n      value: item.name\n    }));\n  }, [category]);\n\n  const filterOption = (inputValue, option) => {\n    return option.value.toUpperCase().indexOf(inputValue.toUpperCase()) !== -1;\n  };\n\n  const onChange = value => {\n    dispatch(fetchCategory(value));\n    setNewCategory(value);\n  };\n\n  const onCreateCategory = async () => {\n    await dispatch(createCategory(newCategory));\n    setNewCategory('');\n  };\n\n  const onSelect = (value, option) => {\n    setCategoryId(option._id);\n  };\n\n  const onCancel = () => {\n    clearCategory();\n    resetForm();\n    setFirstImage('');\n    setImagesSeleted([]);\n    toggle();\n  };\n\n  const handleImages = images => {\n    setFirstImage(images[0].key);\n    setImagesSeleted(images);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    ref: formRef,\n    layout: \"vertical\",\n    onFinish: onFinish,\n    className: \"form__product\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      gutter: 15,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 8,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '10px'\n          },\n          children: \"\\u1EA2nh s\\u1EA3n ph\\u1EA9m:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(UploadImage, {\n          img: firstImage,\n          handleImages: handleImages,\n          imagesSeleted: imagesSeleted.map(img => img.key)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 16,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"name\",\n          label: \"T\\xEAn s\\u1EA3n ph\\u1EA9m\",\n          rules: [{\n            required: true,\n            message: 'Điền tên sản phẩm'\n          }],\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this), visible && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form__product--category\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"\",\n            children: \"Danh m\\u1EE5c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(AutoComplete, {\n            style: {\n              width: '100%'\n            },\n            options: options,\n            onChange: onChange,\n            onSelect: onSelect,\n            filterOption: filterOption,\n            className: \"auto--complete\",\n            children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 29\n          }, this), category.length === 0 && newCategory.trim().length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: onCreateCategory,\n            className: \"category__item\",\n            children: [\"T\\u1EA1o m\\u1EDBi danh m\\u1EE5c: \", newCategory]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"code\",\n          label: \"M\\xE3 s\\u1EA3n ph\\u1EA9m\",\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"weight\",\n          label: \"Kh\\u1ED1i l\\u01B0\\u1EE3ng (gram)\",\n          rules: [{\n            required: true,\n            message: 'Khối lượng sản phẩm tối thiểu 10g',\n            type: 'number',\n            min: 10,\n            max: 1000000\n          }],\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            style: {\n              width: '100%'\n            },\n            formatter: formatterInput,\n            parser: parserInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"originalPrice\",\n          label: \"Gi\\xE1 v\\u1ED1n (vnd)\",\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            style: {\n              width: '100%'\n            },\n            formatter: formatterInput,\n            parser: parserInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Gi\\xE1 b\\xE1n l\\u1EBB(vnd)\",\n          name: \"price\",\n          rules: [{\n            required: true,\n            message: 'Điền giá bán lẻ'\n          }],\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            style: {\n              width: '100%'\n            },\n            formatter: formatterInput,\n            parser: parserInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"wholesalePrice\",\n          label: \"Gi\\xE1 bu\\xF4n (vnd)\",\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            style: {\n              width: '100%'\n            },\n            formatter: formatterInput,\n            parser: parserInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"length\",\n          label: \"Chi\\u1EC1u d\\xE0i\",\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            style: {\n              width: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"width\",\n          label: \"Chi\\u1EC1u r\\u1ED9ng\",\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            style: {\n              width: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"height\",\n          label: \"Chi\\u1EC1u Cao\",\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            style: {\n              width: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"description\",\n          label: \"Chi ti\\u1EBFt\",\n          style: style,\n          children: /*#__PURE__*/_jsxDEV(TextArea, {\n            style: {\n              width: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            style: {\n              marginRight: 15\n            },\n            onClick: onCancel,\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            children: \"Th\\xEAm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FormAddProduct, \"3zSjCGT2Y9ou5PNUVMdcGf4OxL8=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = FormAddProduct;\nexport default FormAddProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormAddProduct\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/pages/products/form-add-product.tsx"],"names":["AutoComplete","Button","Col","Divider","Form","Input","InputNumber","Row","React","useEffect","useMemo","useRef","useState","useDispatch","useSelector","UploadImage","createCategory","createProduct","fetchCategory","setCategory","formatterInput","parserInput","style","marginBottom","TextArea","FormAddProduct","props","toggle","reloadTable","visible","dispatch","category","product","categoryId","newCategory","setNewCategory","categoryIdFilter","setCategoryId","formRef","firstImage","setFirstImage","imagesSeleted","setImagesSeleted","resetForm","current","resetFields","clearCategory","onFinish","values","brandId","unitId","images","length","map","img","key","data","undefined","width","height","description","result","options","item","value","name","filterOption","inputValue","option","toUpperCase","indexOf","onChange","onCreateCategory","onSelect","_id","onCancel","handleImages","required","message","trim","type","min","max","marginRight"],"mappings":";;;AAAA,SAASA,YAAT,EAAuBC,MAAvB,EAA+BC,GAA/B,EAAoCC,OAApC,EAA6CC,IAA7C,EAAmDC,KAAnD,EAA0DC,WAA1D,EAAuEC,GAAvE,QAAkF,MAAlF;AACA,OAAOC,KAAP,IAAoBC,SAApB,EAA+BC,OAA/B,EAAwCC,MAAxC,EAAgDC,QAAhD,QAAgE,OAAhE;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,SACIC,cADJ,EAEIC,aAFJ,EAGIC,aAHJ,EAIIC,WAJJ,QAKO,2CALP;AAMA,SAASC,cAAT,EAAyBC,WAAzB,QAA4C,0BAA5C;AACA,OAAO,cAAP;;AAEA,MAAMC,KAAK,GAAG;AACVC,EAAAA,YAAY,EAAE;AADJ,CAAd;AAUA,MAAM;AAAEC,EAAAA;AAAF,IAAenB,KAArB;;AAEA,MAAMoB,cAAyB,GAAIC,KAAD,IAAwB;AAAA;;AACtD,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,WAAV;AAAuBC,IAAAA;AAAvB,MAAmCH,KAAzC;AACA,QAAMI,QAAQ,GAAGjB,WAAW,EAA5B;AAEA,QAAMkB,QAAQ,GAAGjB,WAAW,CAAC,CAAC;AAAEkB,IAAAA;AAAF,GAAD,KAAmCA,OAAO,CAACD,QAA5C,CAA5B;AACA,QAAME,UAAU,GAAGnB,WAAW,CAAC,CAAC;AAAEkB,IAAAA;AAAF,GAAD,KAAmCA,OAAO,CAACC,UAA5C,CAA9B;AAEA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCvB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACwB,gBAAD,EAAmBC,aAAnB,IAAoCzB,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM0B,OAAO,GAAG3B,MAAM,CAAM,IAAN,CAAtB;AAEA,QAAM,CAAC4B,UAAD,EAAaC,aAAb,IAA8B5B,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAAC6B,aAAD,EAAgBC,gBAAhB,IAAoC9B,QAAQ,CAAW,EAAX,CAAlD;;AAEA,QAAM+B,SAAS,GAAG,MAAM;AACpBL,IAAAA,OAAO,CAACM,OAAR,CAAgBC,WAAhB;AACH,GAFD;;AAIApC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIwB,UAAJ,EAAgB;AACZI,MAAAA,aAAa,CAACJ,UAAD,CAAb;AACH;AACJ,GAJQ,EAIN,CAACA,UAAD,CAJM,CAAT;;AAMA,QAAMa,aAAa,GAAG,MAAM;AACxBT,IAAAA,aAAa,CAAC,EAAD,CAAb;AACAF,IAAAA,cAAc,CAAC,EAAD,CAAd;AACAL,IAAAA,QAAQ,CAACX,WAAW,CAAC,EAAD,CAAZ,CAAR;AACH,GAJD;;AAMA,QAAM4B,QAAQ,GAAG,MAAOC,MAAP,IAAuB;AACpCA,IAAAA,MAAM,CAACC,OAAP,GAAiB,UAAjB;AACAD,IAAAA,MAAM,CAACE,MAAP,GAAgB,UAAhB;AACA,QAAIC,MAAa,GAAG,EAApB;;AACA,QAAIV,aAAa,CAACW,MAAd,GAAuB,CAA3B,EAA8B;AAC1BD,MAAAA,MAAM,GAAGV,aAAa,CAACY,GAAd,CAAmBC,GAAD,IAASA,GAAG,CAACC,GAA/B,CAAT;AACH;;AACDP,IAAAA,MAAM,CAACG,MAAP,GAAgBA,MAAhB;AACAf,IAAAA,gBAAgB,KAAKY,MAAM,CAACf,UAAP,GAAoBG,gBAAzB,CAAhB;AAEA,UAAMoB,IAAI,GAAG,EACT,GAAGR,MADM;AAETI,MAAAA,MAAM,EAAEJ,MAAM,CAACI,MAAP,IAAiBK,SAFhB;AAGTC,MAAAA,KAAK,EAAEV,MAAM,CAACU,KAAP,IAAgBD,SAHd;AAITE,MAAAA,MAAM,EAAEX,MAAM,CAACW,MAAP,IAAiBF,SAJhB;AAKTG,MAAAA,WAAW,EAAGZ,MAAM,CAACY,WAAP,IAAsBZ,MAAM,CAACY,WAAP,CAAmBR,MAAnB,KAA8B,CAArD,IAA2DK;AAL/D,KAAb;AAQA,UAAMI,MAAM,GAAG,MAAM/B,QAAQ,CAACb,aAAa,CAACuC,IAAD,CAAd,CAA7B;;AACA,QAAI,CAAC,CAACK,MAAN,EAAc;AACVf,MAAAA,aAAa;AACbH,MAAAA,SAAS;AACTH,MAAAA,aAAa,CAAC,EAAD,CAAb;AACAE,MAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAf,MAAAA,MAAM;AACNC,MAAAA,WAAW;AACd;AACJ,GA3BD;;AA6BA,QAAMkC,OAAO,GAAGpD,OAAO,CAAC,MAAM;AAC1B,WAAO,CAACqB,QAAQ,IAAI,EAAb,EAAiBsB,GAAjB,CAAsBU,IAAD,KAA0D,EAClF,GAAGA,IAD+E;AAElFC,MAAAA,KAAK,EAAED,IAAI,CAACE;AAFsE,KAA1D,CAArB,CAAP;AAIH,GALsB,EAKpB,CAAClC,QAAD,CALoB,CAAvB;;AAOA,QAAMmC,YAAY,GAAG,CAACC,UAAD,EAAqBC,MAArB,KAAqC;AACtD,WAAOA,MAAM,CAACJ,KAAP,CAAaK,WAAb,GAA2BC,OAA3B,CAAmCH,UAAU,CAACE,WAAX,EAAnC,MAAiE,CAAC,CAAzE;AACH,GAFD;;AAIA,QAAME,QAAQ,GAAIP,KAAD,IAAmB;AAChClC,IAAAA,QAAQ,CAACZ,aAAa,CAAC8C,KAAD,CAAd,CAAR;AAEA7B,IAAAA,cAAc,CAAC6B,KAAD,CAAd;AACH,GAJD;;AAMA,QAAMQ,gBAAgB,GAAG,YAAY;AACjC,UAAM1C,QAAQ,CAACd,cAAc,CAACkB,WAAD,CAAf,CAAd;AACAC,IAAAA,cAAc,CAAC,EAAD,CAAd;AACH,GAHD;;AAKA,QAAMsC,QAAQ,GAAG,CAACT,KAAD,EAAgBI,MAAhB,KAAgC;AAC7C/B,IAAAA,aAAa,CAAC+B,MAAM,CAACM,GAAR,CAAb;AACH,GAFD;;AAIA,QAAMC,QAAQ,GAAG,MAAM;AACnB7B,IAAAA,aAAa;AACbH,IAAAA,SAAS;AACTH,IAAAA,aAAa,CAAC,EAAD,CAAb;AACAE,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAf,IAAAA,MAAM;AACT,GAND;;AAQA,QAAMiD,YAAY,GAAIzB,MAAD,IAAsB;AACvCX,IAAAA,aAAa,CAACW,MAAM,CAAC,CAAD,CAAN,CAAUI,GAAX,CAAb;AACAb,IAAAA,gBAAgB,CAACS,MAAD,CAAhB;AACH,GAHD;;AAKA,sBACI,QAAC,IAAD;AAAM,IAAA,GAAG,EAAEb,OAAX;AAAoB,IAAA,MAAM,EAAC,UAA3B;AAAsC,IAAA,QAAQ,EAAES,QAAhD;AAA0D,IAAA,SAAS,EAAC,eAApE;AAAA,2BACI,QAAC,GAAD;AAAK,MAAA,MAAM,EAAE,EAAb;AAAA,8BACI,QAAC,GAAD;AAAK,QAAA,IAAI,EAAE,CAAX;AAAA,gCACI;AAAK,UAAA,KAAK,EAAE;AAAExB,YAAAA,YAAY,EAAE;AAAhB,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI,QAAC,WAAD;AACI,UAAA,GAAG,EAAEgB,UADT;AAEI,UAAA,YAAY,EAAEqC,YAFlB;AAGI,UAAA,aAAa,EAAEnC,aAAa,CAACY,GAAd,CAAmBC,GAAD,IAASA,GAAG,CAACC,GAA/B;AAHnB;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eASI,QAAC,GAAD;AAAK,QAAA,IAAI,EAAE,EAAX;AAAA,gCACI,QAAC,IAAD,CAAM,IAAN;AACI,UAAA,IAAI,EAAC,MADT;AAEI,UAAA,KAAK,EAAC,2BAFV;AAGI,UAAA,KAAK,EAAE,CAAC;AAAEsB,YAAAA,QAAQ,EAAE,IAAZ;AAAkBC,YAAAA,OAAO,EAAE;AAA3B,WAAD,CAHX;AAII,UAAA,KAAK,EAAExD,KAJX;AAAA,iCAMI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,gBADJ,EAUKO,OAAO,iBACJ;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAA,kCACI;AAAO,YAAA,OAAO,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,YAAD;AACI,YAAA,KAAK,EAAE;AAAE6B,cAAAA,KAAK,EAAE;AAAT,aADX;AAEI,YAAA,OAAO,EAAEI,OAFb;AAGI,YAAA,QAAQ,EAAES,QAHd;AAII,YAAA,QAAQ,EAAEE,QAJd;AAKI,YAAA,YAAY,EAAEP,YALlB;AAMI,YAAA,SAAS,EAAC,gBANd;AAAA,mCAQI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AARJ;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAaKnC,QAAQ,CAACqB,MAAT,KAAoB,CAApB,IAAyBlB,WAAW,CAAC6C,IAAZ,GAAmB3B,MAAnB,GAA4B,CAArD,iBACG;AAAG,YAAA,OAAO,EAAEoB,gBAAZ;AAA8B,YAAA,SAAS,EAAC,gBAAxC;AAAA,4DACuBtC,WADvB;AAAA;AAAA;AAAA;AAAA;AAAA,kBAdR;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXR,eAgCI,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,IAAI,EAAC,MAAhB;AAAuB,UAAA,KAAK,EAAC,0BAA7B;AAA2C,UAAA,KAAK,EAAEZ,KAAlD;AAAA,iCACI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAhCJ,eAoCI,QAAC,IAAD,CAAM,IAAN;AACI,UAAA,IAAI,EAAC,QADT;AAEI,UAAA,KAAK,EAAC,kCAFV;AAGI,UAAA,KAAK,EAAE,CACH;AACIuD,YAAAA,QAAQ,EAAE,IADd;AAEIC,YAAAA,OAAO,EAAE,mCAFb;AAGIE,YAAAA,IAAI,EAAE,QAHV;AAIIC,YAAAA,GAAG,EAAE,EAJT;AAKIC,YAAAA,GAAG,EAAE;AALT,WADG,CAHX;AAYI,UAAA,KAAK,EAAE5D,KAZX;AAAA,iCAcI,QAAC,WAAD;AACI,YAAA,KAAK,EAAE;AAAEoC,cAAAA,KAAK,EAAE;AAAT,aADX;AAEI,YAAA,SAAS,EAAEtC,cAFf;AAGI,YAAA,MAAM,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA;AAdJ;AAAA;AAAA;AAAA;AAAA,gBApCJ,eAwDI,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,IAAI,EAAC,eAAhB;AAAgC,UAAA,KAAK,EAAC,uBAAtC;AAAsD,UAAA,KAAK,EAAEC,KAA7D;AAAA,iCACI,QAAC,WAAD;AACI,YAAA,KAAK,EAAE;AAAEoC,cAAAA,KAAK,EAAE;AAAT,aADX;AAEI,YAAA,SAAS,EAAEtC,cAFf;AAGI,YAAA,MAAM,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAxDJ,eA+DI,QAAC,IAAD,CAAM,IAAN;AACI,UAAA,KAAK,EAAC,4BADV;AAEI,UAAA,IAAI,EAAC,OAFT;AAGI,UAAA,KAAK,EAAE,CAAC;AAAEwD,YAAAA,QAAQ,EAAE,IAAZ;AAAkBC,YAAAA,OAAO,EAAE;AAA3B,WAAD,CAHX;AAII,UAAA,KAAK,EAAExD,KAJX;AAAA,iCAMI,QAAC,WAAD;AACI,YAAA,KAAK,EAAE;AAAEoC,cAAAA,KAAK,EAAE;AAAT,aADX;AAEI,YAAA,SAAS,EAAEtC,cAFf;AAGI,YAAA,MAAM,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,gBA/DJ,eA2EI,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,IAAI,EAAC,gBAAhB;AAAiC,UAAA,KAAK,EAAC,sBAAvC;AAAwD,UAAA,KAAK,EAAEC,KAA/D;AAAA,iCACI,QAAC,WAAD;AACI,YAAA,KAAK,EAAE;AAAEoC,cAAAA,KAAK,EAAE;AAAT,aADX;AAEI,YAAA,SAAS,EAAEtC,cAFf;AAGI,YAAA,MAAM,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBA3EJ,eAkFI,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,IAAI,EAAC,QAAhB;AAAyB,UAAA,KAAK,EAAC,mBAA/B;AAA2C,UAAA,KAAK,EAAEC,KAAlD;AAAA,iCACI,QAAC,WAAD;AAAa,YAAA,KAAK,EAAE;AAAEoC,cAAAA,KAAK,EAAE;AAAT;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAlFJ,eAqFI,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,IAAI,EAAC,OAAhB;AAAwB,UAAA,KAAK,EAAC,sBAA9B;AAA2C,UAAA,KAAK,EAAEpC,KAAlD;AAAA,iCACI,QAAC,WAAD;AAAa,YAAA,KAAK,EAAE;AAAEoC,cAAAA,KAAK,EAAE;AAAT;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBArFJ,eAwFI,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,IAAI,EAAC,QAAhB;AAAyB,UAAA,KAAK,EAAC,gBAA/B;AAA2C,UAAA,KAAK,EAAEpC,KAAlD;AAAA,iCACI,QAAC,WAAD;AAAa,YAAA,KAAK,EAAE;AAAEoC,cAAAA,KAAK,EAAE;AAAT;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAxFJ,eA2FI,QAAC,IAAD,CAAM,IAAN;AAAW,UAAA,IAAI,EAAC,aAAhB;AAA8B,UAAA,KAAK,EAAC,eAApC;AAA+C,UAAA,KAAK,EAAEpC,KAAtD;AAAA,iCACI,QAAC,QAAD;AAAU,YAAA,KAAK,EAAE;AAAEoC,cAAAA,KAAK,EAAE;AAAT;AAAjB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBA3FJ,eA+FI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,gBA/FJ,eAiGI,QAAC,IAAD,CAAM,IAAN;AAAA,kCACI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAE;AAAEyB,cAAAA,WAAW,EAAE;AAAf,aAAf;AAAoC,YAAA,OAAO,EAAER,QAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII,QAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,SAAb;AAAuB,YAAA,QAAQ,EAAC,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjGJ;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAwHH,CA1ND;;GAAMlD,c;UAEeZ,W,EAEAC,W,EACEA,W;;;KALjBW,c;AA4NN,eAAeA,cAAf","sourcesContent":["import { AutoComplete, Button, Col, Divider, Form, Input, InputNumber, Row } from 'antd';\nimport React, { FC, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { IImage } from '../../collections/image';\nimport { UploadImage } from '../../components';\n\nimport {\n    createCategory,\n    createProduct,\n    fetchCategory,\n    setCategory,\n} from '../../reducers/productState/productAction';\nimport { formatterInput, parserInput } from '../../utils/format-money';\nimport './style.less';\n\nconst style = {\n    marginBottom: 15,\n};\n\ninterface Props {\n    toggle: any;\n    reloadTable: any;\n    visible: boolean;\n}\n\nconst { TextArea } = Input;\n\nconst FormAddProduct: FC<Props> = (props): JSX.Element => {\n    const { toggle, reloadTable, visible } = props;\n    const dispatch = useDispatch();\n\n    const category = useSelector(({ product }: { product: any }) => product.category);\n    const categoryId = useSelector(({ product }: { product: any }) => product.categoryId);\n\n    const [newCategory, setNewCategory] = useState('');\n    const [categoryIdFilter, setCategoryId] = useState('');\n    const formRef = useRef<any>(null);\n\n    const [firstImage, setFirstImage] = useState('');\n    const [imagesSeleted, setImagesSeleted] = useState<IImage[]>([]);\n\n    const resetForm = () => {\n        formRef.current.resetFields();\n    };\n\n    useEffect(() => {\n        if (categoryId) {\n            setCategoryId(categoryId);\n        }\n    }, [categoryId]);\n\n    const clearCategory = () => {\n        setCategoryId('');\n        setNewCategory('');\n        dispatch(setCategory([]));\n    };\n\n    const onFinish = async (values: any) => {\n        values.brandId = 'id__temp';\n        values.unitId = 'id__temp';\n        let images: any[] = [];\n        if (imagesSeleted.length > 0) {\n            images = imagesSeleted.map((img) => img.key);\n        }\n        values.images = images;\n        categoryIdFilter && (values.categoryId = categoryIdFilter);\n\n        const data = {\n            ...values,\n            length: values.length || undefined,\n            width: values.width || undefined,\n            height: values.height || undefined,\n            description: (values.description && values.description.length === 0) || undefined,\n        };\n\n        const result = await dispatch(createProduct(data));\n        if (!!result) {\n            clearCategory();\n            resetForm();\n            setFirstImage('');\n            setImagesSeleted([]);\n            toggle();\n            reloadTable();\n        }\n    };\n\n    const options = useMemo(() => {\n        return (category || []).map((item: { _id: string; name: string; value?: string }) => ({\n            ...item,\n            value: item.name,\n        }));\n    }, [category]);\n\n    const filterOption = (inputValue: string, option: any) => {\n        return option.value.toUpperCase().indexOf(inputValue.toUpperCase()) !== -1;\n    };\n\n    const onChange = (value: string) => {\n        dispatch(fetchCategory(value));\n\n        setNewCategory(value);\n    };\n\n    const onCreateCategory = async () => {\n        await dispatch(createCategory(newCategory));\n        setNewCategory('');\n    };\n\n    const onSelect = (value: string, option: any) => {\n        setCategoryId(option._id);\n    };\n\n    const onCancel = () => {\n        clearCategory();\n        resetForm();\n        setFirstImage('');\n        setImagesSeleted([]);\n        toggle();\n    };\n\n    const handleImages = (images: IImage[]) => {\n        setFirstImage(images[0].key);\n        setImagesSeleted(images);\n    };\n\n    return (\n        <Form ref={formRef} layout='vertical' onFinish={onFinish} className='form__product'>\n            <Row gutter={15}>\n                <Col span={8}>\n                    <div style={{ marginBottom: '10px' }}>Ảnh sản phẩm:</div>\n                    <UploadImage\n                        img={firstImage}\n                        handleImages={handleImages}\n                        imagesSeleted={imagesSeleted.map((img) => img.key)}\n                    />\n                </Col>\n                <Col span={16}>\n                    <Form.Item\n                        name='name'\n                        label='Tên sản phẩm'\n                        rules={[{ required: true, message: 'Điền tên sản phẩm' }]}\n                        style={style}\n                    >\n                        <Input />\n                    </Form.Item>\n\n                    {visible && (\n                        <div className='form__product--category'>\n                            <label htmlFor=''>Danh mục</label>\n                            <AutoComplete\n                                style={{ width: '100%' }}\n                                options={options}\n                                onChange={onChange}\n                                onSelect={onSelect}\n                                filterOption={filterOption}\n                                className='auto--complete'\n                            >\n                                <Input />\n                            </AutoComplete>\n\n                            {category.length === 0 && newCategory.trim().length > 0 && (\n                                <p onClick={onCreateCategory} className='category__item'>\n                                    Tạo mới danh mục: {newCategory}\n                                </p>\n                            )}\n                        </div>\n                    )}\n\n                    <Form.Item name='code' label='Mã sản phẩm' style={style}>\n                        <Input />\n                    </Form.Item>\n\n                    <Form.Item\n                        name='weight'\n                        label='Khối lượng (gram)'\n                        rules={[\n                            {\n                                required: true,\n                                message: 'Khối lượng sản phẩm tối thiểu 10g',\n                                type: 'number',\n                                min: 10,\n                                max: 1000000,\n                            },\n                        ]}\n                        style={style}\n                    >\n                        <InputNumber\n                            style={{ width: '100%' }}\n                            formatter={formatterInput}\n                            parser={parserInput}\n                        />\n                    </Form.Item>\n                    <Form.Item name='originalPrice' label='Giá vốn (vnd)' style={style}>\n                        <InputNumber\n                            style={{ width: '100%' }}\n                            formatter={formatterInput}\n                            parser={parserInput}\n                        />\n                    </Form.Item>\n                    <Form.Item\n                        label='Giá bán lẻ(vnd)'\n                        name='price'\n                        rules={[{ required: true, message: 'Điền giá bán lẻ' }]}\n                        style={style}\n                    >\n                        <InputNumber\n                            style={{ width: '100%' }}\n                            formatter={formatterInput}\n                            parser={parserInput}\n                        />\n                    </Form.Item>\n                    <Form.Item name='wholesalePrice' label='Giá buôn (vnd)' style={style}>\n                        <InputNumber\n                            style={{ width: '100%' }}\n                            formatter={formatterInput}\n                            parser={parserInput}\n                        />\n                    </Form.Item>\n                    <Form.Item name='length' label='Chiều dài' style={style}>\n                        <InputNumber style={{ width: '100%' }} />\n                    </Form.Item>\n                    <Form.Item name='width' label='Chiều rộng' style={style}>\n                        <InputNumber style={{ width: '100%' }} />\n                    </Form.Item>\n                    <Form.Item name='height' label='Chiều Cao' style={style}>\n                        <InputNumber style={{ width: '100%' }} />\n                    </Form.Item>\n                    <Form.Item name='description' label='Chi tiết' style={style}>\n                        <TextArea style={{ width: '100%' }} />\n                    </Form.Item>\n\n                    <Divider />\n\n                    <Form.Item>\n                        <Button style={{ marginRight: 15 }} onClick={onCancel}>\n                            Hủy\n                        </Button>\n                        <Button type='primary' htmlType='submit'>\n                            Thêm\n                        </Button>\n                    </Form.Item>\n                </Col>\n            </Row>\n        </Form>\n    );\n};\n\nexport default FormAddProduct;\n"]},"metadata":{},"sourceType":"module"}