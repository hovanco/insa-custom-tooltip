{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/FacebookClient/src/components/image/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { CheckOutlined, CloseCircleFilled, StarFilled } from '@ant-design/icons';\nimport { message } from 'antd';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { removeImageRequest, updateImageRequest } from '../../api/images-api';\nimport { IMG_URL } from '../../configs/vars';\nimport { removeImage, toggleBookmark } from '../../reducers/imagesState/imagesAction';\nimport './style.less';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Image = ({\n  image,\n  select = false,\n  handleSelect,\n  removeSelect\n}) => {\n  _s();\n\n  const token = useSelector(state => state.auth.token);\n  const store = useSelector(state => state.store.store);\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n\n  const onSelect = () => {\n    if (select) {\n      removeSelect(image.key);\n    } else {\n      handleSelect(image.key);\n    }\n  };\n\n  const handleRemoveImage = async () => {\n    setLoading(true);\n\n    try {\n      const response = await removeImageRequest({\n        token: token.accessToken,\n        storeId: store._id,\n        imageId: image._id\n      });\n      dispatch(removeImage(image._id));\n      message.success('Đã xóa hình ảnh');\n    } catch (error) {\n      message.error('Lỗi xóa hình ảnh');\n    }\n  };\n\n  const likeImage = async () => {\n    const messageSuccess = image.star ? 'Đã xóa khỏi yêu thích' : 'Đã thêm vào yêu thích';\n    const messageError = image.star ? 'Lỗi xóa khỏi yêu thích' : 'Lỗi thêm vào yêu thích';\n\n    try {\n      const response = await updateImageRequest({\n        token: token.accessToken,\n        storeId: store._id,\n        imageId: image._id,\n        data: {\n          star: !image.star\n        }\n      });\n      dispatch(toggleBookmark(image._id));\n      message.success(messageSuccess);\n    } catch (error) {\n      message.error(messageError);\n    }\n  };\n\n  const bookmarkClass = image.star ? 'bookmark star' : 'bookmark';\n  const color_star = image.star ? 'yellow' : 'gray';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"image\",\n    style: {\n      backgroundImage: `url(${IMG_URL}${image.key})`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gray\",\n      onClick: onSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), select && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"select\",\n      onClick: onSelect,\n      children: /*#__PURE__*/_jsxDEV(CheckOutlined, {\n        style: {\n          color: '#fff'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"remove\",\n      onClick: handleRemoveImage,\n      children: /*#__PURE__*/_jsxDEV(CloseCircleFilled, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: bookmarkClass,\n      onClick: likeImage,\n      children: /*#__PURE__*/_jsxDEV(StarFilled, {\n        style: {\n          color: color_star\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"name\",\n      children: image.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Image, \"Qvgac40i7TAtaQxqJ1IF/6QhauE=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = Image;\nexport default Image;\n\nvar _c;\n\n$RefreshReg$(_c, \"Image\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/FacebookClient/src/components/image/index.tsx"],"names":["CheckOutlined","CloseCircleFilled","StarFilled","message","React","useState","useDispatch","useSelector","removeImageRequest","updateImageRequest","IMG_URL","removeImage","toggleBookmark","Image","image","select","handleSelect","removeSelect","token","state","auth","store","dispatch","loading","setLoading","onSelect","key","handleRemoveImage","response","accessToken","storeId","_id","imageId","success","error","likeImage","messageSuccess","star","messageError","data","bookmarkClass","color_star","backgroundImage","color","name"],"mappings":"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","sourcesContent":["import { CheckOutlined, CloseCircleFilled, StarFilled } from '@ant-design/icons';\nimport { message } from 'antd';\nimport React, { FC, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { removeImageRequest, updateImageRequest } from '../../api/images-api';\nimport { IImage } from '../../collections/image';\nimport { IMG_URL } from '../../configs/vars';\nimport { removeImage, toggleBookmark } from '../../reducers/imagesState/imagesAction';\nimport './style.less';\n\ninterface Props {\n    image: IImage;\n    select?: boolean;\n    handleSelect: (id: string) => void;\n    removeSelect: (id: string) => void;\n}\n\nconst Image: FC<Props> = ({ image, select = false, handleSelect, removeSelect }) => {\n    const token = useSelector((state: any) => state.auth.token);\n    const store = useSelector((state: any) => state.store.store);\n    const dispatch = useDispatch();\n    const [loading, setLoading] = useState(false);\n\n    const onSelect = () => {\n        if (select) {\n            removeSelect(image.key);\n        } else {\n            handleSelect(image.key);\n        }\n    };\n\n    const handleRemoveImage = async () => {\n        setLoading(true);\n\n        try {\n            const response = await removeImageRequest({\n                token: token.accessToken,\n                storeId: store._id,\n                imageId: image._id,\n            });\n\n            dispatch(removeImage(image._id));\n\n            message.success('Đã xóa hình ảnh');\n        } catch (error) {\n            message.error('Lỗi xóa hình ảnh');\n        }\n    };\n\n    const likeImage = async () => {\n        const messageSuccess = image.star ? 'Đã xóa khỏi yêu thích' : 'Đã thêm vào yêu thích';\n        const messageError = image.star ? 'Lỗi xóa khỏi yêu thích' : 'Lỗi thêm vào yêu thích';\n        try {\n            const response = await updateImageRequest({\n                token: token.accessToken,\n                storeId: store._id,\n                imageId: image._id,\n                data: {\n                    star: !image.star,\n                },\n            });\n\n            dispatch(toggleBookmark(image._id));\n\n            message.success(messageSuccess);\n        } catch (error) {\n            message.error(messageError);\n        }\n    };\n\n    const bookmarkClass = image.star ? 'bookmark star' : 'bookmark';\n    const color_star = image.star ? 'yellow' : 'gray';\n\n    return (\n        <div className='image' style={{ backgroundImage: `url(${IMG_URL}${image.key})` }}>\n            <div className='gray' onClick={onSelect} />\n            {select && (\n                <div className='select' onClick={onSelect}>\n                    <CheckOutlined style={{ color: '#fff' }} />\n                </div>\n            )}\n\n            <div className='remove' onClick={handleRemoveImage}>\n                <CloseCircleFilled />\n            </div>\n            <div className={bookmarkClass} onClick={likeImage}>\n                <StarFilled style={{ color: color_star }} />\n            </div>\n\n            <div className='name'>{image.name}</div>\n        </div>\n    );\n};\n\nexport default Image;\n"]},"metadata":{},"sourceType":"module"}